<blocks app="Snap! 8.2, https://snap.berkeley.edu" version="2"><palette><category name="Hugging Face" color="119,0,194,1"/><category name="OpenAI" color="209,0,165,1"/><category name="Jurassic 1" color="127,0,235,1"/><category name="Cohere" color="74,107,0,1"/><category name="text-generator.io" color="163,67,0,1"/><category name="Language models" color="0,116,143,1"/><category name="Language" color="219,165,0,1"/></palette><block-definition s="set default language to %&apos;language&apos;" type="command" category="sensing"><comment x="0" y="0" w="275.7142857142857" collapsed="false">Language to use for speech input and output only if no language or voice is specified. Can be the language name in English or itself. Or the official code for the language such as fr-FR for French in France. Also used as the default language for the word embedding blocks.</comment><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>set_default_language</l><list><block var="language"/></list></custom-block></script></block-definition><block-definition s="Open web page %&apos;url&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="Load eCraft2Learn library"></custom-block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>open_web_page</l><list><block var="url"/></list></custom-block></script></block-definition><block-definition s="Set presentation mode to %&apos;flag&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%b"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>set_presentation_mode</l><list><block var="flag"/></list></custom-block></script></block-definition><block-definition s="text or texts input %&apos;text or texts&apos;" type="reporter" category="Hugging Face"><comment x="0" y="0" w="220" collapsed="true">Input can either be text or a list of texts.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doIfElse"><block s="reportIsA"><block var="text or texts"/><l><option>text</option></l></block><script><block s="doReport"><block s="reportJoinWords"><list><l>"inputs": </l><custom-block s="quote %txt"><block var="text or texts"/></custom-block></list></block></block></script><script><block s="doReport"><block s="reportJoinWords"><list><l>"inputs": [</l><custom-block s="separate with commas %l"><block s="reportMap"><block s="reifyReporter"><autolambda><custom-block s="quote %txt"><l></l></custom-block></autolambda><list></list></block><block var="text or texts"/></block></custom-block><l>]</l></list></block></block></script></block></script></block-definition><block-definition s="quote %&apos;text&apos;" type="reporter" category="Hugging Face"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>quoted text</l><block s="reportNewList"><list></list></block></custom-block><block s="doForEach"><l>letter</l><block s="reportTextSplit"><block var="text"/><l><option>letter</option></l></block><script><block s="doIf"><block s="reportVariadicEquals"><list><block var="letter"/><l>"</l></list></block><script><block s="doAddToList"><l>\</l><block var="quoted text"/></block></script></block><block s="doAddToList"><block var="letter"/><block var="quoted text"/></block></script></block><block s="doReport"><block s="reportJoinWords"><list><l>"</l><block var="quoted text"/><l>"</l></list></block></block></script></block-definition><block-definition s="separate with commas %&apos;list&apos;" type="reporter" category="lists"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><l></l><l>,</l></list></block></autolambda><list></list></block><custom-block s="all but last %l"><block var="list"/></custom-block></block><block s="reportListItem"><l><option>last</option></l><block var="list"/></block></list></block></block></script></block-definition><block-definition s="all but last %&apos;list&apos;" type="reporter" category="lists"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doIfElse"><block s="reportVariadicLessThanOrEquals"><list><block s="reportListAttribute"><l><option>length</option></l><block var="list"/></block><l>1</l></list></block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script><script><block s="doReport"><block s="reportListItem"><block s="reportNumbers"><l>1</l><block s="reportDifference"><block s="reportListAttribute"><l><option>length</option></l><block var="list"/></block><l>1</l></block></block><block var="list"/></block></block></script></block></script></block-definition><block-definition s="Hugging face model %&apos;model name&apos; with key %&apos;api key&apos; $nl with input %&apos;data&apos;" type="reporter" category="Hugging Face"><comment x="0" y="0" w="433.9327566964286" collapsed="false">Can communicate with over 15,000 models.&#xD;The API key can be obtained from huggingface.co&#xD;More information at&#xD;https://ecraft2learn.github.io/ai/AI-Teacher-Guide/chapter-5.html#hugging-face</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doReport"><custom-block s="Hugging face model %txt with key %txt %br with input %mult%s %br but if there is an error %cmdRing"><block var="model name"/><block var="api key"/><block var="data"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block></custom-block></block></script></block-definition><block-definition s="Hugging face model %&apos;model name&apos; with key %&apos;api key&apos; $nl with input %&apos;data&apos; $nl but if there is an error %&apos;process error&apos;" type="reporter" category="Hugging Face"><comment x="0" y="0" w="433.9327566964286" collapsed="false">Can communicate with over 15,000 models.&#xD;The API key can be obtained from huggingface.co&#xD;More information at&#xD;https://ecraft2learn.github.io/ai/AI-Teacher-Guide/chapter-5.html#hugging-face</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input><input type="%mult%s"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><block s="reportJoinWords"><list><l>https://api-inference.huggingface.co/models/</l><block var="model name"/></list></block><block s="reportJoinWords"><list><l>{</l><custom-block s="separate with commas %l"><block var="data"/></custom-block><l>}</l></list></block><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block></list><comment w="201.42857142857144" collapsed="true">Send the request to Hugging Face.</comment></custom-block></custom-block><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block><comment w="241.67103794642887" collapsed="true">Turn the response from JSON to Snap! lists.</comment></custom-block><custom-block s="let %upvar be %s"><l>error</l><custom-block s="lookup value of %txt in %l"><l>error</l><block var="response"/></custom-block></custom-block><block s="doIf"><block s="reportVariadicAnd"><list><block s="reportIsA"><block var="error"/><l><option>list</option></l></block><block s="reportVariadicEquals"><list><block s="reportListAttribute"><l><option>length</option></l><block var="error"/></block><l>1</l></list></block></list></block><script><block s="doSetVar"><l>error</l><block s="reportListItem"><l>1</l><block var="error"/></block></block></script></block><block s="doIfElse"><block s="reportIsA"><block var="error"/><l><option>text</option></l><comment w="158.57142857142875" collapsed="true">Check if there is an error</comment></block><script><block s="doIfElse"><custom-block s="text %txt contains %txt"><block var="error"/><l>is currently loading</l><comment w="260.0118582589286" collapsed="true">If the error is that the model isn&apos;t ready then wait.</comment></custom-block><script><block s="doThinkFor"><l>Loading please wait.</l><block s="reportQuotient"><custom-block s="lookup value of %txt in %l"><l>estimated_time</l><block var="response"/></custom-block><l>2</l></block><comment w="204.2975725446423" collapsed="true">Estimates seem too large so try 1/2</comment></block><block s="doReport"><custom-block s="Hugging face model %txt with key %txt %br with input %mult%s %br but if there is an error %cmdRing"><block var="model name"/><block var="api key"/><block var="data"/><block var="process error"/></custom-block></block></script><script><block s="doRun"><block var="process error"/><list><block var="error"/></list></block><block s="doReport"><block var="error"/></block></script></block></script><script><block s="doReport"><block var="response"/></block></script></block></script></block-definition><block-definition s="lookup value of %&apos;key&apos; in %&apos;association list&apos;" type="reporter" category="lists"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input></inputs><script><custom-block s="let %upvar be %s"><l>entry</l><block s="reportFindFirst"><block s="reifyPredicate"><autolambda><block s="reportVariadicEquals"><list><block s="reportListItem"><l>1</l><l/></block><block var="key"/></list></block></autolambda><list></list></block><block var="association list"/></block></custom-block><block s="doIfElse"><block s="reportIsA"><block var="entry"/><l><option>list</option></l></block><script><block s="doReport"><block s="reportListItem"><l>2</l><block var="entry"/></block></block></script><script><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script></block></script></block-definition><block-definition s="text %&apos;string&apos; contains %&apos;marker&apos;" type="predicate" category="operators"><comment x="0" y="0" w="218" collapsed="false">Reports True if the first input string contains the second input string, otherwise false.&#xD;&#xD;Comparison is case-independent by default; use USE CASE-INDEPENDENT COMPARISONS to change that.</comment><header></header><code></code><translations>pt:o texto de _ antes de _&#xD;ca:text _ conté _ ?&#xD;</translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportVariadicGreaterThan"><list><custom-block s="position of %s in %txt"><block var="marker"/><block var="string"/></custom-block><l>0</l></list></block></block></script></block-definition><block-definition s="position of %&apos;small&apos; in %&apos;large&apos;" type="reporter" category="operators"><comment x="0" y="0" w="294" collapsed="false">Reports the character position (starting from 1) of the beginning of the first input string inside the second input string.&#xD;If it&apos;s not found, reports 0.</comment><header></header><code></code><translations>pt:a posição de _ em _&#xD;ca:posició de _ en _&#xD;</translations><inputs><input type="%s"></input><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportIfElse"><custom-block s="use case-independent comparison"></custom-block><block s="reportApplyExtension"><l>txt_indexof(sub, txt)</l><list><custom-block s="to lower case %txt"><block var="small"/></custom-block><custom-block s="to lower case %txt"><block var="large"/></custom-block></list></block><block s="reportApplyExtension"><l>txt_indexof(sub, txt)</l><list><block var="small"/><block var="large"/></list></block></block></block></script></block-definition><block-definition s="use case-independent comparison" type="predicate" category="sensing"><header></header><code></code><translations>ca:comparacions ignorant majúscules?&#xD;</translations><inputs></inputs><script><block s="doDeclareVariables"><list><l>result</l></list></block><block s="doApplyExtension"><l>err_try(cmd, catch, err)</l><list><block s="reifyScript"><script><block s="doSetVar"><l>result</l><block s="reportApplyExtension"><l>var_get(name)</l><list><l>_case indepent</l></list></block></block></script><list></list></block><block s="reifyScript"><script><block s="doSetVar"><l>result</l><block s="reportBoolean"><l><bool>true</bool></l></block></block></script><list></list></block><l></l></list></block><block s="doApplyExtension"><l>err_reset</l><list></list></block><block s="doReport"><block var="result"/></block></script></block-definition><block-definition s="to lower case %&apos;text&apos;" type="reporter" category="operators"><comment x="0" y="0" w="275.3333333333333" collapsed="false">Reports the input text with lower case letters instead of capital letters in the input.  Uses the user&apos;s locale&apos;s rules for case conversion.</comment><header></header><code></code><translations>pt:em minúsculas _&#xD;ca:_ a minúscules&#xD;</translations><inputs><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportApplyExtension"><l>txt_lowercase(txt)</l><list><block var="text"/></list></block></block></script></block-definition><block-definition s="Ask %&apos;server&apos; to create a costume described as %&apos;description&apos; with key or server URL %&apos;server URL or API key&apos; with size %&apos;size&apos;" type="reporter" category="looks"><comment x="0" y="0" w="262.77777777777777" collapsed="false">Reports a costume that match &apos;description&apos; of &apos;size&apos;. &apos;server&apos; can either be DALLE-2 in which case the API key needs to be provided or it is Stable Diffusion and the URL of the server is provided.</comment><header></header><code></code><translations></translations><inputs><input type="%txt">DALLE-2<options>DALLE-2&#xD;Stable diffusion server</options></input><input type="%txt"></input><input type="%txt"></input><input type="%n">512</input></inputs><script><block s="doReport"><custom-block s="Ask %txt to create a costume described as %txt with key or server URL %txt with size %n %br and pass b64 json to %cmdRing %br but if there is an error %cmdRing"><block var="server"/><block var="description"/><block var="server URL or API key"/><block var="size"/><block s="reifyScript"><script></script><list></list></block><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block></custom-block></block></script></block-definition><block-definition s="Ask %&apos;server&apos; to create a costume described as %&apos;description&apos; with key or server URL %&apos;server URL or API key&apos; with size %&apos;size&apos; $nl and pass b64 json to %&apos;process b64 json&apos; $nl but if there is an error %&apos;process error&apos;" type="reporter" category="looks"><comment x="0" y="0" w="262.77777777777777" collapsed="false">Reports a costume that match &apos;description&apos; of &apos;size&apos;. &apos;server&apos; can either be DALLE-2 in which case the API key needs to be provided or it is Stable Diffusion and the URL of the server is provided. The encoding of the costume&apos;s image is passed to &apos;process b64 json&quot; if provided.</comment><header></header><code></code><translations></translations><inputs><input type="%txt">DALLE-2<options>DALLE-2&#xD;Stable diffusion server</options></input><input type="%txt"></input><input type="%txt"></input><input type="%n">512</input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doIfElse"><block s="reportVariadicEquals"><list><block var="server"/><l>DALLE-2</l></list></block><script><block s="doIfElse"><block s="reportListContainsItem"><block s="reportNewList"><list><l>256</l><l>512</l><l>1024</l></list></block><block var="size"/></block><script><custom-block s="let %upvar be %s"><l>images</l><custom-block s="Ask DALLE-2 to create %n costumes described as %txt with size %n with key %txt %br and pass b64 json to %cmdRing %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><l>1</l><block var="description"/><block var="size"/><block var="server URL or API key"/><block var="process b64 json"/><block var="process error"/><block s="reifyScript"><script></script><list></list></block></custom-block></custom-block><block s="doReport"><block s="reportIfElse"><block s="reportIsA"><block var="images"/><l><option>list</option></l></block><block s="reportListItem"><l>1</l><block var="images"/></block><block var="images"/></block></block></script><script><block s="doReport"><block s="reportJoinWords"><list><l>DALLE-2 can only create square images of size 256, 512, or 1024. Size is </l><block var="size"/></list></block></block></script></block></script><script><block s="doReport"><custom-block s="Create a costume described as %txt %br with size %n with guidance %n with seed %n %br using this server %txt %br and pass b64 json to process %cmdRing %br but if there is an error %cmdRing"><block var="description"/><block var="size"/><l>10</l><l>0</l><block var="server URL or API key"/><block var="process b64 json"/><block var="process error"/></custom-block></block></script></block></script></block-definition><block-definition s="Ask DALLE-2 to create %&apos;n&apos; costumes described as %&apos;description&apos; with size %&apos;size&apos; with key %&apos;API key&apos; $nl and pass b64 json to %&apos;process b64 json&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="262.77777777777777" collapsed="true">Reports a list of costumes that match &apos;description&apos;</comment><header></header><code></code><translations></translations><inputs><input type="%n">1</input><input type="%txt"></input><input type="%n" readonly="true">256<options>256&#xD;512&#xD;1024</options></input><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block></list></block><block s="reportVariadicGreaterThan"><list><l></l><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></list></block><script><block s="doReport"><block s="reportJoinWords"><list><l>Snap! will not create costumes bigger than the stage. </l><block var="size"/><l> is greater than the stage </l><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block><l>x</l><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></block></script></block><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><custom-block s="number of images %n"><block var="n"/></custom-block><l>,</l><custom-block s="size of images %txt"><block s="reportJoinWords"><list><block var="size"/><l>x</l><block var="size"/></list></block></custom-block><l>,</l><custom-block s="costume or url of image response %txt"><l>costume</l></custom-block><l>,</l><custom-block s="prompt %txt"><custom-block s="sanitize prompt %txt"><block var="description"/></custom-block></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.openai.com/v1/images/generations</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="API key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><block s="doIfElse"><block s="reportVariadicGreaterThan"><list><block s="reportStringSize"><block var="response string"/></block><l>0</l></list></block><script><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block><custom-block s="let %upvar be %s"><l>error</l><custom-block s="lookup value of %txt in %l"><l>error</l><block var="response"/></custom-block></custom-block><block s="doIf"><block s="reportIsA"><block var="error"/><l><option>list</option></l></block><script><custom-block s="let %upvar be %s"><l>error message</l><custom-block s="lookup value of %txt in %l"><l>message</l><block var="error"/></custom-block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block><custom-block s="let %upvar be %s"><l>data</l><custom-block s="lookup value of %txt in %l"><l>data</l><block var="response"/></custom-block></custom-block><custom-block s="let %upvar be %s"><l>counter</l><l>0</l></custom-block><custom-block s="let %upvar be %s"><l>next number</l><block s="reifyScript"><script><block s="doChangeVar"><l>counter</l><l>1</l></block><block s="doReport"><block var="counter"/></block></script><list></list></block></custom-block><block s="doReport"><block s="reportMap"><block s="reifyReporter"><script><custom-block s="let %upvar be %s"><l>b64 json</l><custom-block s="lookup value of %txt in %l"><l>b64_json</l><l/></custom-block></custom-block><block s="doIf"><block s="reportIsA"><block var="process b64 json"/><l><option>command</option></l></block><script><block s="doRun"><block var="process b64 json"/><list><block var="b64 json"/></list></block></script></block><block s="doReport"><custom-block s="a costume from b64_json %txt with width %n with height %n named %txt"><block var="b64 json"/><block var="size"/><block var="size"/><block s="reportJoinWords"><list><block var="description"/><l> </l><block s="evaluate"><block var="next number"/><list></list></block></list></block></custom-block></block></script><list></list></block><block var="data"/></block></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><l>No response from api.openai.com to generate images</l></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script></block-definition><block-definition s="number of images %&apos;n&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="313.5714285714285" collapsed="false">The number of images to generate. Must be between 1 and 10.&#xD;&#xD;Details at&#xD;https://beta.openai.com/docs/api-reference/images/create</comment><header></header><code></code><translations></translations><inputs><input type="%n">2</input></inputs><script><block s="doIf"><block s="reportVariadicGreaterThan"><list><block var="n"/><l>10</l></list></block><script><block s="bubble"><l>Number of images from DALLE cannot exceed 10. Generating 10.</l></block></script></block><block s="doReport"><block s="reportJoinWords"><list><l>"n": </l><block s="reportVariadicMin"><list><block var="n"/><l>10</l></list></block></list></block></block></script></block-definition><block-definition s="size of images %&apos;size&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="313.5714285714285" collapsed="false">The size of the generated images. Must be one of &#xD;256x256, 512x512, or 1024x1024.&#xD;Generation of smaller images is faster and slightly cheaper.&#xD;&#xD;Details at&#xD;https://beta.openai.com/docs/api-reference/images/create</comment><header></header><code></code><translations></translations><inputs><input type="%txt">1024x1024<options>256x256&#xD;512x512&#xD;1024x1024</options></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"size": "</l><block var="size"/><l>"</l></list></block></block></script></block-definition><block-definition s="costume or url of image response %&apos;format&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="313.5714285714285" collapsed="false">Controls whether costumes or urls to generated images is desired.&#xD;&#xD;Details at&#xD;https://beta.openai.com/docs/api-reference/images/create</comment><header></header><code></code><translations></translations><inputs><input type="%txt">costume<options>costume&#xD;url</options></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"response_format": </l><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="format"/><l>costume</l></list></block><l>"b64_json"</l><l>"url"</l></block></list></block></block></script></block-definition><block-definition s="prompt %&apos;prompt&apos;" type="reporter" category="OpenAI"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"prompt": </l><block s="reportIfElse"><block s="reportIsA"><block var="prompt"/><l><option>text</option></l></block><block s="reportJoinWords"><list><l>"</l><block var="prompt"/><l>"</l></list></block><block s="reportListAttribute"><l><option>json</option></l><block var="prompt"/></block></block></list></block></block></script></block-definition><block-definition s="a costume from b64_json %&apos;data&apos; with width %&apos;width&apos; with height %&apos;height&apos; named %&apos;name&apos;" type="reporter" category="looks"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>costume</l><block s="reportBoolean"><l><bool>false</bool></l></block></custom-block><custom-block s="When a costume from b64_json %txt with width %n with height %n named %s with format %txt is created then %cs"><block var="data"/><block var="width"/><block var="height"/><block var="name"/><l>png</l><script><block s="doSetVar"><l>costume</l><l></l></block></script></custom-block><block s="doWaitUntil"><block s="reportVariadicNotEquals"><list><block var="costume"/><block s="reportBoolean"><l><bool>false</bool></l></block></list></block></block><block s="doReport"><block var="costume"/></block></script></block-definition><block-definition s="When a costume from b64_json %&apos;data&apos; with width %&apos;width&apos; with height %&apos;height&apos; named %&apos;name&apos; with format %&apos;format&apos; is created then %&apos;process costume&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%s"></input><input type="%txt">png</input><input type="%cs"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>create_costume_from_b64_json</l><list><block var="data"/><block var="format"/><block var="width"/><block var="height"/><block var="name"/><block var="process costume"/></list></custom-block></script></block-definition><block-definition s="Create a costume described as %&apos;description&apos; $nl with size %&apos;size&apos; with guidance %&apos;guidance&apos; with seed %&apos;seed&apos; $nl using this server %&apos;URL&apos; $nl and pass b64 json to process %&apos;process b64 json&apos; $nl but if there is an error %&apos;process error&apos;" type="reporter" category="looks"><comment x="0" y="0" w="257.5" collapsed="false">Uses the server running at &apos;URL&apos; to create a costume that matches the &apos;description&apos;. The costume will be size by size. &apos;size&apos; should be a multiple of 256 and at least 512. Large size may result in an out of memory error. &apos;Guidance&apos; determines how much it should match the &apos;description&apos;. A high value indicates the costume should match well even if at reduced quality or variety. The &apos;seed&apos; if non-zero makes the generation repeatable. Otherwise each time a new costume will be created.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n">512</input><input type="%n">10</input><input type="%n">0</input><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block></list></block><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></list></block><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>Snap! will not create costumes bigger than the stage. Size is </l><block var="size"/><l> is greater than the stage </l><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block><l>x</l><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></custom-block><block s="show"></block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicLessThan"><list><block var="size"/><l>512</l></list></block><block s="reportVariadicNotEquals"><list><block s="reportModulus"><block var="size"/><l>256</l></block><l>0</l></list></block></list></block><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>Size must be a multiple of 256 that is 512 or greater. Size is </l><block var="size"/></list></block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block><custom-block s="let %upvar be %s"><l>string respose</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><block s="reportJoinWords"><list><block var="URL"/><l>run/predict</l></list></block><block s="reportJoinWords"><list><l>{"data":["</l><block var="description"/><l>",</l><block var="size"/><l>,</l><block var="guidance"/><l>,</l><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="seed"/><l>0</l></list></block><block s="reportRandom"><l>1</l><l>99999999</l></block><block var="seed"/></block><l>]}</l></list></block><list><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicEquals"><list><block var="string respose"/><l></l></list></block><block s="reportVariadicEquals"><list><block s="reportLetter"><l>1</l><block var="string respose"/></block><l>&lt;</l></list><comment w="192.85714285714286" collapsed="true">No response or HTML response.</comment></block></list></block><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><custom-block s="multiline %mlt"><l>No reponse from&#xD;</l></custom-block><block var="URL"/><custom-block s="multiline %mlt"><l>&#xD;Make sure the server is running If not reset the &apos;server URL or OpenAI key&apos; variable.</l></custom-block></list></block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="string respose"/><l><option>json</option></l></block></custom-block><custom-block s="let %upvar be %s"><l>data</l><block s="reportIfElse"><block s="reportIsA"><block var="response"/><l><option>list</option></l></block><custom-block s="lookup value of %txt in %l"><l>data</l><block var="response"/></custom-block><block var="response"/></block></custom-block><block s="doIfElse"><block s="reportIsA"><block var="data"/><l><option>list</option></l></block><script><block s="doRun"><block var="process b64 json"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><block s="doReport"><custom-block s="a costume from b64_json %txt with width %n with height %n named %txt"><block s="reportListItem"><l>1</l><block var="data"/></block><block var="size"/><block var="size"/><block var="description"/></custom-block></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><custom-block s="lookup value of %txt in %l"><l>error</l><block var="temp"/></custom-block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script></block-definition><block-definition s="Stable diffusion URL" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doAsk"><l>To use Stable Diffusion you need a server URL. If you have one enter it. Otherwise enter a blank answer.</l></block><block s="doIfElse"><block s="reportVariadicEquals"><list><custom-block s="substring of %txt from position %n to position %n inclusive"><block s="getLastAnswer"></block><l>1</l><l>4</l></custom-block><l>http</l></list></block><script><block s="doReport"><block s="getLastAnswer"></block></block></script><script><block s="doAsk"><block s="reportNewList"><list><l>I&apos;m ready to see a web page explaining how to create a free server.</l></list></block></block><custom-block s="Open web page %txt"><l>https://docs.google.com/document/d/1pGfLeO5OjbJeXx-NkpQUWBJR-9mTJufcPNRokdM2Gg0/edit?usp=sharing</l></custom-block><block s="doAsk"><block s="reportNewList"><list><l>Server is ready</l></list></block></block><block s="doReport"><custom-block s="Stable diffusion URL"></custom-block></block></script></block></script></block-definition><block-definition s="substring of %&apos;str&apos; from position %&apos;start&apos; to position %&apos;end&apos; inclusive" type="reporter" category="operators"><comment x="0" y="0" w="297.3333333333333" collapsed="false">Reports the portion of the first input (string) starting at the position given by the second input (counting from 1, like LETTER n OF) and ending at the position given by the third input (also counting from 1).  If the third input is empty, reports the portion from the first position to the end of the string.&#xD;If a position number is negative, counts from the end backward, so -1 is the last character, -2 is the next to last, etc.</comment><header></header><code></code><translations>pt:o texto de _ entre as posições _ e _ , inclusive&#xD;</translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><block s="reportLetter"><block s="reportNumbers"><block var="start"/><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="end"/><l>0</l></list></block><block s="reportStringSize"><block var="str"/></block><block var="end"/></block></block><block var="str"/></block></block></block></script></block-definition><block-definition s="maximum number of tokens %&apos;max&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="337.85714285714295" collapsed="false">The maximum number of tokens to generate in the completion.&#xD;&#xD;The token count of your prompt plus max_tokens cannot exceed the model&apos;s context length. Most models have a context length of 2048 tokens.</comment><header></header><code></code><translations></translations><inputs><input type="%n">16</input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"max_tokens": </l><block var="max"/></list></block></block></script></block-definition><block-definition s="complete %&apos;prompt&apos; using GPT-3 engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="377.1428571428571" collapsed="false">Ask the specified GPT-3 engine to complete the prompt &#xD;Input 3 must be your OpenAI API key which you can obtain from https://openai.com&#xD;For documentation on the options see &#xD;https://beta.openai.com/docs/api-reference/completions/&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">ada<options>ada&#xD;babbage&#xD;curie&#xD;davinci</options></input><input type="%txt"></input><input type="%mult%txt"></input></inputs><script><block s="doReport"><custom-block s="complete %txt using GPT-3 engine named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="engine"/><block var="api key"/><block var="options"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script><scripts><comment x="490.05509958791214" y="605.2142857142857" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompts is a list</comment></scripts></block-definition><block-definition s="complete %&apos;prompt&apos; using GPT-3 engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="377.1428571428571" collapsed="false">Ask the specified GPT-3 engine to complete the prompt &#xD;Input 3 must be your OpenAI API key which you can obtain from https://openai.com&#xD;For documentation on the options see &#xD;https://beta.openai.com/docs/api-reference/completions/&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">ada<options>ada&#xD;babbage&#xD;curie&#xD;davinci</options></input><input type="%txt"></input><input type="%mult%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><l></l></block><l>0</l></list></block><l> </l><block s="reportJoinWords"><list><l></l><l>,</l></list></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block></autolambda><list></list></block><block var="options"/></block><custom-block s="prompt %txt"><block s="reportIfElse"><block s="reportIsA"><block var="prompt"/><l><option>text</option></l></block><custom-block s="sanitize prompt %txt"><block var="prompt"/></custom-block><block s="reportMap"><block s="reifyReporter"><autolambda><custom-block s="sanitize prompt %txt"><l></l></custom-block></autolambda><list></list></block><block var="prompt"/></block></block></custom-block><l>,</l><custom-block s="model %txt"><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="engine"/><l>davinci</l></list></block><l>text-davinci-003</l><block s="reportIfElse"><block s="reportListContainsItem"><block s="reportNewList"><list><l>ada</l><l>babbage</l><l>curie</l></list></block><block var="engine"/></block><block s="reportJoinWords"><list><l>text-</l><block var="engine"/><l>-001</l></list></block><block var="engine"/></block></block></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.openai.com/v1/completions</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><block s="doIfElse"><block s="reportVariadicGreaterThan"><list><block s="reportStringSize"><block var="response string"/></block><l>0</l></list></block><script><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block></script><script><custom-block s="let %upvar be %s"><l>error message</l><l>No response from https://api.openai.com/</l></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></block></script></block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>choices</l><block var="response"/></custom-block><l><option>list</option></l></block><script><block s="doReport"><custom-block s="present choices %l"><custom-block s="lookup value of %txt in %l"><l>choices</l><block var="response"/></custom-block></custom-block><comment w="246.42857142857144" collapsed="true">Extracts the completion text from the response.</comment></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>OpenAI.com reported an error: </l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>message</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>error</l><block var="response"/></custom-block></block></custom-block></block><l> the message sent was </l><block var="message"/></list></block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script><scripts><comment x="551.3050995879121" y="500.83928571428555" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompts is a list</comment></scripts></block-definition><block-definition s="present choices %&apos;choices&apos;" type="reporter" category="OpenAI"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><custom-block s="let %upvar be %s"><l>completion or completions</l><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportListAttribute"><l><option>length</option></l><block var="choices"/></block><l>1</l></list></block><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>text</l><block s="reportListItem"><l>1</l><block var="choices"/></block></custom-block></block><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>text</l><l/></custom-block></block><custom-block s="multiline %mlt"><l>&#xD;</l></custom-block></list></block></autolambda><list></list></block><block var="choices"/></block></block></custom-block><custom-block s="let %upvar be %s"><l>log of probabilities for each choice</l><block s="reportAtomicMap"><block s="reifyReporter"><autolambda><custom-block s="lookup value of %txt in %l"><l>logprobs</l><l/></custom-block></autolambda><list></list></block><block var="choices"/></block></custom-block><block s="doIf"><block s="reportVariadicEquals"><list><block s="reportListItem"><l>1</l><block var="log of probabilities for each choice"/></block><l></l></list></block><script><block s="doReport"><block var="completion or completions"/></block></script></block><custom-block s="let %upvar be %s"><l>probabilities</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportNewList"><list><block s="reportListItem"><l>1</l><l/></block><block s="reportMonadic"><l><option>e^</option></l><block s="reportListItem"><l>2</l><l/></block></block></list></block></autolambda><list></list></block><l/></block></autolambda><list></list></block><l/></block></autolambda><list></list></block><block s="reportMap"><block s="reifyReporter"><autolambda><custom-block s="lookup value of %txt in %l"><l>top_logprobs</l><l/></custom-block></autolambda><list></list></block><block s="reportAtomicMap"><block s="reifyReporter"><autolambda><custom-block s="lookup value of %txt in %l"><l>logprobs</l><l/></custom-block></autolambda><list></list></block><block var="choices"/></block></block></block><comment w="212.14285714285717" collapsed="true">Convert log of probability to probability</comment></custom-block><block s="doReport"><block s="reportNewList"><list><block var="completion or completions"/><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportListAttribute"><l><option>length</option></l><block var="choices"/></block><l>1</l></list></block><block s="reportListItem"><l>1</l><block var="probabilities"/></block><block var="probabilities"/></block></list></block><comment w="200.71428571428572" collapsed="false">Report completion and the probabilities for each completion if more than 1. Otherwise just the probabilities of the first one.</comment></block></script></block-definition><block-definition s="edit %&apos;input&apos; using GPT-3 with instructions %&apos;instruction&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="377.1428571428571" collapsed="false">Ask the specified GPT-3 engine to edit the input. &#xD;Input 3 must be your OpenAI API key which you can obtain from https://openai.com&#xD;For documentation on the options see &#xD;https://beta.openai.com/docs/api-reference/edits/&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%txt">What dey of the wek is it?</input><input type="%txt">Fix the spelling mistakes</input><input type="%txt"></input><input type="%mult%txt"></input></inputs><script><block s="doReport"><custom-block s="edit %txt using GPT-3 with instructions %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="input"/><block var="instruction"/><block var="api key"/><block var="options"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script></block-definition><block-definition s="edit %&apos;input&apos; using GPT-3 with instructions %&apos;instruction&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="377.1428571428571" collapsed="false">Ask the specified GPT-3 engine to edit the input. &#xD;Input 3 must be your OpenAI API key which you can obtain from https://openai.com&#xD;For documentation on the options see &#xD;https://beta.openai.com/docs/api-reference/edits/&#xD;</comment><header></header><code></code><translations></translations><inputs><input type="%txt">What dey of the wek is it?</input><input type="%txt">Fix the spelling mistakes</input><input type="%txt"></input><input type="%mult%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><l></l></block><l>0</l></list></block><l> </l><block s="reportJoinWords"><list><l></l><l>,</l></list></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block></autolambda><list></list></block><block var="options"/></block><custom-block s="input %txt"><custom-block s="sanitize prompt %txt"><block var="input"/></custom-block></custom-block><l>,</l><custom-block s="instruction %txt"><custom-block s="sanitize prompt %txt"><block var="instruction"/></custom-block></custom-block><l>,</l><custom-block s="model %txt"><l>text-davinci-edit-001</l></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.openai.com/v1/edits</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>choices</l><block var="response"/></custom-block><l><option>list</option></l></block><script><block s="doReport"><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>text</l><block s="reportListItem"><l>1</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>choices</l><block var="response"/></custom-block></block></block></custom-block></block><comment w="246.42857142857144" collapsed="true">Extracts the completion text from the response.</comment></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>There was an error from OpenAI.com when editing: </l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>message</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>error</l><block var="response"/></custom-block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></block></custom-block></block><l> the message sent was </l><block var="message"/></list></block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script></block-definition><block-definition s="instruction %&apos;text&apos;" type="reporter" category="OpenAI"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"instruction": "</l><block var="text"/><l>"</l></list></block></block></script></block-definition><block-definition s="chat message with role %&apos;role&apos; and content %&apos;content&apos;" type="reporter" category="OpenAI"><header></header><code></code><translations></translations><inputs><input type="%txt">user<options>user&#xD;assistant&#xD;system</options></input><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>{"role":"</l><block var="role"/><l>",</l><l>"content":"</l><custom-block s="sanitize prompt %txt"><block var="content"/></custom-block><l>"}</l></list></block></block></script></block-definition><block-definition s="GPT-3 chat with messages %&apos;messages&apos; $nl with API key %&apos;api key&apos; $nl with options %&apos;options&apos;" type="reporter" category="OpenAI"><comment w="298.5714285714286" collapsed="false">Sends messages to the chat version of GPT-3.5. Documentation can be found at&#xD;https://platform.openai.com/docs/api-reference/chat/create</comment><header></header><code></code><translations></translations><inputs><input type="%mult%l"></input><input type="%txt"></input><input type="%mult%l"></input></inputs><script><block s="doReport"><custom-block s="GPT-3 chat with messages list: %l %br with API key %txt %br with options list: %l %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="messages"/><block var="api key"/><block var="options"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script></block-definition><block-definition s="GPT-3 chat with messages list: %&apos;messages&apos; $nl with API key %&apos;api key&apos; $nl with options list: %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="OpenAI"><comment w="298.5714285714286" collapsed="false">Sends messages to the chat version of GPT-3.5. Documentation can be found at&#xD;https://platform.openai.com/docs/api-reference/chat/create</comment><header></header><code></code><translations></translations><inputs><input type="%l"></input><input type="%txt"></input><input type="%l"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><l>"messages": [</l><custom-block s="commafy %l"><block var="messages"/></custom-block><l>],</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><l></l></block><l>0</l></list></block><l> </l><block s="reportJoinWords"><list><l></l><l>,</l></list></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block></autolambda><list></list></block><block var="options"/></block><custom-block s="model %txt"><l>gpt-3.5-turbo</l></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.openai.com/v1/chat/completions</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>choices</l><block var="response"/></custom-block><l><option>list</option></l></block><script><block s="doReport"><block s="reportListItem"><l>content</l><block s="reportListItem"><l>message</l><block s="reportListItem"><l>1</l><block s="reportListItem"><l>choices</l><block var="response"/></block></block></block></block><comment w="246.42857142857144" collapsed="true">Extracts the completion text from the response.</comment></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>There was an error from OpenAI.com when chatting: </l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>message</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>error</l><block var="response"/></custom-block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></block></custom-block></block><l> the messages sent were </l><block var="messages"/></list></block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script></block-definition><block-definition s="commafy %&apos;list&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportIfElse"><block s="reportListIsEmpty"><block var="list"/></block><block s="reportJoinWords"><list></list></block><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportListAttribute"><l><option>length</option></l><block var="list"/></block><l>1</l></list></block><block s="reportListItem"><l>1</l><block var="list"/></block><block s="reportJoinWords"><list><block s="reportListItem"><l>1</l><block var="list"/></block><l>,</l><custom-block s="commafy %l"><block s="reportCDR"><block var="list"/></block></custom-block></list></block></block></block></block></script></block-definition><block-definition s="Ask DALLE-2 to create %&apos;n&apos; costumes described as %&apos;description&apos; with size %&apos;size&apos; with key %&apos;API key&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="262.77777777777777" collapsed="true">Reports a list of costumes that match &apos;description&apos;</comment><header></header><code></code><translations></translations><inputs><input type="%n">1</input><input type="%txt"></input><input type="%n" readonly="true">256<options>256&#xD;512&#xD;1024</options></input><input type="%txt"></input></inputs><script><block s="doReport"><custom-block s="Ask DALLE-2 to create %n costumes described as %txt with size %n with key %txt %br and pass b64 json to %cmdRing %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="n"/><block var="description"/><block var="size"/><block var="API key"/><block s="reifyScript"><script></script><list></list></block><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block><comment w="199.2857142857143" collapsed="true">Ignore the encoding of the costume</comment></custom-block></block></script></block-definition><block-definition s="Ask DALLE-2 to create %&apos;n&apos; costumes as variations of costume %&apos;costume&apos; with size %&apos;size&apos; with key %&apos;API key&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="263.49206349206355" collapsed="false">Reports a list of costumes that are variations of &apos;costume&apos;</comment><header></header><code></code><translations></translations><inputs><input type="%n">1</input><input type="%obj"></input><input type="%n" readonly="true">256<options>256&#xD;512&#xD;1024</options></input><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>costumes</l><block s="reportBoolean"><l><bool>false</bool></l></block></custom-block><custom-block s="Ask DALLE-2 to create %n costumes as variations of costume %obj with size %n with key %txt %br and receive costumes %cmdRing %br else if there is an error %cmdRing %br and receive b64_json %cmdRing"><block var="n"/><block var="costume"/><block var="size"/><block var="API key"/><block s="reifyScript"><script><block s="doSetVar"><l>costumes</l><l></l></block></script><list></list></block><block s="reifyScript"><script><block s="doSetVar"><l>costumes</l><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block><block s="doWaitUntil"><block s="reportVariadicNotEquals"><list><block var="costumes"/><block s="reportBoolean"><l><bool>false</bool></l></block></list></block></block><block s="doReport"><block var="costumes"/></block></script></block-definition><block-definition s="Ask DALLE-2 to create %&apos;n&apos; costumes as variations of costume %&apos;costume&apos; with size %&apos;size&apos; with key %&apos;api key&apos; $nl and receive costumes %&apos;process costumes&apos; $nl else if there is an error %&apos;process error&apos; $nl and receive b64_json %&apos;process b64 json&apos;" type="command" category="OpenAI"><comment x="0" y="0" w="263.49206349206355" collapsed="false">Reports a list of costumes that are variations of &apos;costume&apos;</comment><header></header><code></code><translations></translations><inputs><input type="%n">1</input><input type="%obj"></input><input type="%n" readonly="true">256<options>256&#xD;512&#xD;1024</options></input><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block></list></block><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></list></block><script><block s="doRun"><block var="process error"/><list><block s="reportJoinWords"><list><l>Snap! will not create costumes bigger than the stage. </l><block var="size"/><l> is greater than the stage </l><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block><l>x</l><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></list></block></script></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>post_to_dalle</l><list><l>variations</l><block var="n"/><block var="size"/><block s="reportGetImageAttribute"><l><option>name</option></l><block var="costume"/></block><block var="costume"/><l>no mask</l><l>no prompt</l><block var="api key"/><block var="process error"/><block var="process costumes"/><block var="process b64 json"/></list></custom-block></script></block-definition><block-definition s="draw something" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSwitchToCostume"><l></l></block><block s="clear"></block><custom-block s="frame"><comment w="178.57142857142856" collapsed="true">To be sure the image is square</comment></custom-block><block s="up"></block><block s="setHeading"><l>0</l></block><block s="gotoXY"><l>0</l><block s="reportAttributeOf"><l><option>bottom</option></l><l>Stage</l></block></block><block s="down"></block><custom-block s="vee"></custom-block><block s="up"></block><block s="gotoXY"><l>0</l><l>0</l></block><block s="setHeading"><l>90</l></block></script><scripts><script x="255.71428571428572" y="135.29999999999987"><block s="setHeading"><l>90</l></block><block s="gotoXY"><block s="reportAttributeOf"><l><option>left</option></l><l>Stage</l></block><block s="reportDifference"><block s="reportAttributeOf"><l><option>top</option></l><l>Stage</l></block><l>30</l></block></block><block s="write"><l>Just any turtle program</l><l>18</l></block><block s="up"></block></script></scripts></block-definition><block-definition s="vee" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="turnLeft"><l>20</l></block><block s="forward"><l>25</l></block><block s="setPenColorDimension"><l><option>hue</option></l><block s="reportRandom"><l>1</l><l>100</l></block></block><block s="doRun"><block s="reportListItem"><l><option>random</option></l><block s="reportNewList"><list><block s="reifyScript"><script><custom-block s="square"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="hex"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="star"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="vee"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="vee"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="vee"></custom-block></script><list></list></block></list></block></block><list></list></block><block s="forward"><l>-25</l></block><block s="turn"><l>40</l></block><block s="forward"><l>25</l></block><block s="setPenColorDimension"><l><option>hue</option></l><block s="reportRandom"><l>1</l><l>100</l></block></block><block s="doRun"><block s="reportListItem"><l><option>random</option></l><block s="reportNewList"><list><block s="reifyScript"><script><custom-block s="square"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="hex"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="star"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="vee"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="vee"></custom-block></script><list></list></block><block s="reifyScript"><script><custom-block s="vee"></custom-block></script><list></list></block></list></block></block><list></list></block><block s="forward"><l>-25</l></block><block s="turnLeft"><l>20</l></block></script></block-definition><block-definition s="square" type="command" category="pen"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doWarp"><script><block s="doRepeat"><l>4</l><script><block s="forward"><l>10</l></block><block s="turn"><l>90</l></block></script></block></script></block></script></block-definition><block-definition s="hex" type="command" category="pen"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doWarp"><script><block s="doRepeat"><l>6</l><script><block s="forward"><l>7</l></block><block s="turn"><l>60</l></block></script></block></script></block></script></block-definition><block-definition s="star" type="command" category="pen"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doWarp"><script><block s="doRepeat"><l>5</l><script><block s="forward"><l>15</l></block><block s="turn"><l>144</l></block></script></block></script></block></script></block-definition><block-definition s="frame" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="up"></block><block s="gotoXY"><block s="reportAttributeOf"><l><option>left</option></l><l>Stage</l></block><block s="reportAttributeOf"><l><option>bottom</option></l><l>Stage</l></block></block><block s="down"></block><block s="gotoXY"><block s="reportAttributeOf"><l><option>left</option></l><l>Stage</l></block><block s="reportAttributeOf"><l><option>top</option></l><l>Stage</l></block></block><block s="gotoXY"><block s="reportAttributeOf"><l><option>right</option></l><l>Stage</l></block><block s="reportAttributeOf"><l><option>top</option></l><l>Stage</l></block></block><block s="gotoXY"><block s="reportAttributeOf"><l><option>right</option></l><l>Stage</l></block><block s="reportAttributeOf"><l><option>bottom</option></l><l>Stage</l></block></block><block s="gotoXY"><block s="reportAttributeOf"><l><option>left</option></l><l>Stage</l></block><block s="reportAttributeOf"><l><option>bottom</option></l><l>Stage</l></block></block></script></block-definition><block-definition s="Ask DALLE-2 to create %&apos;n&apos; costumes as edits of costume %&apos;costume&apos; with mask %&apos;mask costume&apos; with prompt %&apos;prompt&apos; with size %&apos;size&apos; with API key %&apos;API key&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="263.49206349206355" collapsed="false">Reports a list of costumes that are edits of &apos;costume&apos;&#xD;where transparent parts of &apos;mask costume&apos; indicate what should be edited and &apos;prompt&apos; indicates how.</comment><header></header><code></code><translations></translations><inputs><input type="%n">1</input><input type="%obj"></input><input type="%obj"></input><input type="%txt"></input><input type="%n" readonly="true">256<options>256&#xD;512&#xD;1024</options></input><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>costumes</l><block s="reportBoolean"><l><bool>false</bool></l></block></custom-block><custom-block s="Ask DALLE-2 to create %n costumes as edits of costume %obj with mask %obj with prompt %txt with size %n with API key %txt %br and receive costumes %cmdRing %br else if there is an error %cmdRing %br and receive b64_json %cmdRing"><block var="n"/><block var="costume"/><block var="mask costume"/><block var="prompt"/><block var="size"/><block var="API key"/><block s="reifyScript"><script><block s="doSetVar"><l>costumes</l><l></l></block></script><list></list></block><block s="reifyScript"><script><block s="doSetVar"><l>costumes</l><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block><block s="doWaitUntil"><block s="reportVariadicNotEquals"><list><block var="costumes"/><block s="reportBoolean"><l><bool>false</bool></l></block></list></block></block><block s="doReport"><block var="costumes"/></block></script></block-definition><block-definition s="Ask DALLE-2 to create %&apos;n&apos; costumes as edits of costume %&apos;costume&apos; with mask %&apos;mask costume&apos; with prompt %&apos;prompt&apos; with size %&apos;size&apos; with API key %&apos;API key&apos; $nl and receive costumes %&apos;process costumes&apos; $nl else if there is an error %&apos;process error&apos; $nl and receive b64_json %&apos;process b64 json&apos;" type="command" category="OpenAI"><comment x="0" y="0" w="263.49206349206355" collapsed="false">Reports a list of costumes that are edits of &apos;costume&apos;&#xD;where transparent parts of &apos;mask costume&apos; indicate what should be edited and &apos;prompt&apos; indicates how.</comment><header></header><code></code><translations></translations><inputs><input type="%n">1</input><input type="%obj"></input><input type="%obj"></input><input type="%txt"></input><input type="%n" readonly="true">256<options>256&#xD;512&#xD;1024</options></input><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block></list></block><block s="reportVariadicGreaterThan"><list><block var="size"/><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></list></block><script><block s="doRun"><block var="process error"/><list><block s="reportJoinWords"><list><l>Snap! will not create costumes bigger than the stage. </l><block var="size"/><l> is greater than the stage </l><block s="reportAttributeOf"><l><option>width</option></l><l>Stage</l></block><l>x</l><block s="reportAttributeOf"><l><option>height</option></l><l>Stage</l></block></list></block></list></block></script></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>post_to_dalle</l><list><l>edits</l><block var="n"/><block var="size"/><block s="reportGetImageAttribute"><l><option>name</option></l><block var="costume"/></block><block var="costume"/><block var="mask costume"/><block var="prompt"/><block var="API key"/><block var="process error"/><block var="process costumes"/><block var="process b64 json"/></list></custom-block></script></block-definition><block-definition s="draw something else" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSwitchToCostume"><l></l></block><block s="clear"></block><block s="setSize"><l>3</l></block><block s="doWarp"><script><custom-block s="frame"></custom-block><block s="up"></block><block s="gotoXY"><l>0</l><l>0</l></block><block s="down"></block><custom-block s="poly spiral %n %n %n %s"><l>10</l><l>71</l><l>1.05</l><l>200</l></custom-block><block s="up"></block><block s="gotoXY"><l>0</l><l>0</l></block><block s="setHeading"><l>90</l></block></script></block><block s="setSize"><l>1</l></block></script></block-definition><block-definition s="poly spiral %&apos;distance&apos; %&apos;angle&apos; %&apos;growth&apos; %&apos;maximum distance&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%s"></input></inputs><script><block s="doIf"><block s="reportVariadicLessThan"><list><block var="distance"/><block var="maximum distance"/></list></block><script><block s="forward"><block var="distance"/></block><block s="turn"><block var="angle"/></block><block s="changePenColorDimension"><l><option>hue</option></l><l>1</l></block><custom-block s="poly spiral %n %n %n %s"><block s="reportVariadicProduct"><list><block var="distance"/><block var="growth"/></list></block><block var="angle"/><block var="growth"/><block var="maximum distance"/></custom-block></script></block></script></block-definition><block-definition s="maximum number of tokens %&apos;max&apos; (J1)" type="reporter" category="Jurassic 1"><comment x="0" y="0" w="255.00000000000017" collapsed="false">The maximum number of tokens to generate per result.&#xD;Optional, default = 16.&#xD;&#xD;If no stopSequences are given, generation is stopped&#xD;after producing maxTokens.</comment><header></header><code></code><translations></translations><inputs><input type="%n">16</input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"maxTokens": </l><block var="max"/></list></block></block></script></block-definition><block-definition s="complete %&apos;prompt&apos; using Jurassic 1 engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos;" type="reporter" category="Jurassic 1"><comment w="398.5714285714288" collapsed="false">Ask the specified Jurassic 1 engine to complete the prompt with the options provided.&#xD;&#xD;Input 3 must be your OpenAI API key which you can obtain from ai21.com&#xD;For documentation on the options see https://studio.ai21.com/docs/api/</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">j1-jumbo<options>j1-jumbo&#xD;j1-grande&#xD;j1-large&#xD;j2-jumbo&#xD;j2-grande&#xD;j2-large&#xD;j2-jumbo-instruct&#xD;j2-grande-instruct</options></input><input type="%txt"></input><input type="%mult%txt"></input></inputs><script><block s="doReport"><custom-block s="complete %txt using Jurassic 1 engine named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="engine"/><block var="api key"/><block var="options"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script></block-definition><block-definition s="complete %&apos;prompt&apos; using Jurassic 1 engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="Jurassic 1"><comment w="398.5714285714288" collapsed="false">Ask the specified Jurassic 1 engine to complete the prompt with the options provided.&#xD;&#xD;Input 3 must be your OpenAI API key which you can obtain from ai21.com&#xD;For documentation on the options see https://studio.ai21.com/docs/api/</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">j1-jumbo<options>j1-jumbo&#xD;j1-grande&#xD;j1-large&#xD;j2-jumbo&#xD;j2-grande&#xD;j2-large&#xD;j2-jumbo-instruct&#xD;j2-grande-instruct</options></input><input type="%txt"></input><input type="%mult%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><l></l></block><l>0</l></list></block><l></l><block s="reportJoinWords"><list><l></l><l>,</l></list></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block></autolambda><list></list></block><block var="options"/></block><custom-block s="prompt %txt"><custom-block s="sanitize prompt %txt"><block var="prompt"/></custom-block></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><block s="reportJoinWords"><list><l>https://api.ai21.com/studio/v1/</l><block var="engine"/><l>/complete</l></list></block><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>completions</l><block var="response"/></custom-block><l><option>list</option></l></block><script><block s="doReport"><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>text</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>data</l><block s="reportListItem"><l>1</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>completions</l><block var="response"/></custom-block></block></block></custom-block></block></custom-block></block><comment w="246.42857142857144" collapsed="true">Extracts the completion text from the response.</comment></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>AI21.com reported an error: </l><block s="reportListItem"><l>2</l><block s="reportListItem"><l>1</l><block var="response"/></block></block></list></block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script></block-definition><block-definition s="temperature %&apos;temperature&apos; (Cohere)" type="reporter" category="Cohere"><comment x="0" y="0" w="284.28571428571445" collapsed="false">Modifies the distribution from which tokens are sampled.&#xD;&#xD;Min value of 0.0, max value of 5.0. A non-negative float that tunes the degree of randomness in generation. Lower temperatures mean less random generations.&#xD;&#xD;if not specified default is 0.75&#xD;&#xD;For more details see&#xD;https://docs.cohere.ai/temperature-wiki</comment><header></header><code></code><translations></translations><inputs><input type="%n">0.75</input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"temperature": </l><block var="temperature"/></list></block></block></script></block-definition><block-definition s="maximum number of tokens %&apos;max&apos; (Cohere)" type="reporter" category="Cohere"><comment x="0" y="0" w="261.4285714285716" collapsed="false">Denotes the number of tokens to predict per generation.&#xD;Defaults to 20 if not specified.&#xD;Details at&#xD;https://docs.cohere.ai/bpe-tokens-wiki</comment><header></header><code></code><translations></translations><inputs><input type="%n">16</input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"max_tokens": </l><block var="max"/></list></block></block></script></block-definition><block-definition s="complete %&apos;prompt&apos; using Cohere engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos;" type="reporter" category="Cohere"><comment x="0" y="0" w="370.7142857142857" collapsed="false">Ask the specified Cohere engine to complete the prompt &#xD;Input 3 must be your OpenAI API key which you can obtain from&#xD;https://os.cohere.ai/&#xD;For documentation on the options see &#xD;https://docs.cohere.ai/generate-reference</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">xlarge<options>small&#xD;medium&#xD;large&#xD;xlarge&#xD;command-xlarge</options></input><input type="%txt"></input><input type="%mult%txt"></input></inputs><script><block s="doReport"><custom-block s="complete %txt using Cohere engine named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="engine"/><block var="api key"/><block var="options"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script><scripts><comment x="515.0550995879121" y="578.3392857142857" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompts is a list</comment></scripts></block-definition><block-definition s="complete %&apos;prompt&apos; using Cohere engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="Cohere"><comment x="0" y="0" w="370.7142857142857" collapsed="false">Ask the specified Cohere engine to complete the prompt &#xD;Input 3 must be your OpenAI API key which you can obtain from&#xD;https://os.cohere.ai/&#xD;For documentation on the options see &#xD;https://docs.cohere.ai/generate-reference</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">xlarge<options>small&#xD;medium&#xD;large&#xD;xlarge&#xD;command-xlarge</options></input><input type="%txt"></input><input type="%mult%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><l></l></block><l>0</l></list></block><l> </l><block s="reportJoinWords"><list><l></l><l>,</l></list></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block></autolambda><list></list></block><block var="options"/></block><custom-block s="prompt %txt"><block s="reportIfElse"><block s="reportIsA"><block var="prompt"/><l><option>text</option></l></block><custom-block s="sanitize prompt %txt"><block var="prompt"/></custom-block><block s="reportMap"><block s="reifyReporter"><autolambda><custom-block s="sanitize prompt %txt"><l></l></custom-block></autolambda><list></list></block><block var="prompt"/></block></block></custom-block><l>,</l><custom-block s="model %txt"><block var="engine"/></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.cohere.ai/generate</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block><custom-block s="key: %s value: %s"><l>Cohere-version</l><l>2021-11-08</l></custom-block></list></custom-block></custom-block><block s="doIfElse"><block s="reportVariadicGreaterThan"><list><block s="reportStringSize"><block var="response string"/></block><l>0</l></list></block><script><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><l>No response from https://os.cohere.ai/</l></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>generations</l><block var="response"/></custom-block><l><option>list</option></l></block><script><custom-block s="let %upvar be %s"><l>choices</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>generations</l><block var="response"/></custom-block></block></custom-block><block s="doReport"><custom-block s="remove stop phrases from completion %txt if provided in %txt"><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportListAttribute"><l><option>length</option></l><block var="choices"/></block><l>1</l></list></block><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>text</l><block s="reportListItem"><l>1</l><block var="choices"/></block></custom-block></block><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>text</l><l/></custom-block></block><custom-block s="multiline %mlt"><l>&#xD;</l></custom-block></list></block></autolambda><list></list></block><block var="choices"/></block></block><block var="options"/></custom-block><comment w="246.42857142857144" collapsed="true">Extracts the completion text from the response.</comment></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>Cohere.ai reported an error: </l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>message</l><block var="response"/></custom-block></block><l> the message sent was </l><block var="message"/></list></block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script><scripts><comment x="508.18009958791214" y="625.8392857142857" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompts is a list</comment><comment x="508.94795673076914" y="570.3749999999999" w="176.42857142857144" collapsed="false">Cohere stops AFTER not BEFORE so&#xD;remove stop phrase if there is one.</comment></scripts></block-definition><block-definition s="remove stop phrases from completion %&apos;completion&apos; if provided in %&apos;option strings&apos;" type="reporter" category="Cohere"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><block s="doSetVar"><l>option strings</l><block s="reportKeep"><block s="reifyPredicate"><autolambda><block s="reportVariadicNotEquals"><list><block var="option string"/><l></l></list></block></autolambda><list><l>option string</l></list></block><block var="option strings"/></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block><custom-block s="let %upvar be %s"><l>options</l><block s="reportTextSplit"><block s="reportJoinWords"><list><l>{</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportJoinWords"><list><block var="option string"/><l>,</l></list></block></autolambda><list><l>option string</l></list></block><custom-block s="all but last %l"><block var="option strings"/></custom-block></block><block s="reportListItem"><l><option>last</option></l><block var="option strings"/></block><l>}</l></list></block><l><option>json</option></l></block></custom-block><custom-block s="let %upvar be %s"><l>stop options pair</l><custom-block s="$flash assoc %s %l"><l>stop_sequences</l><block var="options"/></custom-block></custom-block><block s="doReport"><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="stop options pair"/><l></l></list></block><block var="completion"/><custom-block s="remove one of %l if %txt ends with it"><block s="reportListItem"><l>2</l><block var="stop options pair"/></block><block var="completion"/></custom-block></block></block></script></block-definition><block-definition s="remove one of %&apos;strings&apos; if %&apos;text&apos; ends with it" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%l"></input><input type="%txt"></input></inputs><script><block s="doForEach"><l>string</l><block var="strings"/><script><custom-block s="let %upvar be %s"><l>ending</l><custom-block s="substring of %txt from position %n to position %n inclusive"><block var="text"/><block s="reportVariadicSum"><list><block s="reportDifference"><block s="reportStringSize"><block var="text"/></block><block s="reportStringSize"><block var="string"/></block></block><l>1</l></list></block><block s="reportStringSize"><block var="text"/></block></custom-block></custom-block><block s="doIf"><block s="reportVariadicEquals"><list><block var="ending"/><block var="string"/></list></block><script><block s="doReport"><custom-block s="substring of %txt from position %n to position %n inclusive"><block var="text"/><l>1</l><block s="reportDifference"><block s="reportStringSize"><block var="text"/></block><block s="reportStringSize"><block var="string"/></block></block></custom-block></block></script></block></script></block><block s="doReport"><block var="text"/></block></script></block-definition><block-definition s="temperature %&apos;temperature&apos; (GPT-3)" type="reporter" category="OpenAI"><comment x="0" y="0" w="367.8571428571429" collapsed="false">What sampling temperature to use. Higher values means the model will take more risks. Try 0.9 for more creative applications, and 0 (argmax sampling) for ones with a well-defined answer.&#xD;&#xD;We generally recommend altering this or top_p but not both.</comment><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"temperature":</l><custom-block s="float %n"><block var="temperature"/></custom-block></list></block></block></script></block-definition><block-definition s="float %&apos;x&apos;" type="reporter" category="Hugging Face"><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><block s="doReport"><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportRound"><block var="x"/></block><block var="x"/></list></block><block s="reportJoinWords"><list><block s="reportRound"><block var="x"/></block><l>.0</l></list></block><block var="x"/></block></block></script></block-definition><block-definition s="complete %&apos;prompt&apos; using text-generator.io engine named %&apos;engine&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="text-generator.io"><comment x="0" y="0" w="384.6428571428572" collapsed="false">text-generator.io has an OpenAI compatibility mode so this re-uses the GPT-3 scripts.&#xD;Ask the specified model to complete the prompt &#xD;Input 3 must be your text-generator.io API key which you can obtain from https://text-generator.io&#xD;For documentation on the options see &#xD;https://beta.openai.com/docs/api-reference/completions/</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">ada<options>ada&#xD;babbage&#xD;curie&#xD;davinci</options></input><input type="%txt"></input><input type="%mult%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><l></l></block><l>0</l></list></block><l> </l><block s="reportJoinWords"><list><l></l><l>,</l></list></block><comment w="126.42857142857143" collapsed="true">Ignore empty options.</comment></block></autolambda><list></list></block><block var="options"/></block><custom-block s="prompt %txt"><block s="reportIfElse"><block s="reportIsA"><block var="prompt"/><l><option>text</option></l></block><custom-block s="sanitize prompt %txt"><block var="prompt"/></custom-block><block s="reportMap"><block s="reifyReporter"><autolambda><custom-block s="sanitize prompt %txt"><l></l></custom-block></autolambda><list></list></block><block var="prompt"/></block></block></custom-block><l>,</l><custom-block s="model %txt"><block var="engine"/></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.text-generator.io/v1/completions</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>secret: </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><block s="doIfElse"><block s="reportVariadicGreaterThan"><list><block s="reportStringSize"><block var="response string"/></block><l>0</l></list></block><script><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block></script><script><block s="doRun"><block var="process error"/><list><l>No response from https://text-generator.io</l></list></block></script></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>choices</l><block var="response"/></custom-block><l><option>list</option></l></block><script><block s="doReport"><custom-block s="present choices %l"><custom-block s="lookup value of %txt in %l"><l>choices</l><block var="response"/></custom-block></custom-block><comment w="246.42857142857144" collapsed="true">Extracts the completion text from the response.</comment></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>There was an error: </l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>message</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>error</l><block var="response"/></custom-block></block></custom-block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></block><l> the message sent was </l><block var="message"/></list></block></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script><scripts><comment x="331.9300995879121" y="383.9642857142857" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompt is a list</comment></scripts></block-definition><block-definition s="language model %&apos;name&apos;" type="reporter" category="Language models"><header></header><code></code><translations></translations><inputs><input type="%txt">ada<options>ada&#xD;babbage&#xD;curie&#xD;davinci&#xD;gpt-3.5-turbo&#xD;j1-jumbo&#xD;j1-grande&#xD;j1-large&#xD;j2-jumbo&#xD;j2-grande&#xD;j2-large&#xD;j2-jumbo-instruct&#xD;j2-grande-instruct&#xD;small&#xD;medium&#xD;large&#xD;xlarge&#xD;command-xlarge</options></input></inputs><script><block s="doReport"><block var="name"/></block></script></block-definition><block-definition s="temperature %&apos;temperature&apos; for model named %&apos;model&apos;" type="reporter" category="Language models"><comment x="0" y="0" w="367.8571428571429" collapsed="false">What sampling temperature to use. Higher values means the model will take more risks. A temperature of zero will always take the most like next token (word) which is good when expecting a well-defined answer.&#xD;&apos;temperature&apos; should normally be between 0 and 1.&#xD;But OpenAI accepts values up to 2 and others up to 5.&#xD;We generally recommend altering this or top_p but not both.&#xD;More info at&#xD;https://beta.openai.com/docs/api-reference/parameter-details&#xD;https://studio.ai21.com/docs/api/#request&#xD;https://docs.cohere.ai/generate-reference#request</comment><header></header><code></code><translations></translations><inputs><input type="%n"></input><input type="%txt"><options>ada&#xD;babbage&#xD;curie&#xD;davinci&#xD;j1-jumbo&#xD;j1-large&#xD;small&#xD;medium&#xD;large&#xD;xlarge</options></input></inputs><script><custom-block s="let %upvar be %s"><l>model provider</l><custom-block s="provider of model %txt"><block var="model"/></custom-block></custom-block><block s="doReport"><block s="reportJoinWords"><list><l>"temperature":</l><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="model provider"/><l>OpenAI</l></list></block><custom-block s="float %n"><block var="temperature"/></custom-block><block var="temperature"/></block></list></block></block></script></block-definition><block-definition s="provider of model %&apos;model&apos;" type="reporter" category="Language models"><header></header><code></code><translations></translations><inputs><input type="%txt"><options>ada&#xD;babbage&#xD;curie&#xD;davinci&#xD;gpt-3.5-turbo&#xD;j1-jumbo&#xD;j1-grande&#xD;j1-large&#xD;j2-jumbo&#xD;j2-grande&#xD;j2-large&#xD;j2-jumbo-instruct&#xD;j2-grande-instruct&#xD;small&#xD;medium&#xD;large&#xD;xlarge&#xD;command-xlarge</options></input></inputs><script><block s="doReport"><block s="reportIfElse"><block s="reportVariadicOr"><list><block s="reportListContainsItem"><block s="reportNewList"><list><l>small</l><l>medium</l><l>large</l><l>xlarge</l></list></block><block var="model"/></block><block s="reportVariadicOr"><list><custom-block s="text %txt contains %txt"><block var="model"/><l>20221108</l></custom-block><custom-block s="text %txt contains %txt"><block var="model"/><l>command-xlarge</l></custom-block></list></block></list></block><l>Cohere</l><block s="reportIfElse"><block s="reportListContainsItem"><block s="reportNewList"><list><l>j1-jumbo</l><l>j1-grande</l><l>j1-large</l><l>j2-jumbo</l><l>j2-grande</l><l>j2-large</l><l>j2-jumbo-instruct</l><l>j2-grande-instruct</l></list></block><block var="model"/></block><l>AI21</l><l>OpenAI</l></block></block></block></script></block-definition><block-definition s="maximum number of tokens %&apos;max&apos; for model named %&apos;model&apos;" type="reporter" category="Language models"><comment x="0" y="0" w="349.55678013392884" collapsed="false">The maximum number of tokens to generate in the completion.&#xD;&#xD;The token count of your prompt plus max tokens cannot exceed the model&apos;s context length. Most models have a context length of 2048 tokens.&#xD;More tokens takes more time and costs more.&#xD;More info at&#xD;https://beta.openai.com/docs/api-reference/parameter-details&#xD;https://studio.ai21.com/docs/api/#request&#xD;https://docs.cohere.ai/generate-reference#request</comment><header></header><code></code><translations></translations><inputs><input type="%n">16</input><input type="%txt">GPT-3<options>ada&#xD;babbage&#xD;curie&#xD;davinci&#xD;j1-jumbo&#xD;j1-large&#xD;small&#xD;medium&#xD;large&#xD;xlarge</options></input></inputs><script><custom-block s="let %upvar be %s"><l>model provider</l><custom-block s="provider of model %txt"><block var="model"/></custom-block></custom-block><block s="doReport"><block s="reportJoinWords"><list><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="model provider"/><l>AI21</l></list></block><l>"maxTokens":</l><l>"max_tokens":</l></block><block var="max"/></list></block></block></script></block-definition><block-definition s="complete %&apos;prompt&apos; using model named %&apos;model&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos;" type="reporter" category="Language models"><comment w="285.7142857142857" collapsed="false">Completes text using any of several model providers.&#xD;For options use the ones in this &apos;Language models&apos; category.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">ada<options>ada&#xD;babbage&#xD;curie&#xD;davinci&#xD;gpt-3.5-turbo&#xD;j1-jumbo&#xD;j1-grande&#xD;j1-large&#xD;j2-jumbo&#xD;j2-grande&#xD;j2-large&#xD;j2-jumbo-instruct&#xD;j2-grande-instruct&#xD;small&#xD;medium&#xD;large&#xD;xlarge&#xD;command-xlarge</options></input><input type="%txt"></input><input type="%mult%txt"></input></inputs><script><block s="doReport"><custom-block s="complete %txt using model named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="model"/><block var="api key"/><block var="options"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script><scripts><comment x="500.05509958791214" y="615.2142857142857" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompts is a list</comment></scripts></block-definition><block-definition s="complete %&apos;prompt&apos; using model named %&apos;model&apos; with key %&apos;api key&apos; $nl with options %&apos;options&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="Language models"><comment w="285.7142857142857" collapsed="false">Completes text using any of several model providers.&#xD;For options use the ones in this &apos;Language models&apos; category.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">ada<options>ada&#xD;babbage&#xD;curie&#xD;davinci&#xD;gpt-3.5-turbo&#xD;j1-jumbo&#xD;j1-grande&#xD;j1-large&#xD;j2-jumbo&#xD;j2-grande&#xD;j2-large&#xD;j2-jumbo-instruct&#xD;j2-grande-instruct&#xD;small&#xD;medium&#xD;large&#xD;xlarge&#xD;command-xlarge</options></input><input type="%txt"></input><input type="%mult%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>model provider</l><custom-block s="provider of model %txt"><block var="model"/></custom-block></custom-block><block s="doReport"><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="model provider"/><l>OpenAI</l></list></block><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="model"/><l>gpt-3.5-turbo</l></list></block><custom-block s="GPT-3 chat with messages list: %l %br with API key %txt %br with options list: %l %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block s="reportNewList"><list><custom-block s="chat message with role %txt and content %txt"><l>user</l><block var="prompt"/></custom-block></list></block><block var="api key"/><block var="options"/><block var="process error"/><block var="process response"/></custom-block><custom-block s="complete %txt using GPT-3 engine named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="model"/><block var="api key"/><block var="options"/><block var="process error"/><block var="process response"/></custom-block></block><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="model provider"/><l>AI21</l></list></block><custom-block s="complete %txt using Jurassic 1 engine named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="model"/><block var="api key"/><block var="options"/><block var="process error"/><block var="process response"/></custom-block><custom-block s="complete %txt using Cohere engine named %txt with key %txt %br with options %mult%txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="prompt"/><block var="model"/><block var="api key"/><block var="options"/><block var="process error"/><block var="process response"/></custom-block></block></block></block></script><scripts><comment x="500.05509958791214" y="615.2142857142857" w="243.04601004464277" collapsed="false">Reports each completion in a list if more than one completion requested or prompts is a list</comment></scripts></block-definition><block-definition s="Create a costume described as %&apos;description&apos; $nl with size %&apos;size&apos; with guidance %&apos;guidance&apos; with seed %&apos;seed&apos; $nl using this server %&apos;URL&apos;" type="reporter" category="looks"><comment x="0" y="0" w="257.5" collapsed="false">Uses the server running at &apos;URL&apos; to create a costume that matches the &apos;description&apos;. The costume will be size by size. &apos;size&apos; should be a multiple of 256 and at least 512. Large size may result in an out of memory error. &apos;Guidance&apos; determines how much it should match the &apos;description&apos;. A high value indicates the costume should match well even if at reduced quality or variety. The &apos;seed&apos; if non-zero makes the generation repeatable. Otherwise each time a new costume will be created.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n">512</input><input type="%n">10</input><input type="%n">0</input><input type="%txt"></input></inputs><script><block s="doReport"><custom-block s="Create a costume described as %txt %br with size %n with guidance %n with seed %n %br using this server %txt %br and pass b64 json to process %cmdRing %br but if there is an error %cmdRing"><block var="description"/><block var="size"/><block var="guidance"/><block var="seed"/><block var="URL"/><block s="reifyScript"><script></script><list></list></block><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block></custom-block></block></script></block-definition><block-definition s="Go to word and sentence embedding blocks" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSwitchToScene"><l>word embeddings</l><list></list></block></script></block-definition><block-definition s="Go to question answering blocks" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSwitchToScene"><l>question answering</l><list></list></block></script></block-definition><block-definition s="Answer question %&apos;question&apos; using this passage %&apos;passage&apos;" type="reporter" category="Language"><comment x="0" y="0" w="161.42857142857144" collapsed="false">Reports the top answer to the &apos;question&apos; using the &apos;passage&apos;.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>answers</l><custom-block s="Get up to 5 answers to question %txt from passage %txt"><block var="question"/><block var="passage"/></custom-block></custom-block><block s="doIfElse"><block s="reportListIsEmpty"><block var="answers"/></block><script><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script><script><block s="doReport"><block s="reportListItem"><l>1</l><block s="reportListItem"><l>1</l><block var="answers"/></block></block></block></script></block></script></block-definition><block-definition s="Wikipedia summary of covid-19 from 6 April 2020" type="reporter" category="Language"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><l>The 2019–20 coronavirus pandemic is an ongoing pandemic of coronavirus disease 2019 (COVID-19), caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2). The outbreak was first noted in Wuhan, Hubei province, China, in December 2019. The World Health Organization (WHO) declared the outbreak to be a Public Health Emergency of International Concern on 30 January 2020 and recognized it as a pandemic on 11 March 2020. As of 6 April 2020, more than 1,270,000 cases of COVID-19 have been reported in over 200 countries and territories, resulting in approximately 69,400 deaths. More than 260,000 people have recovered.&#xD;&#xD;The virus is mainly spread during close contact, and by small droplets produced during coughing, sneezing, or talking. These small droplets may also be produced during breathing, but rapidly fall to the ground or surfaces and are not generally spread through the air over large distances. People may also catch COVID-19 by touching a contaminated surface and then their face. The virus can survive on surfaces for up to 72 hours. It is most contagious during the first 3 days after symptom onset, although spread may be possible before symptoms appear and in later stages of the disease. The time between exposure and symptom onset is typically around five days, but may range from 2 to 14 days. Common symptoms include fever, cough, and shortness of breath. Complications may include pneumonia and acute respiratory distress syndrome. There is no known vaccine or specific antiviral treatment. Primary treatment is symptomatic and supportive therapy. Recommended preventive measures include hand washing, covering one&apos;s mouth when coughing, maintaining distance from other people, and monitoring and self-isolation for people who suspect they are infected.&#xD;&#xD;Efforts to prevent the virus spread include travel restrictions, quarantines, curfews, workplace hazard controls, event postponements and cancellations, and facility closures. These include national or regional quarantines throughout the world (starting with the quarantine of Hubei), curfew measures in mainland China, various border closures or incoming passenger restrictions, screening at airports and train stations, and outgoing passenger travel bans.&#xD;&#xD;The pandemic has led to severe global socioeconomic disruption, the postponement or cancellation of sporting, religious, and cultural events, and widespread fears of supply shortages resulting in panic buying. Schools and universities have closed either on a nationwide or local basis in more than 160 countries, affecting approximately 97 percent of the world&apos;s student population. Misinformation about the virus has spread online, and there have been incidents of xenophobia and discrimination against Chinese people, other people of East and Southeast Asian descent and appearance, and others from hotspots.&#xD;&#xD;</l></block></script></block-definition><block-definition s="Get up to 5 answers to question %&apos;question&apos; from passage %&apos;passage&apos;" type="reporter" category="Language"><comment x="0" y="0" w="253.57142857142864" collapsed="false">Reports a list of 5 elements where each element is a list of an answer to the &apos;question&apos; and its score of how good an answer it is. The highest scoring answer is first.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>result</l></list></block><block s="doSetVar"><l>result</l><block s="reportBoolean"><l><bool>false</bool></l></block></block><custom-block s="Answer %txt from %txt %br process answers with %cmdRing %br and if there is error %cmdRing"><block var="question"/><block var="passage"/><block s="reifyScript"><script><block s="doSetVar"><l>result</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportNewList"><list><block s="reportListItem"><l>2</l><block s="reportListItem"><l>1</l><block var="answer"/></block></block><block s="reportListItem"><l>2</l><block s="reportListItem"><l>2</l><block var="answer"/></block></block></list></block></autolambda><list><l>answer</l></list></block><block var="answers"/><comment w="238.57142857142864" collapsed="false">Only report the answers and scores. Not the position of the &apos;passage&apos; that the answer is based upon.</comment></block></block></script><list><l>answers</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><l></l><l>Answering question from passage</l></custom-block></script><list></list></block></custom-block><block s="doWaitUntil"><block var="result"/></block><block s="doReport"><block var="result"/></block></script></block-definition><block-definition s="inform %&apos;message&apos; with title %&apos;title&apos;" type="command" category="other"><comment x="0" y="0" w="217.14285714285717" collapsed="false">Will display &apos;message&apos; in a dialog box with &apos;title&apos;. User needs to click &apos;OK&apos; to remove it.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>inform</l><list><block var="title"/><block var="message"/></list></custom-block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><custom-block s="load eCraft2Learn"></custom-block><block s="doApplyExtension"><l>e2l_run(command_name, parameters)</l><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition><block-definition s="load eCraft2Learn" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>https://ecraft2learn.github.io/ai/ecraft2learn.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>https://ecraft2learn.github.io/ai/js/ecraft2learn_snap_extension.js</l></list></block></script></block-definition><block-definition s="Answer %&apos;question&apos; from %&apos;passage&apos; $nl process answers with %&apos;answers receiver&apos; $nl and if there is error %&apos;handle error&apos;" type="command" category="Language"><comment x="0" y="0" w="191.42857142857144" collapsed="false">Uses &apos;passage&apos; to answer &apos;question&apos;.&#xD;The &apos;answer question&apos; reporter is easier to use and relies upon this block.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="Load eCraft2Learn library"></custom-block><custom-block s="load tensorflow"></custom-block><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>answer_question</l><list><block var="question"/><block var="passage"/><block var="answers receiver"/><block var="handle error"/></list></custom-block></block></script><scripts><comment x="37.85714285714286" y="158.71428571428572" w="509.4105747767857" collapsed="false">This uses BERT to answer questions.&#xD;See https://blog.tensorflow.org/2020/03/exploring-helpful-uses-for-bert-in-your-browser-tensorflow-js.html</comment></scripts></block-definition><block-definition s="call eCraft2Learn reporter %&apos;reporter name&apos; with %&apos;inputs&apos;" type="reporter" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><custom-block s="load eCraft2Learn"></custom-block><block s="doReport"><block s="reportApplyExtension"><l>e2l_call(reporter_name, parameters)</l><list><block var="reporter name"/><block var="inputs"/></list></block></block></script></block-definition><block-definition s="load tensorflow" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doDeclareVariables"><list><l>loaded</l></list></block><block s="doSetVar"><l>loaded</l><block s="reportBoolean"><l><bool>false</bool></l></block></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>load_tensorflow</l><list><block s="reifyScript"><script><block s="doSetVar"><l>loaded</l><block s="reportBoolean"><l><bool>true</bool></l></block></block></script><list></list></block></list></custom-block><block s="doWaitUntil"><block var="loaded"/></block></script></block-definition><block-definition s="Load eCraft2Learn library" type="command" category="other"><comment x="0" y="0" w="238.57142857142864" collapsed="false">No longer needed in Snap! 7+ but retained to avoid error from blocks that expect it.</comment><header></header><code></code><translations></translations><inputs></inputs></block-definition><block-definition s="get API key of %&apos;service provider&apos; and explain %&apos;explain flag&apos; and ask %&apos;ask flag&apos;" type="reporter" category="Language models"><header></header><code></code><translations></translations><inputs><input type="%txt">OpenAI<options>OpenAI&#xD;AI21&#xD;Cohere&#xD;Hugging Face</options></input><input type="%b">true</input><input type="%b">true</input></inputs><script><block s="doIf"><block s="reportIsA"><block s="reportApplyExtension"><l>db_get(key)</l><list><block var="service provider"/></list></block><l><option>text</option></l></block><script><block s="doReport"><block s="reportApplyExtension"><l>db_get(key)</l><list><block var="service provider"/></list></block></block></script></block><block s="doIf"><block s="reportIsA"><block var="API keys"/><l><option>number</option></l></block><script><block s="doSetVar"><l>API keys</l><block s="reportNewList"><list></list></block></block></script></block><block s="doIf"><block s="reportVariadicAnd"><list><block s="reportIsA"><custom-block s="$flash assoc %s %l"><block var="service provider"/><block var="API keys"/></custom-block><l><option>list</option></l></block><block s="reportVariadicGreaterThan"><list><block s="reportStringSize"><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><block var="service provider"/><block var="API keys"/></custom-block></block></block><l>1</l></list></block></list></block><script><block s="doReport"><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><block var="service provider"/><block var="API keys"/></custom-block></block></block></script></block><block s="doIf"><block var="explain flag"/><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>You need to have an API key from </l><block var="service provider"/><l> to run this.</l><l>Your key should be kept secret and not shared. </l><l>We recommend you read the scripts of this project to be sure your keys will be safe. </l><l>You can get a key from </l><block s="reportIfElse"><block s="reportVariadicEquals"><list><block var="service provider"/><l>Cohere</l></list></block><l>cohere.ai</l><block s="reportJoinWords"><list><block var="service provider"/><l>.com</l></list></block></block></list></block></custom-block><block s="bubble"><block var="message"/></block><block s="doSetVar"><l>message</l><custom-block s="multiline %mlt"><l>We can store your key in the browser&apos;s local storage.&#xD;We recommend this only if you are the only user of this computer.</l></custom-block></block><block s="bubble"><block var="message"/></block></script></block><block s="doIfElse"><block var="ask flag"/><script><block s="doAsk"><block s="reportJoinWords"><list><l>Enter your </l><block var="service provider"/><l> key or just press enter if this is a shared computer</l></list></block></block><block s="doIfElse"><block s="reportVariadicEquals"><list><block s="reportStringSize"><block s="getLastAnswer"></block></block><l>0</l></list></block><script><block s="doAsk"><l>OK.Now it is safe to enter your key. It will not be stored.</l></block><block s="doAddToList"><block s="reportNewList"><list><block var="service provider"/><block s="getLastAnswer"></block></list></block><block var="API keys"/></block></script><script><block s="doApplyExtension"><l>db_store(key, val)</l><list><block var="service provider"/><block s="getLastAnswer"></block></list></block></script></block><block s="doReport"><block s="getLastAnswer"></block></block></script><script><block s="doReport"><l></l></block></script></block></script></block-definition><block-definition s="$flash assoc %&apos;key&apos; %&apos;a-list&apos;" type="reporter" category="lists"><comment x="0" y="0" w="289.3333333333333" collapsed="false">The second input is an &quot;association list,&quot; a list of two-item lists.  Each of those smaller lists has a &quot;key&quot; as its first item and a &quot;value&quot; as its second.  ASSOC reports the first key-value pair in the association list whose key matches the first input.</comment><header></header><code></code><translations>ca:associació _ _&#xD;</translations><inputs><input type="%s"></input><input type="%l"></input></inputs><script><block s="doReport"><block s="reportAtomicFindFirst"><block s="reifyPredicate"><autolambda><block s="reportVariadicEquals"><list><block var="key"/><block s="reportListItem"><l>1</l><l/></block></list></block></autolambda><list></list></block><block var="a-list"/></block></block></script></block-definition><block-definition s="multiline %&apos;text&apos;" type="reporter" category="operators"><header></header><code></code><translations>pt:o texto multilinha _&#xD;ca:multilínia _&#xD;</translations><inputs><input type="%mlt"></input></inputs><script><block s="doReport"><block var="text"/></block></script></block-definition><block-definition s="let %&apos;var&apos; be %&apos;value&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%upvar"></input><input type="%s"></input></inputs><script><block s="doSetVar"><l>var</l><block var="value"/></block></script></block-definition><block-definition s="get features of %&apos;text&apos; from model %&apos;model name&apos; with API key %&apos;api key&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="361.42857142857144" collapsed="false">Reports a list of 1536 numbers that captures some of the meaning of the &apos;text&apos;. For more details see&#xD;https://platform.openai.com/docs/guides/embeddings/what-are-embeddings</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">text-embedding-ada-002</input><input type="%txt"></input></inputs><script><block s="doReport"><custom-block s="get featrues of %txt from model %txt with API key %txt %br but if there is an error %cmdRing %br and process the complete response with %cmdRing"><block var="text"/><block var="model name"/><block var="api key"/><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></block></script></block-definition><block-definition s="get featrues of %&apos;text&apos; from model %&apos;model name&apos; with API key %&apos;api key&apos; $nl but if there is an error %&apos;process error&apos; $nl and process the complete response with %&apos;process response&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="361.42857142857144" collapsed="false">Reports a list of 1536 numbers that captures some of the meaning of the &apos;text&apos;. For more details see&#xD;https://platform.openai.com/docs/guides/embeddings/what-are-embeddings</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt">text-embedding-ada-002</input><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="let %upvar be %s"><l>message</l><block s="reportJoinWords"><list><l>{</l><custom-block s="input %txt"><custom-block s="sanitize prompt %txt"><block var="text"/></custom-block></custom-block><l>,</l><custom-block s="model %txt"><block var="model name"/></custom-block><l>}</l></list></block></custom-block><custom-block s="let %upvar be %s"><l>response string</l><custom-block s="%s url: %s send: %s headers: %mult%l"><l>POST</l><l>https://api.openai.com/v1/embeddings</l><block var="message"/><list><custom-block s="key: %s value: %s"><l>Authorization</l><block s="reportJoinWords"><list><l>Bearer </l><block var="api key"/></list></block></custom-block><custom-block s="key: %s value: %s"><l>Content-Type</l><l>application/json</l></custom-block></list></custom-block></custom-block><block s="doIfElse"><block s="reportVariadicGreaterThan"><list><block s="reportStringSize"><block var="response string"/></block><l>0</l></list></block><script><custom-block s="let %upvar be %s"><l>response</l><block s="reportTextSplit"><block var="response string"/><l><option>json</option></l></block></custom-block></script><script><custom-block s="let %upvar be %s"><l>error message</l><l>No response from https://api.openai.com/</l></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block><block s="doRun"><block var="process response"/><list><block var="response"/></list></block><block s="doIfElse"><block s="reportIsA"><custom-block s="$flash assoc %s %l"><l>data</l><block var="response"/></custom-block><l><option>list</option></l></block><script><block s="doReport"><block s="reportListItem"><l>2</l><block s="reportListItem"><l>3</l><block s="reportListItem"><l>1</l><block s="reportListItem"><l>data</l><block var="response"/></block></block></block></block></block></script><script><custom-block s="let %upvar be %s"><l>error message</l><block s="reportJoinWords"><list><l>OpenAI.com reported an error: </l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>message</l><block s="reportListItem"><l>2</l><custom-block s="$flash assoc %s %l"><l>error</l><block var="response"/></custom-block></block></custom-block></block><l> the message sent was </l><block var="message"/></list></block><comment w="245.71428571428572" collapsed="true">Extracts the error message from the response.</comment></custom-block><block s="doRun"><block var="process error"/><list><block var="error message"/></list></block><block s="doReport"><block var="error message"/></block></script></block></script></block-definition><block-definition s="sanitize prompt %&apos;prompt&apos;" type="reporter" category="OpenAI"><comment x="0" y="0" w="279.2857142857143" collapsed="false">Makes the prompt safe to use within a JSON message</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doWarp"><script><block s="doReport"><custom-block s="remove trailing while space from %txt"><block s="reportJoinWords"><list><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportUnicode"><l></l></block><l>39</l></list></block><block s="reportUnicodeAsLetter"><l>8217</l></block><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportUnicode"><l></l></block><l>34</l></list></block><block s="reportUnicodeAsLetter"><l>8220</l></block><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportUnicode"><l></l></block><l>10</l></list></block><l>\n</l><block s="reportIfElse"><block s="reportVariadicEquals"><list><block s="reportUnicode"><l></l></block><l>13</l></list></block><l> </l><l></l></block></block></block></block></autolambda><list></list></block><block s="reportTextSplit"><block var="prompt"/><l><option>letter</option></l></block><comment w="184.2857142857143" collapsed="false">Replaces &apos; with ’, &quot; with “, new lines with spaces, and removes trailing spaces.</comment></block></list></block></custom-block></block></script></block></script></block-definition><block-definition s="remove trailing while space from %&apos;text&apos;" type="reporter" category="variables"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>letters</l><block s="reportTextSplit"><block var="text"/><l><option>letter</option></l></block></custom-block><block s="doUntil"><block s="reportVariadicNotEquals"><list><l> </l><block s="reportListItem"><l><option>last</option></l><block var="letters"/></block></list></block><script><block s="doSetVar"><l>letters</l><block s="reportListItem"><block s="reportNumbers"><l>1</l><block s="reportDifference"><block s="reportListAttribute"><l><option>length</option></l><block var="letters"/></block><l>1</l></block></block><block var="letters"/></block></block></script></block><block s="doReport"><block s="reportJoinWords"><list><block var="letters"/></list></block></block></script></block-definition><block-definition s="input %&apos;text&apos;" type="reporter" category="OpenAI"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"input": "</l><block var="text"/><l>"</l></list></block></block></script></block-definition><block-definition s="model %&apos;name&apos;" type="reporter" category="OpenAI"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doReport"><block s="reportJoinWords"><list><l>"model": "</l><block var="name"/><l>"</l></list></block></block></script></block-definition><block-definition s="key: %&apos;key&apos; value: %&apos;value&apos;" type="reporter" category="operators"><header></header><code></code><translations>pt:um par (chave: _ , valor: _ )&#xD;</translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><block s="reportNewList"><list><block var="key"/><block var="value"/></list></block></block></script></block-definition><block-definition s="%&apos;method&apos; url: %&apos;url&apos; send: %&apos;payload&apos; headers: %&apos;headers&apos;" type="reporter" category="sensing"><header></header><code></code><translations>pt:a resposta a _ de _ enviando _ e cabeçalhos _&#xD;</translations><inputs><input type="%s" readonly="true">GET<options>GET&#xD;POST&#xD;PUT&#xD;DELETE</options></input><input type="%s">https://snap.berkeley.edu</input><input type="%s"></input><input type="%mult%l" readonly="true"></input></inputs><script><block s="doReport"><block s="reportApplyExtension"><l>xhr_request(mth, url, dta, hdrs)</l><list><block var="method"/><block var="url"/><block var="payload"/><block var="headers"/></list></block></block></script></block-definition><block-definition s="Go back to main NLP area" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSwitchToScene"><l>words</l><list></list></block></script></block-definition></blocks>