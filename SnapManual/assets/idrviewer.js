/*! IDRViewer - v1.15.0 | Copyright 2022 IDRsolutions */
!function(){"use strict";var g,m,h,v,L={LAYOUT_PRESENTATION:"presentation",LAYOUT_MAGAZINE:"magazine",LAYOUT_CONTINUOUS:"continuous",SELECT_SELECT:"select",SELECT_PAN:"pan",ZOOM_SPECIFIC:"specific",ZOOM_ACTUALSIZE:"actualsize",ZOOM_FITWIDTH:"fitwidth",ZOOM_FITHEIGHT:"fitheight",ZOOM_FITPAGE:"fitpage",ZOOM_AUTO:"auto"},p=1,E=0,O=[],T=10,r=!1;L.setup=function(e){e=e||IDRViewer.config,r=!0,v=e.bounds,E=e.pagecount,(p<1||E<p)&&(p=1),m=document.getElementById("idrviewer");var t=document.createElement("div");t.style.position="relative",t.style.display="inline-block",t.style.verticalAlign="middle",t.style.minWidth="100%",t.style.lineHeight="normal",m.appendChild(t),(g=document.createElement("div")).id="contentContainer",g.style.overflow="hidden",g.style.transform="translateZ(0)",g.style.padding="5px",t.appendChild(g);for(var n=1;n<=E;n++){var o=document.createElement("div");o.id="page"+n,o.setAttribute("style","width: "+v[n-1][0]+"px; height: "+v[n-1][1]+"px;"),o.className="page",g.appendChild(o),O[n]=o}c.setup(),A.setup(),y.setup(e.pageType,e.url),l.setup(!!e.isR2L),b.setup(),h.goToPage(p),A.setPage(p,!0);var a,i={selectMode:c.currentSelectMode,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),layout:h.toString(),availableLayouts:l.getAvailableLayouts(),isFirstPage:1===p,isLastPage:h.isLastPage(p)};for(a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);i.page=p,L.fire("ready",i)};var n,e,o,a,i,t,s,u,y=function(){var u,r,s,e={},l=!1,c=[],d="file:"===location.protocol,f="";e.setup=function(e,t){r=(s="svgz"===e)||"svg"===e,t&&(f=t),d&&!r&&console.log("Cannot load pages using AJAX over the file:// protocol. Falling back to iframes (some features may not be available).");t=document.createElement("style");t.setAttribute("type","text/css"),document.head.appendChild(t),u=t.sheet,r&&window.addEventListener("mousedown",function(e){0===e.button&&m(window)})},e.clearSelection=function(){(r?m:n)(window)};function g(e,t){var n=document.createElement("iframe");n.setAttribute("class","page-inner"),n.setAttribute("src",f+e+".html"),n.setAttribute("style","width: "+v[e-1][0]+"px; height: "+v[e-1][1]+"px; position: absolute; border: 0;"),n.onload=t,O[e].appendChild(n)}function p(e,t){var n=new XMLHttpRequest;n.open("GET",f+e+".html",!0),n.onload=function(){200<=n.status&&n.status<400?function(e,t,n){var o=document.createElement("div");o.innerHTML=e;var a=o.querySelector("#p"+t);a.style.margin="0",a.style.overflow="hidden",a.style.position="absolute";function i(){this&&this.removeEventListener("load",i),n()}e=a.querySelector("#pdf"+t),o=e.getAttribute("data")||e.getAttribute("src");o&&e.addEventListener("load",i),f&&((r=e.getAttribute("data"))?e.setAttribute("data",f+r):(r=e.getAttribute("src"))&&-1===r.indexOf("base64")&&e.setAttribute("src",f+r));var r=a.querySelector("#fonts"+t);r&&(s=r.innerHTML,r.parentNode.removeChild(r),s.match(/@font-face {[\s\S]*?}/g).forEach(function(e){-1===c.indexOf(e)&&(c.push(e),u.insertRule(e.replace('url("','url("'+f),u.cssRules.length))}));var s=a.querySelector(".shared-css");s&&(s.parentNode.removeChild(s),l||(document.head.appendChild(s),l=!0)),C.addClass(a,"page-inner"),O[t].appendChild(a),o||i()}(n.responseText,e,t):g(e,t)},n.onerror=function(){g(e,t)},n.send()}var n=function(e){try{e.getSelection?e.getSelection().empty?e.getSelection().empty():e.getSelection().removeAllRanges&&e.getSelection().removeAllRanges():e.document.selection&&e.document.selection.empty()}catch(e){}},m=function(e){try{n(e);for(var t=1;t<=E;t++)A.isVisible(t)&&n(O[t].firstChild.contentDocument)}catch(e){}};return e.show=function(e){O[e].firstChild.style.display="block"},e.hide=function(e){O[e].firstChild.style.display="none"},e.load=function(e,t){function n(){this.removeEventListener("load",n);try{this.contentDocument.addEventListener("mousedown",function(e){0===e.button&&m(window)})}catch(e){}a()}var o,a,i;r?(o=e,a=t,(i=document.createElement("object")).setAttribute("width",""+v[o-1][0]),i.setAttribute("height",""+v[o-1][1]),i.setAttribute("data",f+o+(s?".svgz":".svg")),i.setAttribute("type","image/svg+xml"),i.setAttribute("class","page-inner"),i.setAttribute("style","position: absolute"),i.addEventListener("load",n),O[o].appendChild(i)):(d?g:p)(e,t)},e.unload=function(e){O[e].removeChild(O[e].firstChild)},e}(),A=function(){var o,a,i,n={LOADING:"loading",HIDDEN:"hidden",UNLOADED:"unloaded",LOADED:"loaded"},e={},r=0,s=0,u=[];e.setup=function(){i=E;for(var e=1;e<=E;e++)u[e]=n.UNLOADED,O[e].dataset.state=n.UNLOADED};function l(e){return u[e]===n.LOADED}function c(e){return u[e]===n.LOADED||u[e]===n.HIDDEN}function d(e){u[e]===n.LOADED&&(t(e,n.HIDDEN),y.hide(e))}function f(e){u[e]===n.HIDDEN&&(t(e,n.LOADED),y.show(e)),u[e]===n.UNLOADED&&(t(e,n.LOADING),y.load(e,function(){t(e,n.LOADED),L.fire("pageload",{page:e})}))}function g(e){u[e]!==n.LOADED&&u[e]!==n.HIDDEN||(t(e,n.UNLOADED),y.unload(e),L.fire("pageunload",{page:e}))}function p(){if(f(o),r<2)for(var e=1;e<10&&(m(o-e)&&(l(o-e)||f(o-e)),2!==r)&&(m(o+e)&&(l(o+e)||f(o+e)),2!==r);e++);for(var t=1,n=E;20<s+r;)n-o<o-t?(l(t)&&d(t),t++):(l(n)&&d(n),n--);for(t=1,n=E;50<E-i;)n-o<o-t?(c(t)&&g(t),t++):(c(n)&&g(n),n--);a=setTimeout(p,500)}function m(e){return 1<=e&&e<=E}var t=function(e,t){h(u[e],t),u[e]=t,O[e].dataset.state=t},h=function(e,t){switch(e){case n.LOADING:r--;break;case n.LOADED:s--;break;case n.HIDDEN:0;break;case n.UNLOADED:i--}switch(t){case n.LOADING:r++;break;case n.LOADED:s++;break;case n.HIDDEN:0;break;case n.UNLOADED:i++}};return e.setPage=function(e,t){o=e,t&&f(e),clearTimeout(a),a=setTimeout(p,500)},e.stopLoading=function(){clearTimeout(a),a=setTimeout(p,500)},e.hide=d,e.isVisible=l,e}(),l=(o={},i=!(a=!0),(e={}).setup=function(e){i=e;for(var t=0;t<E;t++)if(v[t][0]!==v[0][0]||v[t][1]!==v[0][1]){a=!1;break}(h=o[n]||o[IDRViewer.LAYOUT_CONTINUOUS]).setup(a,i),C.addClass(m,"layout-"+h.toString()),i&&C.addClass(m,"isR2L")},e.setLayout=function(e){h.unload(),C.removeClass(m,"layout-"+h.toString()),(h=o[e]).setup(a,i),C.addClass(m,"layout-"+h.toString()),b.updateZoom(IDRViewer.ZOOM_AUTO),h.goToPage(p),L.fire("layoutchange",{layout:e})},e.addLayout=function(e,t){o[e]=t},e.setDefault=function(e){n=e},e.getAvailableLayouts=function(){return Object.keys(o)},e.updatePage=function(e){p!=e&&(p=e,A.setPage(e),L.fire("pagechange",{page:p,pagecount:E,isFirstPage:1===p,isLastPage:h.isLastPage(e)}))},e);l.addLayout(L.LAYOUT_PRESENTATION,(s={setup:function(e){t=e},unload:function(){for(var e=1;e<=E;e++)O[e].style.marginLeft="",O[e].style.marginTop="",C.removeClass(O[e],"current","prev","next","before","after");g.style.width="",g.style.height=""},goToPage:function(e){l.updatePage(e),t||b.updateZoom(),m.scrollTop=0,u(e),s.updateLayout()},getVisiblePages:function(){return[p]}},u=function(e){for(var t=1;t<=E;t++)C.removeClass(O[t],"current","prev","next","before","after"),t<e?C.addClass(O[t],"before"):e<t&&C.addClass(O[t],"after");C.addClass(O[e],"current"),1<=e-1&&C.addClass(O[e-1],"prev"),e+1<=E&&C.addClass(O[e+1],"next")},s.updateLayout=function(){var e=b.getZoom(),t=Math.floor(v[p-1][0]*e),n=0,o=m.clientWidth-T;t<o?n=(o-t)/2:o=t;var t=Math.floor(v[p-1][1]*e),a=0,e=m.clientHeight-T;t<e?a=(e-t)/2:e=t,g.style.width=o+"px",g.style.height=e+"px";for(var i=1;i<=E;i++)O[i].style.marginLeft=n+"px",O[i].style.marginTop=a+"px"},s.isLastPage=function(e){return e===E},s.getZoomBounds=function(){return{width:v[p-1][0],height:v[p-1][1]}},s.getAutoZoom=function(e,t){return Math.min(e,t)},s.next=function(){L.goToPage(p+1)},s.prev=function(){L.goToPage(p-1)},s.toString=function(){return IDRViewer.LAYOUT_PRESENTATION},s)),l.addLayout(L.LAYOUT_MAGAZINE,function(){var n,d,t={};function f(e){return 1<e&&e<E}t.setup=function(e,t){n=e,d=t},t.unload=function(){for(var e=1;e<=E;e++)O[e].style.marginLeft="",O[e].style.marginTop="",C.removeClass(O[e],"current","prev","next","before","after");g.style.width="",g.style.height=""},t.goToPage=function(e){1!==e&&e%2!=0&&--e,l.updatePage(e),n||b.updateZoom(),o(e),t.updateLayout()},t.getVisiblePages=function(){var e=[p];return f(p)&&e.push(p+1),e};var o=function(e){for(var t=1;t<=E;t++)C.removeClass(O[t],"current","prev","next","before","after");if(C.addClass(O[e],"current"),f(e)&&C.addClass(O[e+1],"current"),(e=1==e?0:e)+2<=E&&(C.addClass(O[e+2],"next"),e+3<=E&&C.addClass(O[e+3],"next")),0<e-1&&(C.addClass(O[e-1],"prev"),0<e-2&&C.addClass(O[e-2],"prev")),e+4<=E)for(t=e+4;t<=E;t++)C.addClass(O[t],"after");if(0<e-3)for(t=e-3;0<t;t--)C.addClass(O[t],"before")};return t.updateLayout=function(){var e=f(p),t=b.getZoom(),n=Math.floor(v[p-1][0]*t),o=e?Math.floor(v[p][0]*t):n,a=2*Math.max(n,o),i=Math.max(a,m.clientWidth-T),a=Math.floor(i/2),r=a,s=a;d?s-=o:r-=n;var n=Math.floor(v[p-1][1]*t),e=e?Math.floor(v[p][1]*t):n,t=Math.max(n,e,m.clientHeight-T),u=Math.floor((t-(d?e:n))/2),l=Math.floor((t-(d?n:e))/2);g.style.width=i+"px",g.style.height=t+"px",O[1].style.marginLeft=s+"px",O[1].style.marginTop=l+"px";for(var c=2;c<=E;c+=2)O[c].style.marginLeft=r+"px",O[c].style.marginTop=u+"px",c<E&&(O[c+1].style.marginLeft=s+"px",O[c+1].style.marginTop=l+"px")},t.isLastPage=function(e){return E<e+(1==e?1:2)},t.getZoomBounds=function(){var e=f(p),t=Math.floor(v[p-1][0]),n=e?Math.floor(v[p][0]):0,o=Math.floor(v[p-1][1]),e=e?Math.floor(v[p][1]):0;return{width:2*Math.max(t,n),height:Math.max(o,e)}},t.getAutoZoom=function(e,t){return Math.min(e,t)},t.next=function(){L.goToPage(p+(1==p?1:2))},t.prev=function(){L.goToPage(p-1)},t.toString=function(){return IDRViewer.LAYOUT_MAGAZINE},t}()),l.addLayout(L.LAYOUT_CONTINUOUS,function(){var t={},n=0,o=0,a=[];t.setup=function(){m.addEventListener("scroll",i);for(var e=0;e<E;e++)v[e][0]>n&&(n=v[e][0]),v[e][1]>o&&(o=v[e][1])},t.unload=function(){m.removeEventListener("scroll",i)};var i=function(){A.stopLoading(),e()},e=function(){var e;if(0<O[1].getBoundingClientRect().top)l.updatePage(1);else for(e=1;e<=E;e++){var t=O[e].getBoundingClientRect(),n=t.top,t=t.bottom-t.top;if(n<=.25*t&&.5*-t<n){l.updatePage(e);break}}r()},r=function(){a=[p];for(var t,n=m.clientHeight,e=function(e){return 0<(t=O[e].getBoundingClientRect()).bottom&&t.top<n},o=p-1;1<=o&&e(o);o--)a.push(o);for(o=p+1;o<=E&&e(o);o++)a.push(o)};return t.goToPage=function(e,t){var n=0;if(t){var o=t.split(" ");switch(o[0]){case"XYZ":n=Number(o[2]);break;case"FitH":n=Number(o[1]);break;case"FitR":n=Number(o[4]);break;case"FitBH":n=Number(o[1])}0!==(n=isNaN(n)||n<0||n>v[e-1][1]?0:n)&&(n=v[e-1][1]-n)}t=b.getZoom();m.scrollTop=O[e].offsetTop-5+n*t,l.updatePage(e),r()},t.getVisiblePages=function(){return a},t.updateLayout=function(){},t.isLastPage=function(e){return e===E},t.getZoomBounds=function(){return{width:n,height:o}},t.getAutoZoom=function(e){return t.getZoomBounds().width>m.clientWidth-T?e:1},t.next=function(){L.goToPage(p+1)},t.prev=function(){L.goToPage(p-1)},t.toString=function(){return IDRViewer.LAYOUT_CONTINUOUS},t}());var c=function(){var t,n,o,a,e={},i=!1;e.setup=function(){switch((a=document.createElement("div")).id="overlay",g.parentNode.insertBefore(a,g),o){case IDRViewer.SELECT_PAN:case IDRViewer.SELECT_SELECT:break;default:o=IDRViewer.SELECT_SELECT}this.currentSelectMode=o,this.currentSelectMode==L.SELECT_SELECT?e.enableTextSelection():e.enablePanning()},e.enableTextSelection=function(){this.currentSelectMode=L.SELECT_SELECT,C.removeClass(a,"panning"),a.removeEventListener("mousedown",r),document.removeEventListener("mouseup",s),a.removeEventListener("mousemove",u)};var r=function(e){return e=e||window.event,C.addClass(a,"mousedown"),t=e.clientX,n=e.clientY,!(i=!0)},s=function(){C.removeClass(a,"mousedown"),i=!1},u=function(e){if(i)return e=e||window.event,m.scrollLeft=m.scrollLeft+t-e.clientX,m.scrollTop=m.scrollTop+n-e.clientY,t=e.clientX,n=e.clientY,!1};return e.enablePanning=function(){this.currentSelectMode=L.SELECT_PAN,y.clearSelection(),C.addClass(a,"panning"),a.addEventListener("mousedown",r),document.addEventListener("mouseup",s),a.addEventListener("mousemove",u)},e.setDefaultMode=function(e){o=e},e}();L.setSelectMode=function(e){r?(e==L.SELECT_SELECT?c.enableTextSelection():c.enablePanning(),L.fire("selectchange",{type:e})):c.setDefaultMode(e)};var d,b=function(){var s,u,t,e={},l=L.ZOOM_AUTO,c=[.1,.25,.5,.75,1,1.25,1.5,2,2.5,3,3.5,4],i=[L.ZOOM_AUTO,L.ZOOM_FITPAGE,L.ZOOM_FITHEIGHT,L.ZOOM_FITWIDTH,L.ZOOM_ACTUALSIZE],d=0,f=1;e.setup=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),document.head.appendChild(e),u=e.sheet,window.addEventListener("resize",function(){g()}),g(t)};var g=function(e){A.stopLoading(),f=p(e);var t=!1,n=!1;c[c.length-1]<=f?(f=c[c.length-1],n=!0):f<=c[0]&&(f=c[0],t=!0);var o=m.scrollTop/m.scrollHeight;h.updateLayout();for(var a=h.getVisiblePages(),i=1;i<=E;i++)-1===a.indexOf(i)&&A.hide(i);s&&u.deleteRule(s);e=function(e,t,n,o){n=o?"translate3d("+e+"px, "+t+"px, 0) scale("+n+")":"translateX("+e+"px) translateY("+t+"px) scale("+n+")";return"-webkit-transform: "+n+";\n-ms-transform: "+n+";\ntransform: "+n+";"}(0,0,f,!1);s=u.insertRule(".page-inner { \n"+e+"\n}",u.cssRules.length);for(var r=0;r<E;r++)O[r+1].style.width=Math.floor(v[r][0]*f)+"px",O[r+1].style.height=Math.floor(v[r][1]*f)+"px";m.scrollTop=m.scrollHeight*o,++d%2==1&&g(),L.fire("zoomchange",{zoomType:l,zoomValue:f,isMinZoom:t,isMaxZoom:n})},p=function(e){var t=h.getZoomBounds(),n=(m.clientWidth-T)/t.width,o=(m.clientHeight-T)/t.height,t=parseFloat(e);switch(isNaN(t)||(f=t,e=L.ZOOM_SPECIFIC),e=e||l){case L.ZOOM_AUTO:f=h.getAutoZoom(n,o);break;case L.ZOOM_FITWIDTH:f=n;break;case L.ZOOM_FITHEIGHT:f=o;break;case L.ZOOM_FITPAGE:f=Math.min(n,o);break;case L.ZOOM_ACTUALSIZE:f=1}return l=e,f};return e.updateZoom=g,e.zoomIn=function(){g(function(){for(var e,t=f,n=c[c.length-1],o=0;o<c.length;o++)if(t<c[o]){n=c[o];break}for(o=0;o<i.length;o++){var a=p(i[o]);t<a&&a<=n&&(e&&a===n||(e=i[o],n=a))}return e||n}())},e.zoomOut=function(){g(function(){for(var e,t=f,n=c[0],o=c.length-1;0<=o;o--)if(c[o]<t){n=c[o];break}for(o=0;o<i.length;o++){var a=p(i[o]);a<t&&n<=a&&(e&&a===n||(e=i[o],n=a))}return e||n}())},e.getZoom=function(){return f},e.setDefault=function(e){t=e},e}();L.zoomIn=function(){b.zoomIn()},L.zoomOut=function(){b.zoomOut()},L.setZoom=function(e){r?b.updateZoom(e):b.setDefault(e)},L.goToPage=function(e,t){r?1<=e&&e<=E&&h.goToPage(Number(e),t):p=e},L.next=function(){h.next()},L.prev=function(){h.prev()},L.setLayout=function(e){r?l.setLayout(e):l.setDefault(e)},L.updateLayout=function(){b.updateZoom()},d={},L.on=function(e,t){d[e]||(d[e]=[]),-1===d[e].indexOf(t)&&d[e].push(t)},L.off=function(e,t){!d[e]||-1!==(t=d[e].indexOf(t))&&d[e].splice(t,1)},L.fire=function(e,t){d[e]&&d[e].forEach(function(e){e(t)})};var C={addClass:function(e,t){var n=0!==e.className.length?e.className.split(" "):[];-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" "))},removeClass:function(){for(var e=arguments[0],t=0!==e.className.length?e.className.split(" "):[],n=1;n<arguments.length;n++){var o=t.indexOf(arguments[n]);-1!==o&&t.splice(o,1)}e.className=t.join(" ")}};"function"==typeof define&&define.amd?define(["idrviewer"],[],function(){return L}):"object"==typeof module&&module.exports?module.exports=L:window.IDRViewer=L}();