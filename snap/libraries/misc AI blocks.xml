<blocks app="Snap! 7, https://snap.berkeley.edu" version="2"><palette><category name="Language" color="219,165,0,1"/></palette><block-definition s="Create costume in style %&apos;Which style&apos; from %&apos;costume&apos; $nl then %&apos;receive new costume&apos;" type="command" category="looks"><comment x="0" y="0" w="224.2857142857143" collapsed="false">Applies the selected style to the indicated custome number and adds the new costume this sprite.</comment><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true"><options>Katsushika Hokusai&apos;s Wave&#xD;Francis Picabia&apos;s Udnie&#xD;Pablo Picasso&apos;s La Muse&#xD;Mathura Style&#xD;Leonid Afremov&apos;s Rain Princess&#xD;Edvard Munch&apos;s Scream&#xD;Théodore Géricault&apos;s Raft of the Medusa&#xD;Roberto Matta</options></input><input type="%obj">1</input><input type="%cs"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>create_costume_with_style</l><list><block var="Which style"/><block var="costume"/><block var="receive new costume"/></list></custom-block></script></block-definition><block-definition s="get costume features of %&apos;costume&apos; then %&apos;receive features&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%obj"></input><input type="%cs"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>get_image_features</l><list><block var="costume"/><block var="receive features"/></list></custom-block></script></block-definition><block-definition s="read URL %&apos;URL&apos; then %&apos;receive contents&apos; or if error %&apos;receive error&apos; using an access key if needed %&apos;key&apos; in JSON format %&apos;JSON&apos;" type="command" category="sensing"><comment x="0" y="0" w="383" collapsed="false">Reads the contents of &apos;URL&apos; and then calls &apos;receive contents&apos; with that text (in HTML). If there was an error &apos;receive error&apos; is called instead. &apos;key&apos; needs only be provided if the URL requires as access key.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%txt"></input><input type="%b"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>read_url</l><list><block var="URL"/><block var="receive contents"/><block var="receive error"/><block var="key"/><block var="JSON"/></list></custom-block></script></block-definition><block-definition s="Ask Wikipedia about %&apos;search words&apos; $nl then %&apos;process response&apos; with list of matches $nl but if error %&apos;process error&apos; with error message" type="command" category="sensing"><comment x="0" y="0" w="167.14285714285717" collapsed="false">Searches Wikipedia for &apos;search words&apos; and then passes the list of results to &apos;process response&apos;.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="read URL %txt then %cmdRing or if error %cmdRing using an access key if needed %txt in JSON format %b"><block s="reportJoinWords"><list><custom-block s="Wikipedia domian"></custom-block><l>/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;exintro=&amp;explaintext=&amp;origin=*&amp;generator=prefixsearch&amp;gpssearch=</l><block var="search words"/></list></block><block s="reifyScript"><script><custom-block s="let %upvar be %s"><l>extracts</l><custom-block s="extracts in Wikipedia response %s"><block var="response"/></custom-block></custom-block><block s="doRun"><block var="process response"/><list><block var="extracts"/></list></block></script><list><l>response</l></list></block><block var="process error"/><l></l><l><bool>true</bool></l></custom-block></script></block-definition><block-definition s="extracts in Wikipedia response %&apos;Wikipedia answer&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><custom-block s="let %upvar be %s"><l>query</l><block s="reportFindFirst"><block s="reifyPredicate"><autolambda><block s="reportEquals"><block s="reportListItem"><l>1</l><l/></block><l>query</l></block></autolambda><list></list></block><block var="Wikipedia answer"/></block></custom-block><block s="doIfElse"><block var="query"/><script><block s="doReport"><block s="reportKeep"><block s="reifyPredicate"><autolambda><block s="reportGreaterThan"><block s="reportStringSize"><block var="extract"/></block><l>0</l></block></autolambda><list><l>extract</l></list></block><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportListItem"><l>2</l><block s="reportListItem"><l>5</l><block s="reportListItem"><l>2</l><l/></block></block></block></autolambda><list></list></block><block s="reportListItem"><l>2</l><block s="reportFindFirst"><block s="reifyPredicate"><autolambda><block s="reportEquals"><block s="reportListItem"><l>1</l><l/></block><l>pages</l></block></autolambda><list></list></block><block s="reportListItem"><l>2</l><block s="reportFindFirst"><block s="reifyPredicate"><autolambda><block s="reportEquals"><block s="reportListItem"><l>1</l><l/></block><l>query</l></block></autolambda><list></list></block><block var="Wikipedia answer"/></block></block></block></block></block></block></block></script><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block></script></block-definition><block-definition s="Wikipedia domian" type="reporter" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="Load eCraft2Learn library"></custom-block><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>wikipedia_domain</l><list></list></custom-block></block></script></block-definition><block-definition s="costume from camera %&apos;mirrored&apos; mirrored" type="reporter" category="looks"><comment x="0" y="0" w="207.14285714285717" collapsed="true">Reports a costume using the camera.</comment><header></header><code></code><translations></translations><inputs><input type="%b"></input></inputs><script><custom-block s="let %upvar be %s"><l>result</l><block s="reportBoolean"><l><bool>false</bool></l></block></custom-block><custom-block s="Create costume from camera %b and pass it to %cmdRing"><block var="mirrored"/><block s="reifyScript"><script><block s="doSetVar"><l>result</l><block var="costume"/></block></script><list><l>costume</l></list></block></custom-block><block s="doWaitUntil"><block s="reportIsA"><block var="result"/><l><option>costume</option></l></block></block><block s="doReport"><block var="result"/></block></script></block-definition><block-definition s="Create costume from camera %&apos;mirrored&apos; and pass it to %&apos;process costume&apos;" type="command" category="looks"><comment x="0" y="0" w="304" collapsed="false">Creates a costume from the video camera and passes it the &apos;process costume&apos; blocks.</comment><header></header><code></code><translations></translations><inputs><input type="%b"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>costume_from_camera_version_2</l><list><block var="mirrored"/><block var="process costume"/></list></custom-block></script></block-definition><block-definition s="Euclidean distance between %&apos;point 1&apos; and %&apos;point 2&apos;" type="reporter" category="lists"><comment x="0" y="0" w="184.2857142857143" collapsed="false">Reports the distance between the points. Works with any dimensions from 1 to what fits in memory.</comment><header></header><code></code><translations></translations><inputs><input type="%l"></input><input type="%l"></input></inputs><script><block s="doReport"><block s="reportMonadic"><l><option>sqrt</option></l><custom-block s="square of distance from %l to %l"><block var="point 1"/><block var="point 2"/></custom-block></block></block></script></block-definition><block-definition s="call eCraft2Learn reporter %&apos;reporter name&apos; with %&apos;inputs&apos;" type="reporter" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><custom-block s="load eCraft2Learn"></custom-block><block s="doReport"><block s="reportApplyExtension"><l>e2l_call(reporter_name, parameters)</l><list><block var="reporter name"/><block var="inputs"/></list></block></block></script></block-definition><block-definition s="Set presentation mode to %&apos;flag&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%b"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>set_presentation_mode</l><list><block var="flag"/></list></custom-block></script></block-definition><block-definition s="Open web page %&apos;url&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="Load eCraft2Learn library"></custom-block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>open_web_page</l><list><block var="url"/></list></custom-block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><custom-block s="load eCraft2Learn"></custom-block><block s="doApplyExtension"><l>e2l_run(command_name, parameters)</l><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition><block-definition s="load eCraft2Learn" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>https://ecraft2learn.github.io/ai/ecraft2learn.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>https://ecraft2learn.github.io/ai/js/ecraft2learn_snap_extension.js</l></list></block></script></block-definition><block-definition s="Load eCraft2Learn library" type="command" category="other"><comment x="0" y="0" w="238.5714285714286" collapsed="false">No longer needed in Snap! 7+ but retained to avoid error from blocks that expect it.</comment><header></header><code></code><translations></translations><inputs></inputs></block-definition><block-definition s="cosine similarity of %&apos;features 1&apos; and %&apos;features 2&apos;" type="reporter" category="lists"><comment x="0" y="0" w="234" collapsed="false">See https://en.wikipedia.org/wiki/Cosine_similarity&#xD;0 magnitude forces its computation.&#xD;Note that the &apos;features closest to list of features&apos; block should be used to compare one list with a list of lists because it much faster.</comment><header></header><code></code><translations></translations><inputs><input type="%l"></input><input type="%l"></input></inputs><script><block s="doReport"><custom-block s="cosine similarity %l %l with magnitudes %n and %n"><block var="features 1"/><block var="features 2"/><l>0</l><l>0</l></custom-block></block></script></block-definition><block-definition s="cosine similarity %&apos;list 1&apos; %&apos;list 2&apos; with magnitudes %&apos;magnitude 1&apos; and %&apos;magnitude 2&apos;" type="reporter" category="lists"><header></header><code></code><translations></translations><inputs><input type="%l"></input><input type="%l"></input><input type="%n">0</input><input type="%n">0</input></inputs><script><custom-block s="let %upvar be %s"><l>dot product</l><block s="reportVariadicSum"><block s="reportVariadicProduct"><list><block var="list 1"/><block var="list 2"/></list></block></block></custom-block><block s="doIf"><block s="reportEquals"><block var="magnitude 1"/><l>0</l></block><script><block s="doSetVar"><l>magnitude 1</l><block s="reportMonadic"><l><option>sqrt</option></l><block s="reportVariadicSum"><block s="reportVariadicProduct"><list><block var="list 1"/><block var="list 1"/></list></block></block></block><comment w="269.2857142857143" collapsed="true">If magnitude already known no point computing it</comment></block></script></block><block s="doIf"><block s="reportEquals"><block var="magnitude 2"/><l>0</l></block><script><block s="doSetVar"><l>magnitude 2</l><block s="reportMonadic"><l><option>sqrt</option></l><block s="reportVariadicSum"><block s="reportVariadicProduct"><list><block var="list 2"/><block var="list 2"/></list></block></block></block></block></script></block><block s="doReport"><block s="reportQuotient"><block var="dot product"/><block s="reportVariadicProduct"><list><block var="magnitude 1"/><block var="magnitude 2"/></list></block></block></block></script><scripts><comment x="444.45265066964294" y="10.85714285714286" w="234" collapsed="false">See https://en.wikipedia.org/wiki/Cosine_similarity&#xD;There is a pure Snap! version of this.&#xD;Note that the &apos;features closest to list of features&apos; block should be used to compare one list with a list of lists because it much faster.</comment></scripts></block-definition><block-definition s="let %&apos;var&apos; be %&apos;value&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%upvar"></input><input type="%s"></input></inputs><script><block s="doSetVar"><l>var</l><block var="value"/></block></script></block-definition><block-definition s="square of distance from %&apos;features 1&apos; to %&apos;features 2&apos;" type="reporter" category="Language"><comment x="0" y="0" w="245.00000000000003" collapsed="false">When comparing distances one can save some time by avoiding many calls to square root. See also the &apos;distance from features ...&apos; block.</comment><header></header><code></code><translations></translations><inputs><input type="%l"></input><input type="%l"></input></inputs><script><block s="doReport"><block s="reportVariadicSum"><block s="reportPower"><block s="reportDifference"><block var="features 1"/><block var="features 2"/></block><l>2</l></block></block></block></script></block-definition><block-definition s="combine with %&apos;function&apos; items of %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><translations>de:kombiniere mit _ die Elemente von _&#xD;</translations><inputs><input type="%repRing"></input><input type="%l"></input></inputs><script><block s="doIf"><custom-block s="empty? %l"><block s="reportCDR"><block var="data"/></block></custom-block><script><block s="doReport"><block s="reportListItem"><l>1</l><block var="data"/></block></block></script></block><block s="doReport"><block s="evaluate"><block var="function"/><list><block s="reportListItem"><l>1</l><block var="data"/></block><custom-block s="combine with %repRing items of %l"><block var="function"/><block s="reportCDR"><block var="data"/></block></custom-block></list></block></block></script></block-definition><block-definition s="empty? %&apos;data&apos;" type="predicate" category="lists"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block></block></script></block-definition><block-definition s="color name %&apos;name&apos; to RGB" type="reporter" category="pen"><comment w="235.625" collapsed="false">Reports a list of the red, green, and blue values (from 0 to 255) if a known color. Otherwise False.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>color_name_to_rgb</l><list><block var="name"/></list></custom-block></block></script></block-definition></blocks>