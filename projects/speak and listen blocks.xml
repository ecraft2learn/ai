<blocks app="Snap! 4.0, http://snap.berkeley.edu" version="1"><block-definition s="Listen %&apos;respond as heard&apos; then finally %&apos;handle response&apos; but if nothing heard %&apos;handle nothing said&apos; (requires Microsoft speech key)" type="command" category="sensing"><comment x="0" y="0" w="352" collapsed="false">As speech is recognised &apos;respond as heard&apos; is called with what it thinks it has heard. &apos;handle response&apos; is called when it htinks the speaking is finished.</comment><header></header><code></code><inputs><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>start_microsoft_speech_recognition</l><list><block var="respond as heard"/><block var="handle response"/><block var="handle nothing said"/></list></custom-block></script></block-definition><block-definition s="Microsoft speech key" type="reporter" category="other"><header></header><code></code><inputs></inputs><script><block s="doReport"><l>Enter your key here</l></block></script></block-definition><block-definition s="Listen then %&apos;handle response&apos; but if error %&apos;handle error&apos;" type="command" category="sensing"><comment x="0" y="0" w="326" collapsed="false">Listens to the microsphone if the browser supports it. If not will contact the Microsoft speech cloud service (key required).</comment><header></header><code></code><inputs><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>start_speech_recognition</l><list><block var="handle response"/><block var="handle error"/></list></custom-block></script></block-definition><block-definition s="read URL %&apos;URL&apos; then %&apos;receive contents&apos; or if error %&apos;receive error&apos; using an access key if needed %&apos;key&apos;" type="command" category="sensing"><comment w="383" collapsed="false">Reads the contents of &apos;URL&apos; and then calls &apos;receive contents&apos; with that text (in HTML). If there was an error &apos;receive error&apos; is called instead. &apos;key&apos; needs only be provided if the URL requires as access key.</comment><header></header><code></code><inputs><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>read_url</l><list><block var="URL"/><block var="receive contents"/><block var="receive error"/><block var="key"/></list></custom-block></script></block-definition><block-definition s="speak %&apos;message&apos; then %&apos;what to do when finished&apos; with pitch %&apos;pitch&apos; with rate %&apos;rate&apos; with voice %&apos;voice&apos; with volume %&apos;volume&apos; in language %&apos;language code&apos;" type="command" category="sound"><comment w="379" collapsed="false">Speak &apos;message&apos; and when finished call &apos;what to do when finished&apos; with &apos;message&apos;. If specified attributes can be specified. &apos;rate&apos; can be between .1 (1/10th speed) and 2 (double speed). Voice is a number picking out a voice - call &apos;Get voice names&apos; to those available in your browser.</comment><header></header><code></code><inputs><input type="%s"></input><input type="%cmdRing"></input><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>speak</l><list><block var="message"/><block var="pitch"/><block var="rate"/><block var="voice"/><block var="volume"/><block var="language code"/><block var="what to do when finished"/></list></custom-block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    ecraft2learn.run(function_name, parameters);
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;} else {
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    var script = document.createElement("script");
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    script.type = "text/javascript";
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    script.src = "https://ecraft2learn.github.io/ai/ecraft2learn.js";
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    script.addEventListener(&apos;load&apos;, function () {
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;        ecraft2learn.run(function_name, parameters);
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    });
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    document.head.appendChild(script);
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;}</l></block><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition><block-definition s="call eCraft2Learn reporter %&apos;reporter name&apos; with %&apos;inputs&apos;" type="reporter" category="other"><header></header><code></code><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    return ecraft2learn.run(function_name, parameters);
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;} else {
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    alert("Any eCraft2Learn command must be run before the " + function_name + " reporter.");
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    return 0;
&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;}</l></block><list><block var="reporter name"/><block var="inputs"/></list></block></block></script></block-definition><block-definition s="Get voice names" type="reporter" category="sound"><comment w="324" collapsed="false">Some browsers have dozens of voices and some have none. Some voices can speak in other languages -- try speaking a number in another language.</comment><header></header><code></code><inputs></inputs><script><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>get_voice_names</l><list></list></custom-block></block></script></block-definition><block-definition s="voice name of %&apos;voice number&apos;" type="reporter" category="sound"><comment w="523" collapsed="false">Reports the name of a voice given its number. Note each browser has a different set of voices.</comment><header></header><code></code><inputs><input type="%n"></input></inputs><script><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>get_voice_name</l><list><block var="voice number"/></list></custom-block></block></script></block-definition><block-definition s="Speak %&apos;message&apos; then %&apos;to do when finished speaking&apos;" type="command" category="sound"><comment w="308" collapsed="false">Speak &apos;message&apos; using default voice, rate, pitch, etc. When completed &apos;to do when finished speaking&apos; is called with message.</comment><header></header><code></code><inputs><input type="%txt"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>speak</l><list><block var="message"/><l></l><l></l><l></l><l></l><l></l><block var="to do when finished speaking"/></list></custom-block></script></block-definition></blocks>