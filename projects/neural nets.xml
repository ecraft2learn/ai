<project name="neural nets" app="Snap! 5.4, http://snap.berkeley.edu" version="1"><notes></notes><thumbnail>data:image/png;base64,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</thumbnail><stage name="Stage" width="360" height="270" costume="0" color="255,255,255,1" tempo="60" threadsafe="false" penlog="false" volume="100" pan="0" lines="round" ternary="true" codify="false" inheritance="false" sublistIDs="false" scheduled="false" id="1"><pentrails>data:image/png;base64,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</pentrails><costumes><list struct="atomic" id="2"></list></costumes><sounds><list struct="atomic" id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="Neural nets" idx="1" x="0" y="1.1368683772161603e-13" heading="90" scale="1" volume="100" pan="0" rotation="1" draggable="true" costume="0" color="48.44999999999999,0,127.5,1" pen="tip" id="8"><costumes><list struct="atomic" id="9"></list></costumes><sounds><list struct="atomic" id="10"></list></sounds><blocks></blocks><variables></variables><scripts><script x="33.42857142857144" y="7.142857142857143"><custom-block s="Open help page"><comment w="265" collapsed="true">CLICK THIS TO OPEN THE HELP PAGE</comment></custom-block></script><comment x="16.42857142857143" y="46.14285714285708" w="257" collapsed="true">Creating your own machine learning neural net.</comment><comment x="9.857142857142867" y="2831.714285714286" w="473.89746093749994" collapsed="true">This work is licensed under NEW BSD - http://opensource.org/licenses/BSD-3-Clause</comment><script x="14.285714285714286" y="2703.8571428571427"><block s="receiveGo"></block><block s="doIf"><custom-block s="setting %s"><l>Presentation mode</l></custom-block><script><block s="doSayFor"><l>To see blocks for creating, training, and using deep learning neural networks, leave full screen mode and click on the &apos;Neural net&apos; sprite.</l><l>5</l></block></script></block></script><script x="15.57142857142858" y="84.57142857142864"><custom-block s="Create a neural net model %txt %br with layers %l %br with input size %s then %cs"><l>guess relation</l><block s="reportNewList"><list><l>100</l><l>50</l><l>1</l></list></block><l>1</l><script><block s="bubble"><l>Model created.</l></block></script><comment w="310" collapsed="false">Creates a model where each input value is connected with 100 neurons that are each connected to 50 neurons. Those 50 neurons are then connected to the single output value.</comment></custom-block></script><script x="16.571428571428566" y="190.71428571428572"><custom-block s="Create a neural net model %txt (expert version) %br with layers %l %br using optimizer %txt %br with loss function %txt %br with activation function %txt %br with dropout rate %n %br with input size %s %br then %cs %br but if there is an error %cmdRing"><l>guess relation</l><block s="reportNewList"><list><l>100</l><l>50</l><l>1</l></list></block><l>Adaptive Stochastic Gradient Descent</l><l>Mean Squared Error</l><l>relu</l><l>0</l><l>1</l><script><block s="bubble"><l>Model created.</l></block></script><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error message"/><l>Error training a model</l></custom-block></script><list><l>error message</l></list></block><comment w="188.57142857142858" collapsed="false">A full-featured version of the above where you can choose which optimization method, loss function, activation function and dropout rate are used.</comment></custom-block></script><script x="17.142857142857142" y="420.42857142857173"><block s="bubble"><l>Training started. Please wait.</l></block><custom-block s="Send %txt data input %l output %l %br forget old data %b ( this is only for %txt ) %br then when data has been received %cs"><l>training</l><block s="reportNewList"><list><l>1</l><l>2</l><l>3</l><l>4</l><l>5</l></list></block><block s="reportNewList"><list><l>3</l><l>5</l><l>7</l><l>9</l><l>11</l></list></block><l><bool>true</bool></l><l>all models</l><script><block s="bubble"><l>Data sent.</l></block></script><comment w="192.85714285714286" collapsed="false">Sending 5 training data items which are simply examples of 2*n+1</comment></custom-block></script><script x="18.142857142857128" y="546.0000000000005"><block s="bubble"><l>Training started. Please wait.</l></block><custom-block s="Train model named %txt %n times %br then when completed %cs"><l>guess relation</l><l>50</l><block s="reifyScript"><script><block s="bubble"><block var="training statistics"/></block></script><list><l>training statistics</l></list></block><comment w="300" collapsed="false">Train the model. It will adjust neuron weights 50 times to slowly reduce the error.</comment></custom-block></script><script x="19.000000000000018" y="652.0000000000002"><custom-block s="Get prediction from model(s) %s with input %s %br then %cmdRing %br or if there is an error %cmdRing %br with categories %l"><l>guess relation</l><l>10</l><block s="reifyScript"><script><block s="bubble"><block var="prediction"/></block></script><list><l>prediction</l></list></block><block s="reifyScript"><script><block s="doThink"><block var="error message"/></block></script><list><l>error message</l></list></block><l/><comment w="285.7142857142857" collapsed="true">Asking the trained model to predict the output for 10.</comment></custom-block></script><comment x="14.285714285714327" y="776.8571428571431" w="457.14285714285717" collapsed="false"> A full-featured version of the above block. You can specify whether the data should be shuffled on each step and whether a fraction of the training data be used only for validation.</comment><script x="17.8571428571429" y="836.8571428571429"><block s="bubble"><l>Training started. Please wait.</l></block><custom-block s="Train model named %txt %n times unless no progress for %n cycles %br with learning rate %n %br and shuffle the data %b %br and use %n of the data for validation %br then when completed %cmdRing %br or if there is an error %cmdRing"><l>guess relation</l><l>100</l><l>20</l><l>.001</l><l><bool>true</bool></l><l>0</l><block s="reifyScript"><script><block s="bubble"><block var="training statistics"/></block></script><list><l>training statistics</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error message"/><l>Error training a model</l></custom-block></script><list><l>error message</l></list></block></custom-block></script><comment x="12.857142857142899" y="1043.2857142857142" w="426.42857142857144" collapsed="false">Asking for three predictions in one go. Notice that there wasn&apos;t enough training data to deal well with negative numbers.</comment><script x="15.714285714285715" y="1103.8571428571427"><custom-block s="Get predictions from model(s) %txt with inputs %l %br then %cmdRing %br or if there is an error %cmdRing %br with categories %l"><l>guess relation</l><block s="reportNewList"><list><l>3</l><l>100</l><l>-10</l></list></block><block s="reifyScript"><script><block s="bubble"><block var="predictions"/></block></script><list><l>predictions</l></list></block><block s="reifyScript"><script><block s="doThink"><block var="error message"/></block></script><list><l>error message</l></list></block><l/></custom-block></script><script x="17.285714285714278" y="1230.142857142857"><custom-block s="Load %txt data from URL %txt %br and add to any previous data %b ( this is only for %txt ) %br then %cmdRing %br but if there is an error %cmdRing"><l>training</l><l>/ai/tensorflow/guess relation training data.json</l><l><bool>false</bool></l><l>all models</l><block s="reifyScript"><script><block s="bubble"><block var="response"/></block></script><list><l>response</l></list></block><block s="reifyScript"><script><block s="doThink"><block var="error message"/></block></script><list><l>error message</l></list></block><comment w="252.14285714285717" collapsed="false">Load training or validation data previously saved by opening the support panel called &apos;tensorflow.js&apos;.</comment></custom-block></script><script x="16.285714285714295" y="1358.285714285714"><custom-block s="Load neural net from URL %txt %br then when loaded %cmdRing %br unless there is an error %cmdRing"><l>/ai/tensorflow/guess relation.json</l><block s="reifyScript"><script><block s="bubble"><block s="reportJoinWords"><list><l>Model named "</l><block var="model name"/><l>" loaded.</l></list></block></block></script><list><l>model name</l></list></block><block s="reifyScript"><script><block s="doThink"><block var="error message"/></block></script><list><l>error message</l></list></block><comment w="214.2857142857143" collapsed="true">Load a model trained to estimate 2*n+1.</comment></custom-block></script><script x="17.999999999999993" y="1487.4285714285716"><block s="doSetVar"><l>model name</l><l>square root</l></block><custom-block s="Create a neural net model %txt %br with layers %l %br with input size %s then %cs"><block var="model name"/><block s="reportNewList"><list><l>40</l><l>10</l><l>1</l></list></block><l>1</l><script><block s="bubble"><l>Model created.</l></block></script><comment w="387.14285714285717" collapsed="false">An illustration of the use of the &quot;Search for good neural net model parameters&quot; block&#xD;that searches for the best neural net model parameters. Here we test it to see if it can&#xD;learn to approximate square roots. We start with a model with 40 neurons connected to a layer of 10 connected to 1 (the output).</comment></custom-block><custom-block s="let %upvar be %s"><l>validation numbers</l><custom-block s="%n random numbers with maximum of %n"><l>250</l><l>40</l></custom-block><comment w="337.14285714285717" collapsed="true">Create 250 examples to be used for validation instead of treaining.</comment></custom-block><custom-block s="let %upvar be %s"><l>validation squares</l><custom-block s="map %repRing over %l"><block s="reifyReporter"><autolambda><block s="reportProduct"><l></l><l></l></block></autolambda><list></list></block><block var="validation numbers"/></custom-block></custom-block><custom-block s="Send %txt data input %l output %l %br forget old data %b ( this is only for %txt ) %br then when data has been received %cs"><l>validation</l><block var="validation squares"/><block var="validation numbers"/><l><bool>true</bool></l><l>all models</l><script><custom-block s="let %upvar be %s"><l>numbers</l><custom-block s="%n random numbers with maximum of %n"><l>1000</l><l>40</l><comment w="239.2857142857143" collapsed="false">With a thousand numbers between 0 and 40 it has enough data to do a good job.</comment></custom-block></custom-block><custom-block s="let %upvar be %s"><l>squares</l><custom-block s="map %repRing over %l"><block s="reifyReporter"><autolambda><block s="reportProduct"><l></l><l></l></block></autolambda><list></list></block><block var="numbers"/></custom-block></custom-block><custom-block s="Send %txt data input %l output %l %br forget old data %b ( this is only for %txt ) %br then when data has been received %cs"><l>training</l><block var="squares"/><block var="numbers"/><l><bool>true</bool></l><l>all models</l><script><block s="bubble"><l>Data sent. Search started.</l></block><custom-block s="Search for good neural net model parameters for %txt perform %n experiments with each running %n training cycles %br and when each experiment finishes do %cmdRing %br then process best parameters %cmdRing %br but if there is an error %cmdRing"><block var="model name"/><l>3</l><l>100</l><block s="reifyScript"><script><block s="doThink"><block var="results"/></block></script><list><l>results</l></list></block><block s="reifyScript"><script><block s="doSetVar"><l>best parameters</l><block var="parameters"/></block><block s="bubble"><block var="parameters"/></block></script><list><l>parameters</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error"/><l>Searching for best parameters</l></custom-block></script><list><l>error</l></list></block><comment w="210.71428571428564" collapsed="false">This will do only 3 searches to find parameters that reduces prediction errors the most. It doesn&apos;t work that well. If you have time try this again with a much larger number. 20 experiments works pretty well but you might need to go have lunch or go for a walk while it searches.</comment></custom-block></script></custom-block></script></custom-block></script><comment x="7.142857142857143" y="2047.4285714285713" w="233.57142857142858" collapsed="true">Here is a full-featured version of search.</comment><script x="16.42857142857143" y="2082.8571428571427"><custom-block s="Open web page %txt"><l>/ai/help/hyperparameter-search.html</l><comment w="262.14285714285717" collapsed="true">Read the documentation for parameter search.</comment></custom-block></script><script x="15.714285714285715" y="2125.142857142855"><custom-block s="Search for good neural net model parameters for %txt %br perform %n experiments %br where each experiment should run the same parameters %n times %br where at first run %n training cycles %br and when each experiment finishes do %cmdRing %br then process best parameters %cmdRing %br but if there is an error %cmdRing %br Varying these parameters: %br optimization method %b %br loss function %b %br activation function %b %br shuffle data %b %br number of training iterations %b %br validation split %b %br dropout rate %b %br number of layers %b %br loss weight %n %br accuracy weight %n %br duration weight %n %br size weight %n %br variance weight %n"><block var="model name"/><l>4</l><l>3</l><l>100</l><block s="reifyScript"><script><block s="doThink"><block var="results"/></block></script><list><l>results</l></list></block><block s="reifyScript"><script><block s="doSetVar"><l>best parameters</l><block var="parameters"/></block><block s="bubble"><block var="parameters"/></block></script><list><l>parameters</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error"/><l>Searching for best parameters</l></custom-block></script><list><l>error</l></list></block><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l>10</l><l>0</l><l>1</l><l>2</l><l>3</l></custom-block></script><script x="15.142857142857135" y="2667.142857142857"><custom-block s="Open support panel %txt"><l>tensorflow.js</l><comment w="435" collapsed="false">Open up a page where you can create new models, train them, and use them for predictions.&#xD;Also provides an interface for saving and loading models and training data.</comment></custom-block></script><script x="15.142857142857135" y="2547.7142857142853"><custom-block s="Replace model named %txt with the best model found %br and when finished %cs %br but if there is an error %cmdRing"><block var="model name"/><script><block s="bubble"><block s="reportJoinWords"><list><block var="model name"/><l> updated with best model found.</l></list></block></block></script><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error"/><l>Switching to the best model found.</l></custom-block></script><list></list></block></custom-block></script><comment x="9.42857142857146" y="2524.2857142857138" w="322.57142857142856" collapsed="true">Here we illustrate how to use the best model found above.</comment></scripts></sprite><watcher s="xPosition" style="normal" x="0" y="35.59213039757263" color="74,108,212" hidden="true"/><watcher s="yPosition" style="normal" x="-2.451107975729201" y="73.58430402138079" color="74,108,212" hidden="true"/><watcher scope="Stage" s="reportMouseX" style="normal" x="12.255539878648733" y="12.25553987864771" color="4,148,220" hidden="true"/><watcher scope="Stage" s="reportMouseY" style="normal" x="12.255539878648733" y="46.325943192396394" color="4,148,220" hidden="true"/><watcher var="model name" style="normal" x="3.8334156378598436" y="3.833415637860085" color="243,118,29" hidden="true"/><watcher var="best parameters" style="normal" x="3.8334156378598436" y="11.88358924404939" color="243,118,29" hidden="true"/></sprites></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="Open help page" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>open_help_page</l><list><l></l></list></custom-block></script></block-definition><block-definition s="Search for good neural net model parameters for %&apos;model name&apos; perform %&apos;number of experiments&apos; experiments with each running %&apos;training cycles&apos; training cycles $nl and when each experiment finishes do %&apos;do when a trial finishes&apos; $nl then process best parameters %&apos;do with best parameters&apos; $nl but if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="267.8571428571429" collapsed="false">This searches for the best hyperparameters (learning rate, number of training cycles, loss function, optimazation method, and layers) that results in the most accurate model. It will run &apos;do when a trial finishes&apos; with the results of each experiment and after &apos;number of experiments&apos; it will run &apos;do with parameters&apos; with the best parameters found. The parameters can then be passed along to the &quot;Create and train a neural net named ... base upon ...&quot; block.&#xD;The named model must already exist and its training data (and optionally its validation data) already made available.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>optimize_hyperparameters</l><list><block var="model name"/><block var="number of experiments"/><block var="training cycles"/><block var="do when a trial finishes"/><block var="do with best parameters"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="Load %&apos;kind of data&apos; data from URL %&apos;URL&apos; $nl and add to any previous data %&apos;add to previous data&apos; ( this is only for %&apos;model name&apos; ) $nl then %&apos;do when data loaded&apos; $nl but if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="177.14285714285717" collapsed="false">Loads training or validataion data previously saved using the &quot;tensorflow.js&quot; page opened using the &quot;Open support panel ...&quot; block.</comment><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">training<options>training&#xD;validation</options></input><input type="%txt"></input><input type="%b">true</input><input type="%txt">all models</input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>load_data_from_URL</l><list><block var="kind of data"/><block var="URL"/><block var="add to previous data"/><block var="model name"/><block var="do when data loaded"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="%&apos;n&apos; random numbers with maximum of %&apos;maximum&apos;" type="reporter" category="variables"><comment x="0" y="0" w="237.14285714285717" collapsed="false">Reports a list of &apos;n&apos; between 1 and &apos;maximum&apos;.&#xD;Multiplying and dividing by 1000 produces numbers with 3 decimal places.</comment><header></header><code></code><translations></translations><inputs><input type="%n">100</input><input type="%n"></input></inputs><script><block s="doWarp"><script><custom-block s="let %upvar be %s"><l>numbers</l><block s="reportNewList"><list></list></block></custom-block><block s="doRepeat"><block var="n"/><script><block s="doAddToList"><block s="reportQuotient"><block s="reportRandom"><l>1</l><block s="reportProduct"><block var="maximum"/><l>1000</l></block></block><l>1000</l></block><block var="numbers"/></block></script></block><block s="doReport"><block var="numbers"/></block></script></block></script></block-definition><block-definition s="Train model named %&apos;name&apos; %&apos;n&apos; times $nl with learning rate %&apos;learning rate&apos; $nl and shuffle the data %&apos;shuffle&apos; $nl and use %&apos;validation split&apos; of the data for validation $nl then when completed %&apos;process response&apos; $nl or if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="265.7142857142857" collapsed="false">Train the model using &apos;n&apos; learning steps. Each step will change weights by &apos;learning rate&apos;. If it is too big the learning will fail. If it is too small it will go very slowly. So that the learning doesn&apos;t rely upon the order of the data it can be &apos;shuffled&apos; each step. If validation data hasn&apos;t been created then an alternative is to use &apos;validation split&apos; fraction of the data for validation.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%b">true</input><input type="%n">0</input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>train_model</l><list><block var="name"/><block var="n"/><block var="learning rate"/><block var="shuffle"/><block var="validation split"/><block var="process response"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="map %&apos;func&apos; over %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><translations>de:wende _ an auf _&#xD;</translations><inputs><input type="%repRing"></input><input type="%l"></input></inputs><script><block s="doIf"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doReport"><block var="data"/></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="func"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><custom-block s="map %repRing over %l"><block var="func"/><block s="reportCDR"><block var="data"/></block></custom-block></block></block></script></block-definition><block-definition s="Train model named %&apos;model name&apos; %&apos;n&apos; times $nl then when completed %&apos;do when finished&apos;" type="command" category="other"><comment x="0" y="0" w="262.14285714285717" collapsed="false">Train the model using &apos;n&apos; learning steps.&#xD;There is a full-featured version of this block.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n">10</input><input type="%cs"></input></inputs><script><custom-block s="Train model named %txt %n times %br with learning rate %n %br and shuffle the data %b %br and use %n of the data for validation %br then when completed %cmdRing %br or if there is an error %cmdRing"><block var="model name"/><block var="n"/><l>.001</l><l><bool>true</bool></l><l>0</l><block s="reifyScript"><script><block s="doRun"><block var="do when finished"/><list><block var="training statistics"/></list></block></script><list><l>training statistics</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error message"/><l>Error training a model</l></custom-block></script><list><l>error message</l></list></block></custom-block></script></block-definition><block-definition s="Create a neural net model %&apos;model name&apos; $nl with layers %&apos;layers&apos; $nl with input size %&apos;input size&apos; then %&apos;do when created&apos;" type="command" category="other"><comment x="0" y="0" w="249.2857142857143" collapsed="false">Creates a neural with a &apos;name&apos; that is used in other blocks for training and prediction. &apos;Layers&apos; is a list of positive numbers determine the size of each layer.  &apos;Input size&apos; should be a number or a list of numbers that describes what the input dimensions are. You don&apos;t need to provide this if you have already sent or loaded training data.&#xD;There is another version of this block with more inputs.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%s"></input><input type="%cs"></input></inputs><script><custom-block s="Create a neural network model %txt %br with layers %l %br using optimizer %txt %br with loss function %txt %br with input size %s %br then %cmdRing %br but if there is an error %cmdRing"><block var="model name"/><block var="layers"/><l>Adaptive Stochastic Gradient Descent</l><l>Mean Squared Error</l><block var="input size"/><block var="do when created"/><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error message"/><l>Error creating a model</l></custom-block></script><list><l>error message</l></list></block></custom-block></script></block-definition><block-definition s="Create a neural network model %&apos;name&apos; $nl with layers %&apos;layers&apos; $nl using optimizer %&apos;optimizer&apos; $nl with loss function %&apos;loss function&apos; $nl with input size %&apos;input size&apos; $nl then %&apos;do after model created&apos; $nl but if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="245.00000000000003" collapsed="false">Creates a neural with a &apos;name&apos; that is used in other blocks for training and prediction. &apos;Layers&apos; is a list of positive numbers determine the size of each layer. The &apos;optimizer&apos; is the name of the method that will be used during training. &apos;loss function&apos; is used to measure the difference between predictions and outputs during training. &apos;Input size&apos; should be a number or a list of numbers that describes what the input dimensions are. You don&apos;t need to provide this if you have already sent or loaded training data.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%txt" readonly="true">Stochastic Gradient Descent<options>Stochastic Gradient Descent&#xD;Adaptive Stochastic Gradient Descent&#xD;Adaptive Learning Rate Gradiant Descent&#xD;Adaptive Moment Estimation&#xD;Adaptive Moment Estimation Max&#xD;Momentum&#xD;Root Mean Squared Prop</options></input><input type="%txt" readonly="true">Mean Squared Error<options>Absolute Distance&#xD;Compute Weighted Loss&#xD;Cosine Distance&#xD;Hinge Loss&#xD;Huber Loss&#xD;Log Loss&#xD;Mean Squared Error&#xD;Sigmoid Cross Entropy&#xD;Softmax Cross Entropy</options></input><input type="%s"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>create_tensorflow_model</l><list><block var="name"/><block var="layers"/><block var="optimizer"/><block var="loss function"/><block var="input size"/><block var="do after model created"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="setting %&apos;which&apos;" type="reporter" category="sensing"><header></header><code></code><translations>pt:o valor da configuração _&#xD;</translations><inputs><input type="%s" readonly="true"><options>Project notes&#xD;Project name&#xD;User&#xD;Presentation mode&#xD;Language&#xD;Zoom blocks&#xD;Stage size&#xD;Stage scale&#xD;Retina display support&#xD;Long form input dialog&#xD;Plain prototype labels&#xD;Input sliders&#xD;Execute on slider change&#xD;Clicking sound&#xD;Turbo mode&#xD;Flat design&#xD;Keyboard editing&#xD;Visible stepping&#xD;Thread safe scripts&#xD;Prefer smooth animations&#xD;Flat line ends&#xD;Codification support&#xD;Inheritance support&#xD;Visible palette</options></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>which</l></list><l>var stage = this.parentThatIsA(StageMorph),&#xD;    ide = stage.parentThatIsA(IDE_Morph),&#xD;    world = stage.parentThatIsA(WorldMorph);&#xD;&#xD;switch (which) {&#xD;    case &apos;Project notes&apos;:&#xD;        return ide.projectNotes;&#xD;    case &apos;Project name&apos;:&#xD;        return ide.projectName;&#xD;    case &apos;User&apos;:&#xD;        return ide.cloud.username;&#xD;    case &apos;Presentation mode&apos;:&#xD;        return ide.isAppMode;&#xD;    case &apos;Language&apos;:&#xD;        return SnapTranslator.language;&#xD;    case &apos;Zoom blocks&apos;:&#xD;        return SyntaxElementMorph.prototype.scale;&#xD;    case &apos;Stage size&apos;:&#xD;        return new List([StageMorph.prototype.dimensions.x,&#xD;                                   StageMorph.prototype.dimensions.y]);&#xD;    case &apos;Stage scale&apos;:&#xD;       return stage.scale;&#xD;    case &apos;Retina display support&apos;:&#xD;        return isRetinaEnabled();&#xD;    case &apos;Long form input dialog&apos;:&#xD;        return InputSlotDialogMorph.prototype.isLaunchingExpanded;&#xD;    case &apos;Plain prototype labels&apos;:&#xD;        return BlockLabelPlaceHolderMorph.prototype.plainLabel;&#xD;    case &apos;Input sliders&apos;:&#xD;        return MorphicPreferences.useSliderForInput;&#xD;    case &apos;Execute on slider change&apos;:&#xD;        return ArgMorph.prototype.executeOnSliderEdit;&#xD;    case &apos;Clicking sound&apos;:&#xD;        return !!BlockMorph.prototype.snapSound;&#xD;    case &apos;Turbo mode&apos;:&#xD;        return stage.isFastTracked;&#xD;    case &apos;Flat design&apos;:&#xD;        return MorphicPreferences.isFlat;&#xD;    case &apos;Keyboard editing&apos;:&#xD;        return world.keyboardReceiver instanceof ScriptFocusMorph;&#xD;    case &apos;Visible stepping&apos;:&#xD;        return Process.prototype.enableSingleStepping;&#xD;    case &apos;Thread safe scripts&apos;:&#xD;        return stage.isThreadSafe;&#xD;    case &apos;Prefer smooth animations&apos;:&#xD;        return StageMorph.prototype.frameRate &gt; 0;&#xD;    case &apos;Flat line ends&apos;:&#xD;        return SpriteMorph.prototype.useFlatLineEnds;&#xD;    case &apos;Codification support&apos;:&#xD;        return StageMorph.prototype.enableCodeMapping;&#xD;    case &apos;Inheritance support&apos;:&#xD;        return StageMorph.prototype.enableInheritance;&#xD;    default: return which;&#xD;    case &apos;Visible palette&apos;:&#xD;        return ide.currentCategory;&#xD;}</l></block><list><block var="which"/></list></block></block></script></block-definition><block-definition s="Search for good neural net model parameters for %&apos;model name&apos; $nl perform %&apos;number of experiments&apos; experiments $nl where at first run %&apos;training cycles&apos; training cycles $nl and when each experiment finishes do %&apos;do when a trial finishes&apos; $nl then process best parameters %&apos;do with best parameters&apos; $nl but if there is an error %&apos;process error&apos; $nl Varying these parameters: $nl optimization method %&apos;optimization method&apos; $nl loss function %&apos;loss function&apos; $nl activation function %&apos;activation function&apos; $nl shuffle data %&apos;shuffle data&apos; $nl number of training iterations %&apos;number of training iterations&apos; $nl validation split %&apos;validation split&apos; $nl dropout rate %&apos;dropout rate&apos; $nl number of layers %&apos;number of layers&apos; $nl loss weight %&apos;loss weight&apos; $nl accuracy weight %&apos;accuracy weight&apos; $nl duration weight %&apos;duration weight&apos; $nl size weight %&apos;size weight&apos;" type="command" category="other"><comment x="0" y="0" w="280.7142857142857" collapsed="false">This searches for the best hyperparameters (learning rate, number of training cycles, loss function, optimazation method, and layers) that results in the most accurate model. It will run &apos;do when a trial finishes&apos; with the results of each experiment and after &apos;number of experiments&apos; it will run &apos;do with parameters&apos; with the best parameters found. The parameters can then be passed along to the &quot;Create and train a neural net named ... base upon ...&quot; block.&#xD;The named model must already exist and its training data (and optionally its validation data) already made available. It scores each experiment by adding the weighted values of the loss, accuracy, time to train, and number of parameters.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%n">10</input><input type="%n">10</input><input type="%n">1</input><input type="%n">2</input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>optimize_hyperparameters</l><list><block var="model name"/><block var="number of experiments"/><block var="training cycles"/><block var="do when a trial finishes"/><block var="do with best parameters"/><block var="process error"/><block s="reportNewList"><list><block var="optimization method"/><block var="loss function"/><block var="activation function"/><block var="shuffle data"/><block var="number of training iterations"/><block var="validation split"/><block var="dropout rate"/><block var="number of layers"/></list></block><block s="reportNewList"><list><block var="loss weight"/><block var="accuracy weight"/><block var="duration weight"/><block var="size weight"/></list></block></list></custom-block></script></block-definition><block-definition s="Search and replace %&apos;number of replacements&apos; times $nl with number of experiments %&apos;number of experiments&apos; $nl with %&apos;number of training cycles&apos; initial number of training cylces $nl do after each experiment finishes %&apos;when an experiment finishes&apos; $nl do after each replacement %&apos;do with parameters&apos; $nl then finally do %&apos;when finished&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doIfElse"><block s="reportGreaterThan"><block var="number of replacements"/><l>0</l></block><script><custom-block s="Search for good neural net model parameters for %txt %br perform %n experiments %br where at first run %n training cycles %br and when each experiment finishes do %cmdRing %br then process best parameters %cmdRing %br but if there is an error %cmdRing %br Varying these parameters: %br optimization method %b %br loss function %b %br activation function %b %br shuffle data %b %br number of training iterations %b %br validation split %b %br dropout rate %b %br number of layers %b %br loss weight %n %br accuracy weight %n %br duration weight %n %br size weight %n"><block var="model name"/><block var="number of experiments"/><block var="number of training cycles"/><block s="reifyScript"><script><block s="doRun"><block var="when an experiment finishes"/><list><block var="results"/></list></block></script><list><l>results</l></list></block><block s="reifyScript"><script><custom-block s="let %upvar be %s"><l>current score</l><block s="errorObsolete"></block></custom-block><block s="bubble"><block s="reportNewList"><list><block var="best score so far"/><block var="current score"/></list></block></block><block s="doIfElse"><block s="reportGreaterThan"><block var="current score"/><block var="best score so far"/></block><script><block s="doSetVar"><l>best score so far</l><block var="current score"/></block><custom-block s="Replace model named %txt with the best model found %br and when finished %cs %br but if there is an error %cmdRing"><block var="model name"/><script><block s="doRun"><block var="do with parameters"/><list><block var="best parameters"/></list></block><custom-block s="Search and replace %n times %br with number of experiments %n %br with %n initial number of training cylces %br do after each experiment finishes %cmdRing %br do after each replacement %cmdRing %br then finally do %cmdRing"><block s="reportDifference"><block var="number of replacements"/><l>1</l></block><block var="number of experiments"/><block s="reportListItem"><l>2</l><block s="reportFindFirst"><block s="reifyPredicate"><autolambda><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="pair"/></block><l>epochs</l></block></autolambda><list><l>pair</l></list></block><block var="best parameters"/></block></block><block var="when an experiment finishes"/><block var="do with parameters"/><block var="when finished"/></custom-block></script><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><l></l><l>Error while replacing model with best model while searching.</l></custom-block><custom-block s="Search and replace %n times %br with number of experiments %n %br with %n initial number of training cylces %br do after each experiment finishes %cmdRing %br do after each replacement %cmdRing %br then finally do %cmdRing"><block s="reportDifference"><block var="number of replacements"/><l>1</l></block><block var="number of experiments"/><block var="number of training cycles"/><block var="when an experiment finishes"/><block var="do with parameters"/><block var="when finished"/></custom-block></script><list></list></block></custom-block></script><script><custom-block s="Search and replace %n times %br with number of experiments %n %br with %n initial number of training cylces %br do after each experiment finishes %cmdRing %br do after each replacement %cmdRing %br then finally do %cmdRing"><block s="reportDifference"><block var="number of replacements"/><l>1</l></block><block var="number of experiments"/><block var="number of training cycles"/><block var="when an experiment finishes"/><block var="do with parameters"/><block var="when finished"/></custom-block></script></block></script><list><l>best parameters</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><l></l><l>Error while searching for good parameters</l></custom-block></script><list></list></block><l><bool>true</bool></l><l><bool>false</bool></l><l><bool>false</bool></l><l><bool>false</bool></l><l><bool>true</bool></l><l><bool>false</bool></l><l><bool>false</bool></l><l><bool>true</bool></l><l>1</l><l>5</l><l>1</l><l>1</l></custom-block></script><script><block s="doRun"><block var="when finished"/><list></list></block></script></block></script></block-definition><block-definition s="Get predictions from model(s) %&apos;model name(s)&apos; with inputs %&apos;inputs&apos; $nl then %&apos;process predictions&apos; $nl or if there is an error %&apos;process error&apos; $nl with categories %&apos;categories&apos;" type="command" category="other"><comment x="0" y="0" w="181.42857142857144" collapsed="false">Ask the trained model to make predictions for each value in &apos;inputs&apos;. Can also average the predictions from a list of models.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%l"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>predictions_from_model</l><list><block var="model name(s)"/><block var="inputs"/><block var="process predictions"/><block var="process error"/><block var="categories"/></list></custom-block></script></block-definition><block-definition s="Is %&apos;model name&apos; ready for prediction?" type="predicate" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="let %upvar be %s"><l>answer</l><l>not ready</l></custom-block><custom-block s="Check if %txt is ready for prediction %br then do %cmdRing"><block var="model name"/><block s="reifyScript"><script><block s="doSetVar"><l>answer</l><block var="response"/></block></script><list><l>response</l></list></block></custom-block><block s="doWaitUntil"><block s="reportIsA"><block var="answer"/><l><option>Boolean</option></l></block></block><block s="doReport"><block var="answer"/></block></script></block-definition><block-definition s="Check if %&apos;model name&apos; is ready for prediction $nl then do %&apos;process answer&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cmdRing"></input></inputs><script><custom-block s="Load eCraft2Learn library"></custom-block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>is_model_ready_for_prediction</l><list><block var="model name"/><block var="process answer"/></list></custom-block></script></block-definition><block-definition s="Replace model named %&apos;model name&apos; with the best model found $nl and when finished %&apos;run after replacement&apos; $nl but if there is an error %&apos;run if there is an error&apos;" type="command" category="other"><comment x="0" y="0" w="268.5714285714286" collapsed="false">This will replace the model named by the best model found by the &apos;Search for good neural net model ...&quot; command.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cs"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>replace_with_best_model</l><list><block var="model name"/><block var="run after replacement"/><block var="run if there is an error"/></list></custom-block></script></block-definition><block-definition s="Open support panel %&apos;source&apos;" type="command" category="sensing"><comment x="0" y="0" w="170.71428571428572" collapsed="false">Open an interface page for different machine learning models.</comment><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">training using camera<options>training using camera&#xD;training using microphone&#xD;posenet&#xD;tensorflow.js</options></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>display_support_window</l><list><block var="source"/></list></custom-block></script></block-definition><block-definition s="Load neural net from URL %&apos;URL&apos; $nl then when loaded %&apos;do when loaded&apos; $nl unless there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="185.71428571428572" collapsed="false">Loads a model previously saved using the interface on the &apos;tensorflow.js&apos; page which can be opened using the &apos;Open support panel ...&apos; block.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>load_tensorflow_model_from_URL</l><list><block var="URL"/><block var="do when loaded"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="Send %&apos;kind of data&apos; data input %&apos;input&apos; output %&apos;output&apos; $nl forget old data %&apos;ignore old data&apos; ( this is only for %&apos;model name&apos; ) $nl then when data has been received %&apos;do when finished&apos;" type="command" category="other"><comment x="0" y="0" w="282.14285714285717" collapsed="false">Sends either training or validation data to the support panel.</comment><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">training<options>training&#xD;validation</options></input><input type="%l"></input><input type="%l"></input><input type="%b">false</input><input type="%txt">all models</input><input type="%cs"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>send_data</l><list><block var="model name"/><block var="kind of data"/><block var="input"/><block var="output"/><block var="ignore old data"/><block var="do when finished"/></list></custom-block></script></block-definition><block-definition s="inform %&apos;message&apos; with title %&apos;title&apos;" type="command" category="other"><comment x="0" y="0" w="217.14285714285717" collapsed="false">Will display &apos;message&apos; in a dialog box with &apos;title&apos;. User needs to click &apos;OK&apos; to remove it.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>inform</l><list><block var="title"/><block var="message"/></list></custom-block></script></block-definition><block-definition s="Create a neural net model %&apos;name&apos; (expert version) $nl with layers %&apos;layers&apos; $nl using optimizer %&apos;optimizer&apos; $nl with loss function %&apos;loss function&apos; $nl with activation function %&apos;activation function&apos; $nl with dropout rate %&apos;dropout rate&apos; $nl with input size %&apos;input size&apos; $nl then %&apos;do after model created&apos; $nl but if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="280.7142857142857" collapsed="false">Creates a neural network with a &apos;name&apos; that is used in other blocks for training and prediction. &apos;Layers&apos; is a list of positive numbers determine the size of each layer. The &apos;optimizer&apos; is the name of the method that will be used during training. &apos;loss function&apos; is used to measure the difference between predictions and outputs during training. The &apos;activation function&apos; is applied after the weighted inputs are summed. &apos;dropout rate&apos; adds some noise to training that helps prevent overfitting to the training data.  &apos;Input size&apos; should be a number or a list of numbers that describes what the input dimensions are. You don&apos;t need to provide this if you have already sent or loaded training data.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%txt" readonly="true">Stochastic Gradient Descent<options>Stochastic Gradient Descent&#xD;Adaptive Stochastic Gradient Descent&#xD;Adaptive Learning Rate Gradiant Descent&#xD;Adaptive Moment Estimation&#xD;Adaptive Moment Estimation Max&#xD;Momentum&#xD;Root Mean Squared Prop</options></input><input type="%txt" readonly="true">Mean Squared Error<options>Absolute Difference&#xD;Log Loss&#xD;Mean Squared Error</options></input><input type="%txt">relu<options>elu&#xD;hardSigmoid&#xD;linear&#xD;relu&#xD;relu6&#xD;selu&#xD;sigmoid&#xD;softmax&#xD;softplus&#xD;softsign&#xD;tanh</options></input><input type="%n">0.5</input><input type="%s"></input><input type="%cs"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>create_tensorflow_model</l><list><block var="name"/><block var="layers"/><block var="optimizer"/><block var="loss function"/><block var="input size"/><block var="do after model created"/><block var="process error"/><block var="activation function"/><block var="dropout rate"/></list></custom-block></script></block-definition><block-definition s="Train model named %&apos;name&apos; %&apos;n&apos; times unless no progress for %&apos;stop after&apos; cycles $nl with learning rate %&apos;learning rate&apos; $nl and shuffle the data %&apos;shuffle&apos; $nl and use %&apos;validation split&apos; of the data for validation $nl then when completed %&apos;process response&apos; $nl or if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="267.14285714285717" collapsed="false">Train the model using &apos;n&apos; learning steps. If three is no progress for &apos;stop after&apos; cycles it will stop early. Each step will change weights by &apos;learning rate&apos;. If it is too big the learning will fail. If it is too small it will go very slowly. So that the learning doesn&apos;t rely upon the order of the data it can be &apos;shuffled&apos; each step. If validation data hasn&apos;t been created then an alternative is to use &apos;validation split&apos; fraction of the data for validation.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%b">true</input><input type="%n">0</input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>train_model</l><list><block var="name"/><block var="n"/><block var="learning rate"/><block var="shuffle"/><block var="validation split"/><block var="process response"/><block var="process error"/><block var="stop after"/></list></custom-block></script></block-definition><block-definition s="Get prediction from model(s) %&apos;model names&apos; with input %&apos;input&apos; $nl then %&apos;process prediction&apos; $nl or if there is an error %&apos;process error&apos; $nl with categories %&apos;categories&apos;" type="command" category="other"><comment x="0" y="0" w="226.42857142857144" collapsed="false">Ask the trained model to predict what the output should be for the &apos;input&apos;. There is also a block for computing many predictions all at once. &apos;Model names&apos; can be a list of names or a single name. Categories should only be provided if the prediction is for labelling the input.</comment><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%l"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>predictions_from_model</l><list><block var="model names"/><block s="reportNewList"><list><block var="input"/></list></block><block s="reifyReporter"><script><block s="doRun"><block var="process prediction"/><list><block s="reportListItem"><l>1</l><block var="predictions"/></block></list></block></script><list><l>predictions</l></list></block><block var="process error"/><block var="categories"/></list></custom-block></script></block-definition><block-definition s="Load eCraft2Learn library" type="command" category="other"><comment x="0" y="0" w="248.57142857142858" collapsed="true">Returns only after eCraft2Learn library is loaded</comment><header></header><code></code><translations></translations><inputs></inputs><script><block s="doWaitUntil"><custom-block s="Try to load ecraft2learn library"></custom-block></block></script></block-definition><block-definition s="Try to load ecraft2learn library" type="reporter" category="other"><comment x="0" y="0" w="323.5714285714286" collapsed="true">Should only be called by Load eCraft2Learn library</comment><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list></list><l>if (typeof ecraft2learn === &apos;object&apos;) {&#xD;   return true;&#xD;}&#xD;if (window.waiting_for_ecraft2learn_library) {&#xD;   return false;&#xD;}&#xD;window.waiting_for_ecraft2learn_library = true;&#xD;let script = document.createElement("script");&#xD;&#xD;script.type = "text/javascript";&#xD;&#xD;if (window.location.hostname === &apos;localhost&apos;) {&#xD;&#xD;    script.src = window.location.protocol + "//" + window.location.host + "/ai/ecraft2learn-beta.js"; // notice this the beta version&#xD;&#xD;} else {&#xD;&#xD;    script.src = "https://ecraft2learn.github.io/ai/ecraft2learn.js";&#xD;&#xD;}&#xD;&#xD;document.head.appendChild(script);&#xD;return false;</l></block><list></list></block></block></script></block-definition><block-definition s="call eCraft2Learn reporter %&apos;reporter name&apos; with %&apos;inputs&apos;" type="reporter" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l><l>no_warning</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {&#xD;&#xD;    return ecraft2learn.run(function_name, parameters);&#xD;&#xD;}&#xD;&#xD;if (!no_warning) {&#xD;&#xD;    alert("Any eCraft2Learn command must be run before the " + function_name + " reporter.");&#xD;&#xD;}&#xD;&#xD;return 0;</l></block><list><block var="reporter name"/><block var="inputs"/></list></block></block></script></block-definition><block-definition s="let %&apos;var&apos; be %&apos;value&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%upvar"></input><input type="%s"></input></inputs><script><block s="doSetVar"><l>var</l><block var="value"/></block></script></block-definition><block-definition s="empty? %&apos;data&apos;" type="predicate" category="lists"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block></block></script></block-definition><block-definition s="load tensorflow" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doDeclareVariables"><list><l>loaded</l></list></block><block s="doSetVar"><l>loaded</l><block s="reportBoolean"><l><bool>false</bool></l></block></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>load_tensorflow</l><list><block s="reifyScript"><script><block s="doSetVar"><l>loaded</l><block s="reportBoolean"><l><bool>true</bool></l></block></block></script><list></list></block></list></custom-block><block s="doWaitUntil"><block var="loaded"/></block></script></block-definition><block-definition s="Open web page %&apos;url&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="Load eCraft2Learn library"></custom-block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>open_web_page</l><list><block var="url"/></list></custom-block></script></block-definition><block-definition s="Load %&apos;model names&apos; if needed" type="command" category="other"><comment x="0" y="0" w="148.42857242857139" collapsed="false">Loads any of the &apos;model names&apos; if they aren&apos;t already loaded.</comment><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doForEach"><l>model name</l><block var="model names"/><script><block s="doIf"><block s="reportNot"><custom-block s="Is %txt ready for prediction?"><block var="model name"/></custom-block></block><script><custom-block s="Load neural net from URL %txt %br then when loaded %cmdRing %br unless there is an error %cmdRing"><block s="reportJoinWords"><list><l>models/</l><block var="model name"/><l>.json</l></list></block><block s="reifyScript"><script></script><list></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><l></l><l>Loading the model</l></custom-block></script><list></list></block></custom-block></script></block></script></block><block s="doWaitUntil"><block s="errorObsolete"></block></block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {&#xD;&#xD;    ecraft2learn.run(function_name, parameters);&#xD;&#xD;} else {&#xD;&#xD;   var script = document.createElement("script");&#xD;&#xD;   script.type = "text/javascript";&#xD;&#xD;   script.addEventListener(&apos;error&apos;, function () {&#xD;&#xD;          alert("Unable to load https://ecraft2learn.github.io/ai/ecraft2learn.js. Check your network connection.");&#xD;&#xD;   });&#xD;&#xD;   script.src = "https://ecraft2learn.github.io/ai/ecraft2learn.js";&#xD;&#xD;   script.addEventListener(&apos;load&apos;, function () {&#xD;&#xD;          ecraft2learn.run(function_name, parameters);&#xD;&#xD;   });&#xD;&#xD;   document.head.appendChild(script);&#xD;&#xD;}&#xD;&#xD;</l></block><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition><block-definition s="Search for good neural net model parameters for %&apos;model name&apos; $nl perform %&apos;number of experiments&apos; experiments $nl where each experiment should run the same parameters %&apos;number of samples&apos; times $nl where at first run %&apos;training cycles&apos; training cycles $nl and when each experiment finishes do %&apos;do when a trial finishes&apos; $nl then process best parameters %&apos;do with best parameters&apos; $nl but if there is an error %&apos;process error&apos; $nl Varying these parameters: $nl optimization method %&apos;optimization method&apos; $nl loss function %&apos;loss function&apos; $nl activation function %&apos;activation function&apos; $nl shuffle data %&apos;shuffle data&apos; $nl number of training iterations %&apos;number of training iterations&apos; $nl validation split %&apos;validation split&apos; $nl dropout rate %&apos;dropout rate&apos; $nl number of layers %&apos;number of layers&apos; $nl loss weight %&apos;loss weight&apos; $nl accuracy weight %&apos;accuracy weight&apos; $nl duration weight %&apos;duration weight&apos; $nl size weight %&apos;size weight&apos; $nl variance weight %&apos;standard deviation weight&apos;" type="command" category="other"><comment x="0" y="0" w="280.7142857142857" collapsed="false">This searches for the best hyperparameters (learning rate, number of training cycles, loss function, optimazation method, and layers) that results in the most accurate model. It will run &apos;do when a trial finishes&apos; with the results of each experiment. Each experiment will average the results of &apos;number of samples&apos; runs with the same hyperparameters. After &apos;number of experiments&apos; it will run &apos;do with parameters&apos; with the best parameters found. The parameters can then be passed along to the &quot;Create and train a neural net named ... base upon ...&quot; block.&#xD;The named model must already exist and its training data (and optionally its validation data) already made available. It scores each experiment by adding the weighted values of the loss, accuracy, time to train, number of parameter, and degree of variability in the outcome scores.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n">10</input><input type="%n">3</input><input type="%n">100</input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%n">10</input><input type="%n">10</input><input type="%n">1</input><input type="%n">2</input><input type="%n">3</input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>optimize_hyperparameters</l><list><block var="model name"/><block var="number of experiments"/><block var="training cycles"/><block var="do when a trial finishes"/><block var="do with best parameters"/><block var="process error"/><block s="reportNewList"><list><block var="optimization method"/><block var="loss function"/><block var="activation function"/><block var="shuffle data"/><block var="number of training iterations"/><block var="validation split"/><block var="dropout rate"/><block var="number of layers"/></list></block><block s="reportNewList"><list><block var="loss weight"/><block var="accuracy weight"/><block var="duration weight"/><block var="size weight"/><block var="standard deviation weight"/></list></block><block var="number of samples"/></list></custom-block></script></block-definition></blocks><variables><variable name="model name"><l>square root</l></variable><variable name="best parameters"><list id="1104"><item><list struct="atomic" id="1105">optimization_method,Adaptive Moment Estimation</list></item><item><list struct="atomic" id="1106">loss_function,Absolute Difference</list></item><item><list struct="atomic" id="1107">activation,softplus</list></item><item><list id="1108"><item><l>shuffle</l></item><item><bool>false</bool></item></list></item><item><list struct="atomic" id="1109">epochs,75</list></item><item><list struct="atomic" id="1110">validation_split,0.09609563273262704</list></item><item><list struct="atomic" id="1111">dropout_rate,0.0568512443963531</list></item><item><list struct="atomic" id="1112">learning_rate,0.0023</list></item><item><list id="1113"><item><l>layers</l></item><item><list struct="atomic" id="1114">56,40,10,1</list></item></list></item><item><list id="1115"><item><l>is_best_so_far</l></item><item><bool>true</bool></item></list></item><item><list id="1116"><item><l>input_shape</l></item><item><list struct="atomic" id="1117">1</list></item></list></item><item><list id="1118"><item><l>used_validation_data</l></item><item><bool>true</bool></item></list></item><item><list struct="atomic" id="1119">lowest_loss,0.7941009998321533</list></item><item><list struct="atomic" id="1120">highest_score,-0.7941009998321533</list></item><item><list id="1121"><item><l>metrics</l></item><item><list id="1122"><item><list struct="atomic" id="1123">average_loss,0.7941009998321533</list></item><item><list id="1124"><item><l>average_accuracy</l></item><item><l>NaN</l></item></list></item><item><list struct="atomic" id="1125">average_duration,38.633</list></item><item><list struct="atomic" id="1126">average_size,2812</list></item><item><list struct="atomic" id="1127">score_standard_deviation,0</list></item></list></item></list></item></list></variable></variables></project>