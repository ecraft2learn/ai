<project name="hyperparameters exercise" app="Snap! 7, https://snap.berkeley.edu" version="2"><notes></notes><thumbnail>data:image/png;base64,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</thumbnail><scenes select="1"><scene name="hyperparameters exercise"><notes></notes><hidden></hidden><headers></headers><code></code><blocks><block-definition s="Get predictions from model %&apos;name&apos; with inputs %&apos;inputs&apos; $nl then %&apos;process predictions&apos; $nl or if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="181.42857142857144" collapsed="false">Ask the trained model to make predictions for each value in &apos;inputs&apos;</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>predictions_from_model</l><list><block var="name"/><block var="inputs"/><block var="process predictions"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="map %&apos;reporter&apos; on each element of %&apos;list 1&apos; and %&apos;list 2&apos;" type="reporter" category="variables"><comment x="0" y="0" w="242.14285714285717" collapsed="false">Reports a list created by applying reporter to corresponding elements of the lists.</comment><header></header><code></code><translations></translations><inputs><input type="%repRing"></input><input type="%l"></input><input type="%l"></input></inputs><script><block s="doWarp"><script><block s="doIf"><custom-block s="empty? %l"><block var="list 1"/></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doIf"><custom-block s="empty? %l"><block var="list 2"/></custom-block><script><block s="doReport"><block s="reportNewList"><list></list></block></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="reporter"/><list><block s="reportListItem"><l>1</l><block var="list 1"/></block><block s="reportListItem"><l>1</l><block var="list 2"/></block></list></block><custom-block s="map %repRing on each element of %l and %l"><block var="reporter"/><block s="reportCDR"><block var="list 1"/></block><block s="reportCDR"><block var="list 2"/></block></custom-block></block></block></script></block></script></block-definition><block-definition s="Open this in a new tab" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>re_open_full_window</l><list></list></custom-block></script></block-definition><block-definition s="Search for good neural net model parameters for %&apos;model name&apos; perform %&apos;number of experiments&apos; experiments with each running %&apos;training cycles&apos; training cycles $nl and when each experiment finishes do %&apos;do when a trial finishes&apos; $nl then process best parameters %&apos;do with best parameters&apos; $nl but if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="267.8571428571429" collapsed="false">This searches for the best hyperparameters (learning rate, number of training cycles, loss function, optimazation method, and layers) that results in the most accurate model. It will run &apos;do when a trial finishes&apos; with the results of each experiment and after &apos;number of experiments&apos; it will run &apos;do with parameters&apos; with the best parameters found. The parameters can then be passed along to the &quot;Create and train a neural net named ... base upon ...&quot; block.&#xD;The named model must already exist and its training data (and optionally its validation data) already made available.&#xD;&#xD;There is a full-featured version of this block for detailed control of the search.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n"></input><input type="%n"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>optimize_hyperparameters</l><list><block var="model name"/><block var="number of experiments"/><block var="training cycles"/><block var="do when a trial finishes"/><block var="do with best parameters"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="%&apos;n&apos; random numbers with maximum of %&apos;maximum&apos;" type="reporter" category="variables"><comment x="0" y="0" w="237.14285714285717" collapsed="false">Reports a list of &apos;n&apos; between 1 and &apos;maximum&apos;.&#xD;Multiplying and dividing by 1000 produces numbers with 3 decimal places.</comment><header></header><code></code><translations></translations><inputs><input type="%n">100</input><input type="%n"></input></inputs><script><block s="doWarp"><script><custom-block s="let %upvar be %s"><l>numbers</l><block s="reportNewList"><list></list></block></custom-block><block s="doRepeat"><block var="n"/><script><block s="doAddToList"><block s="reportQuotient"><block s="reportRandom"><l>1</l><block s="reportProduct"><block var="maximum"/><l>1000</l></block></block><l>1000</l></block><block var="numbers"/></block></script></block><block s="doReport"><block var="numbers"/></block></script></block></script></block-definition><block-definition s="map %&apos;func&apos; over %&apos;data&apos;" type="reporter" category="lists"><header></header><code></code><translations>de:wende _ an auf _&#xD;</translations><inputs><input type="%repRing"></input><input type="%l"></input></inputs><script><block s="doIf"><custom-block s="empty? %l"><block var="data"/></custom-block><script><block s="doReport"><block var="data"/></block></script></block><block s="doReport"><block s="reportCONS"><block s="evaluate"><block var="func"/><list><block s="reportListItem"><l>1</l><block var="data"/></block></list></block><custom-block s="map %repRing over %l"><block var="func"/><block s="reportCDR"><block var="data"/></block></custom-block></block></block></script></block-definition><block-definition s="Create a neural net model %&apos;model name&apos; $nl with layers %&apos;layers&apos; $nl with input size %&apos;input size&apos; then %&apos;do when created&apos;" type="command" category="other"><comment x="0" y="0" w="249.2857142857143" collapsed="false">Creates a neural with a &apos;name&apos; that is used in other blocks for training and prediction. &apos;Layers&apos; is a list of positive numbers determine the size of each layer.  &apos;Input size&apos; should be a number or a list of numbers that describes what the input dimensions are. You don&apos;t need to provide this if you have already sent or loaded training data.&#xD;There is another version of this block with more inputs.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%s"></input><input type="%cs"></input></inputs><script><custom-block s="Create a neural network model %txt %br with layers %l %br using optimizer %txt %br with loss function %txt %br with input size %s %br then %cmdRing %br but if there is an error %cmdRing"><block var="model name"/><block var="layers"/><l>Adaptive Stochastic Gradient Descent</l><l>Mean Squared Error</l><block var="input size"/><block var="do when created"/><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error message"/><l>Error creating a model</l></custom-block></script><list><l>error message</l></list></block></custom-block></script></block-definition><block-definition s="Create a neural network model %&apos;name&apos; $nl with layers %&apos;layers&apos; $nl using optimizer %&apos;optimizer&apos; $nl with loss function %&apos;loss function&apos; $nl with input size %&apos;input size&apos; $nl then %&apos;do after model created&apos; $nl but if there is an error %&apos;process error&apos;" type="command" category="other"><comment x="0" y="0" w="245.00000000000003" collapsed="false">Creates a neural with a &apos;name&apos; that is used in other blocks for training and prediction. &apos;Layers&apos; is a list of positive numbers determine the size of each layer. The &apos;optimizer&apos; is the name of the method that will be used during training. &apos;loss function&apos; is used to measure the difference between predictions and outputs during training. &apos;Input size&apos; should be a number or a list of numbers that describes what the input dimensions are. You don&apos;t need to provide this if you have already sent or loaded training data.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%l"></input><input type="%txt" readonly="true">Stochastic Gradient Descent<options>Stochastic Gradient Descent&#xD;Adaptive Stochastic Gradient Descent&#xD;Adaptive Learning Rate Gradiant Descent&#xD;Adaptive Moment Estimation&#xD;Adaptive Moment Estimation Max&#xD;Momentum&#xD;Root Mean Squared Prop</options></input><input type="%txt" readonly="true">Mean Squared Error<options>Absolute Distance&#xD;Compute Weighted Loss&#xD;Cosine Distance&#xD;Hinge Loss&#xD;Huber Loss&#xD;Log Loss&#xD;Mean Squared Error&#xD;Sigmoid Cross Entropy&#xD;Softmax Cross Entropy</options></input><input type="%s"></input><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>create_tensorflow_model</l><list><block var="name"/><block var="layers"/><block var="optimizer"/><block var="loss function"/><block var="input size"/><block var="do after model created"/><block var="process error"/></list></custom-block></script></block-definition><block-definition s="Replace model named %&apos;model name&apos; with the best model found $nl and when finished %&apos;run after replacement&apos; $nl but if there is an error %&apos;run if there is an error&apos;" type="command" category="other"><comment x="0" y="0" w="268.5714285714286" collapsed="false">This will replace the model named by the best model found by the &apos;Search for good neural net model ...&quot; command.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cs"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>replace_with_best_model</l><list><block var="model name"/><block var="run after replacement"/><block var="run if there is an error"/></list></custom-block></script></block-definition><block-definition s="Open support panel %&apos;source&apos;" type="command" category="sensing"><comment x="0" y="0" w="170.71428571428572" collapsed="false">Open an interface page for different machine learning models.</comment><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">training using camera<options>training using camera&#xD;training using microphone&#xD;posenet&#xD;tensorflow.js</options></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>display_support_window</l><list><block var="source"/></list></custom-block></script></block-definition><block-definition s="Send %&apos;kind of data&apos; data input %&apos;input&apos; output %&apos;output&apos; $nl forget old data %&apos;ignore old data&apos; ( this is only for %&apos;model name&apos; ) $nl then when data has been received %&apos;do when finished&apos;" type="command" category="other"><comment x="0" y="0" w="282.14285714285717" collapsed="false">Sends either training or validation data to the support panel.</comment><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">training<options>training&#xD;validation</options></input><input type="%l"></input><input type="%l"></input><input type="%b">false</input><input type="%txt">all models</input><input type="%cs"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>send_data</l><list><block var="model name"/><block var="kind of data"/><block var="input"/><block var="output"/><block var="ignore old data"/><block var="do when finished"/></list></custom-block></script></block-definition><block-definition s="inform %&apos;message&apos; with title %&apos;title&apos;" type="command" category="other"><comment x="0" y="0" w="217.14285714285717" collapsed="false">Will display &apos;message&apos; in a dialog box with &apos;title&apos;. User needs to click &apos;OK&apos; to remove it.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>inform</l><list><block var="title"/><block var="message"/></list></custom-block></script></block-definition><block-definition s="let %&apos;var&apos; be %&apos;value&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%upvar"></input><input type="%s"></input></inputs><script><block s="doSetVar"><l>var</l><block var="value"/></block></script></block-definition><block-definition s="empty? %&apos;data&apos;" type="predicate" category="lists"><header></header><code></code><translations></translations><inputs><input type="%l"></input></inputs><script><block s="doReport"><block s="reportEquals"><block var="data"/><block s="reportNewList"><list></list></block></block></block></script></block-definition><block-definition s="Search for good neural net model parameters for %&apos;model name&apos; $nl perform %&apos;number of experiments&apos; experiments $nl where each experiment should run the same parameters %&apos;number of samples&apos; times $nl where at first run %&apos;training cycles&apos; training cycles $nl and when each experiment finishes do %&apos;do when a trial finishes&apos; $nl then process best parameters %&apos;do with best parameters&apos; $nl but if there is an error %&apos;process error&apos; $nl $pointRight-1-64-64-255 Varying these parameters: $nl ...optimization method %&apos;vary optimization method&apos; $nl ...loss function %&apos;vary loss function&apos; $nl ...activation function %&apos;vary activation function&apos; $nl ...shuffle data %&apos;vary whether to shuffle data&apos; $nl ...learning rate %&apos;vary learning rate&apos; $nl ...number of training iterations %&apos;vary number of training iterations&apos; $nl ...validation split %&apos;vary validation split&apos; $nl ...dropout rate %&apos;vary dropout rate&apos; $nl ...number and size of layers %&apos;vary number of layers&apos; $nl $pointRight-1-64-64-255 With these scoring weights: $nl ...loss weight %&apos;loss weight&apos; $nl ...accuracy weight %&apos;accuracy weight&apos; $nl ...duration weight %&apos;duration weight&apos; $nl ...size of model weight %&apos;size weight&apos; $nl ...variance of score weight %&apos;standard deviation weight&apos; $nl $pointRight-1-64-64-255 With these initial settings: $nl ...learning rate %&apos;learning rate&apos; $nl ...stop training if no progress for %&apos;stop if no progress&apos; cycles $nl ...fraction set aside for validation from training data %&apos;validation fraction&apos; $nl ...shuffle data after each step %&apos;shuffle data&apos;" type="command" category="other"><comment x="0" y="0" w="280.7142857142857" collapsed="false">This searches for the best hyperparameters (learning rate, number of training cycles, loss function, optimazation method, and layers) that results in the most accurate model. It will run &apos;do when a trial finishes&apos; with the results of each experiment. Each experiment will average the results of &apos;number of samples&apos; runs with the same hyperparameters. After &apos;number of experiments&apos; it will run &apos;do with parameters&apos; with the best parameters found. The parameters can then be passed along to the &quot;Create and train a neural net named ... base upon ...&quot; block.&#xD;The named model must already exist and its training data (and optionally its validation data) already made available. It scores each experiment by adding the weighted values of the loss, accuracy, time to train, number of parameter, and degree of variability in the outcome scores.</comment><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%n">10</input><input type="%n">3</input><input type="%n">100</input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%cmdRing"></input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%b">true</input><input type="%n">10</input><input type="%n">10</input><input type="%n">1</input><input type="%n">2</input><input type="%n">3</input><input type="%n">.001</input><input type="%n">0</input><input type="%n"></input><input type="%b">true</input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>optimize_hyperparameters</l><list><block var="model name"/><block var="number of experiments"/><block var="training cycles"/><block var="do when a trial finishes"/><block var="do with best parameters"/><block var="process error"/><block s="reportNewList"><list><block var="vary optimization method"/><block var="vary loss function"/><block var="vary activation function"/><block var="vary whether to shuffle data"/><block var="vary number of training iterations"/><block var="vary validation split"/><block var="vary dropout rate"/><block var="vary number of layers"/><block var="vary learning rate"/></list></block><block s="reportNewList"><list><block var="loss weight"/><block var="accuracy weight"/><block var="duration weight"/><block var="size weight"/><block var="standard deviation weight"/></list></block><block var="number of samples"/><block var="learning rate"/><block var="stop if no progress"/><block var="validation fraction"/><block var="shuffle data"/></list></custom-block></script></block-definition><block-definition s="Set presentation mode to %&apos;flag&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%b"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>set_presentation_mode</l><list><block var="flag"/></list></custom-block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><custom-block s="load eCraft2Learn"></custom-block><block s="doApplyExtension"><l>e2l_run(command_name, parameters)</l><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition><block-definition s="load eCraft2Learn" type="command" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doApplyExtension"><l>src_load(url)</l><list><l>https://ecraft2learn.github.io/ai/ecraft2learn.js</l></list></block><block s="doApplyExtension"><l>src_load(url)</l><list><l>https://ecraft2learn.github.io/ai/js/ecraft2learn_snap_extension.js</l></list></block></script></block-definition></blocks><stage width="360" height="240" costume="0" color="255,255,255,1" tempo="60" threadsafe="false" penlog="false" volume="100" pan="0" lines="round" ternary="true" hyperops="true" codify="false" inheritance="false" sublistIDs="false" id="292"><pentrails>data:image/png;base64,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</pentrails><costumes><list struct="atomic" id="293"></list></costumes><sounds><list struct="atomic" id="294"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites select="1"><sprite name="Sprite" idx="0" x="2.4126898510994845" y="-1.1987726301661978" heading="90" scale="1" volume="100" pan="0" rotation="1" draggable="true" costume="0" color="249.9,119.952,0,1" pen="tip" id="299"><costumes><list struct="atomic" id="300"></list></costumes><sounds><list struct="atomic" id="301"></list></sounds><blocks></blocks><variables></variables><scripts><script x="14.428571428571422" y="7.142857142857143"><block s="doSetVar"><l>model name</l><l>hypotenuse</l></block><custom-block s="Create a neural net model %txt %br with layers %l %br with input size %s then %cs"><block var="model name"/><block s="reportNewList"><list><l>40</l><l>20</l><l>1</l></list></block><l>2</l><script><block s="bubble"><l>Model created.</l></block></script><comment w="210" collapsed="false">Start with a model with 40 neurons connected to 20 neurons connected to 1 output neuron.</comment></custom-block><custom-block s="let %upvar be %s"><l>lists of sides</l><custom-block s="map %repRing on each element of %l and %l"><block s="reifyReporter"><autolambda><block s="reportNewList"><list><l></l><l></l></list></block></autolambda><list></list></block><custom-block s="%n random numbers with maximum of %n"><l>1000</l><l>100</l></custom-block><custom-block s="%n random numbers with maximum of %n"><l>1000</l><l>100</l></custom-block></custom-block><comment w="182.14285714285717" collapsed="false">Create 1000 examples of two sides.</comment></custom-block><custom-block s="let %upvar be %s"><l>hypotenuses</l><custom-block s="map %repRing over %l"><block s="reifyReporter"><autolambda><block s="reportMonadic"><l><option>sqrt</option></l><block s="reportSum"><block s="reportProduct"><block s="reportListItem"><l>1</l><l/></block><block s="reportListItem"><l>1</l><l/></block></block><block s="reportProduct"><block s="reportListItem"><l>2</l><l/></block><block s="reportListItem"><l>2</l><l/></block></block></block></block></autolambda><list></list></block><block var="lists of sides"/></custom-block><comment w="135.71428571428572" collapsed="false">Compute the hypotenuses.</comment></custom-block><custom-block s="Send %txt data input %l output %l %br forget old data %b ( this is only for %txt ) %br then when data has been received %cs"><l>training</l><block var="lists of sides"/><block var="hypotenuses"/><l><bool>true</bool></l><l>all models</l><script><block s="bubble"><l>Data sent. Search started.</l></block><custom-block s="Search for good neural net model parameters for %txt perform %n experiments with each running %n training cycles %br and when each experiment finishes do %cmdRing %br then process best parameters %cmdRing %br but if there is an error %cmdRing"><block var="model name"/><l>3</l><l>100</l><block s="reifyScript"><script><block s="doThink"><block var="results"/></block></script><list><l>results</l></list></block><block s="reifyScript"><script><block s="bubble"><block var="parameters"/></block><block s="doSetVar"><l>best parameters</l><block var="parameters"/></block></script><list><l>parameters</l></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error"/><l>Searching for hyperparameters</l></custom-block></script><list><l>error</l></list></block><comment w="157.14285714285708" collapsed="false">3 experiments isn&apos;t enough to find good hyperparameters. Try this again with a larger number.</comment></custom-block></script></custom-block></script><script x="13.285717285714266" y="576.500005"><custom-block s="Replace model named %txt with the best model found %br and when finished %cs %br but if there is an error %cmdRing"><block var="model name"/><block s="reifyScript"><script><block s="bubble"><l>Replaced</l></block></script><list></list></block><block s="reifyScript"><script><custom-block s="inform %txt with title %txt"><block var="error"/><l>Replacing model with best search results</l></custom-block></script><list></list></block><comment w="242.14285714285717" collapsed="false">Make the named model be the best one found by the search above.</comment></custom-block></script><script x="12.571412847098195" y="682.9999949949778"><custom-block s="Get predictions from model %txt with inputs %l %br then %cmdRing %br or if there is an error %cmdRing"><block var="model name"/><block s="reportNewList"><list><block s="reportNewList"><list><l>3</l><l>4</l></list></block><block s="reportNewList"><list><l>1</l><l>10</l></list></block><block s="reportNewList"><list><l>50</l><l>50</l></list></block></list></block><block s="reifyScript"><script><block s="doThink"><block s="reportNewList"><list><block var="predictions"/><block s="reportNewList"><list><block s="reportMonadic"><l><option>sqrt</option></l><l>25</l></block><block s="reportMonadic"><l><option>sqrt</option></l><l>101</l></block><block s="reportMonadic"><l><option>sqrt</option></l><l>5000</l></block></list></block></list></block></block></script><list><l>predictions</l></list></block><block s="reifyScript"><script><block s="bubble"><l></l></block></script><list></list></block></custom-block></script><script x="12.428571428571454" y="869.4285932268415"><custom-block s="Open support panel %txt"><l>tensorflow.js</l><comment w="241.42857142857144" collapsed="false">Do more experiments in an interactive web page.</comment></custom-block></script><comment x="12.999999999999993" y="931.8571646554133" w="305" collapsed="true">Here is a full-featured version of the search block.</comment><script x="406.9589843750001" y="90.14287894112744"><custom-block s="Open this in a new tab"></custom-block></script><script x="15.000000000000002" y="965.0000000000001"><custom-block s="Search for good neural net model parameters for %txt %br perform %n experiments %br where each experiment should run the same parameters %n times %br where at first run %n training cycles %br and when each experiment finishes do %cmdRing %br then process best parameters %cmdRing %br but if there is an error %cmdRing %br $pointRight-1-64-64-255 Varying these parameters: %br ...optimization method %b %br ...loss function %b %br ...activation function %b %br ...shuffle data %b %br ...learning rate %b %br ...number of training iterations %b %br ...validation split %b %br ...dropout rate %b %br ...number and size of layers %b %br $pointRight-1-64-64-255 With these scoring weights: %br ...loss weight %n %br ...accuracy weight %n %br ...duration weight %n %br ...size of model weight %n %br ...variance of score weight %n %br $pointRight-1-64-64-255 With these initial settings: %br ...learning rate %n %br ...stop training if no progress for %n cycles %br ...fraction set aside for validation from training data %n %br ...shuffle data after each step %b"><l></l><l>10</l><l>3</l><l>100</l><block s="reifyScript"><script></script><list></list></block><block s="reifyScript"><script></script><list></list></block><block s="reifyScript"><script></script><list></list></block><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l><bool>true</bool></l><l>10</l><l>10</l><l>1</l><l>2</l><l>3</l><l>.001</l><l>0</l><l></l><l><bool>true</bool></l></custom-block></script><script x="20.714285714285715" y="1365.8809741792224"><block s="receiveGo"></block><custom-block s="Set presentation mode to %b"><l><bool>false</bool></l><comment w="195" collapsed="true">Make sure we are in edit mode.</comment></custom-block></script></scripts></sprite><watcher s="xPosition" style="normal" x="0" y="1001.0833121115543" color="74,108,212" hidden="true"/><watcher s="yPosition" style="normal" x="-68.94117500910897" y="2069.6715247528746" color="74,108,212" hidden="true"/><watcher scope="Stage" s="reportMouseX" style="normal" x="344.70587504560126" y="344.70587504558597" color="4,148,220" hidden="true"/><watcher scope="Stage" s="reportMouseY" style="normal" x="344.70587504560126" y="1302.9882766134904" color="4,148,220" hidden="true"/><watcher var="model name" style="normal" x="21.870057050680543" y="21.870057050681382" color="243,118,29" hidden="true"/></sprites></stage><variables><variable name="model name"><l>hypotenuse</l></variable><variable name="best parameters"><list id="555"><item><list struct="atomic" id="556">optimization_method,Momentum</list></item><item><list struct="atomic" id="557">loss_function,Absolute Difference</list></item><item><list struct="atomic" id="558">activation,softmax</list></item><item><list id="559"><item><l>shuffle</l></item><item><bool>false</bool></item></list></item><item><list struct="atomic" id="560">epochs,105</list></item><item><list struct="atomic" id="561">validation_split,0.39148153209299996</list></item><item><list struct="atomic" id="562">dropout_rate,0.6968999575592574</list></item><item><list struct="atomic" id="563">learning_rate,0.0012000000000000001</list></item><item><list id="564"><item><l>layers</l></item><item><list struct="atomic" id="565">39,18,1</list></item></list></item><item><list id="566"><item><l>stop_if_no_progress_for_n_epochs</l></item><item><l></l></item></list></item><item><list id="567"><item><l>is_best_so_far</l></item><item><bool>true</bool></item></list></item><item><list id="568"><item><l>input_shape</l></item><item><list struct="atomic" id="569">2</list></item></list></item><item><list id="570"><item><l>used_validation_data</l></item><item><bool>false</bool></item></list></item><item><list struct="atomic" id="571">lowest_loss,66.65804290771484</list></item><item><list struct="atomic" id="572">highest_score,-66.65804290771484</list></item><item><list id="573"><item><l>metrics</l></item><item><list id="574"><item><list struct="atomic" id="575">average_loss,66.65804290771484</list></item><item><list id="576"><item><l>average_accuracy</l></item><item><l>NaN</l></item></list></item><item><list struct="atomic" id="577">average_duration,50.916</list></item><item><list struct="atomic" id="578">average_size,855</list></item><item><list struct="atomic" id="579">score_standard_deviation,0</list></item></list></item></list></item></list></variable></variables></scene></scenes></project>