<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"> </script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/qna"> </script>
<textarea id="question" rows="4" cols="60">Loading. Please wait.</textarea>
<textarea id="passage" rows="30" cols="100">Enter the passage here.</textarea>
<div id="answer">Answer will appear here</div>
<button id="answer-question" hidden>Answer the question</button>
<script>
  const question = document.getElementById('question');
  const passage = document.getElementById('passage');
  const answer = document.getElementById('answer');
  const button = document.getElementById('answer-question');
  let model;
  // Load the model.
  qna.load().then(m => {
    model = m;
    button.hidden = false;
    question.innerHTML = "Enter your question here.";
  });
  button.addEventListener('click',
    (event) => {
      answer.innerHTML = "...";
      model.findAnswers(question.value, passage.value).then(answers => {
        console.log('Question: ', question.value, 'Answers: ', answers);
        if (answers.length === 0) {
          answer.innerHTML = "Please rephrase your question.";
        } else {
          answer.innerHTML = answers[0].text + " (score: " + answers[0].score.toPrecision(3) + ")";
//           let response = "";
//           answers.forEach((answer, index) => {
//             response += index + ". " + answer.text + " (" + answer.score.toPrecision(3) + ")<br>";
//           });
//           answer.innerHTML = response;
//         }
      };
    });
    });
</script>