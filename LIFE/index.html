<!doctype html>
<html>
<head>
	<title>Intelligent support for LIFE game</title>
	<meta charset='utf-8'>
	<link href="../css/ai-teacher-guide.css" rel="stylesheet">
	<link rel="icon" type="image/png" href="icons/icon-32.png" />
	<script src="../ecraft2learn.js"></script>
	<script src="../js/tfjs.js"></script> 
    <script src="encoder/universal-sentence-encoder.js"></script>
    <script src="../js/user-agent.js"></script>
    <script src="./LIFE.js"></script>
    <script src="../js/train.js"></script>
    <script src="../js/train-report-results.js"></script>
    <script src="../js/load-scripts.js"></script>
    <link rel="manifest" href="/ai/LIFE/LIFE.webmanifest">
<script>
if ('serviceWorker' in navigator && window.location.hostname !== 'localhost') {
    navigator.serviceWorker.register('service-worker.js');
}
const parameters = new URLSearchParams(window.location.hash.slice(1));
let mode;
if (parameters.has('answer')) { // also the default
	mode = 'answer questions'; // until new version working well
} else if (parameters.has('train')) {
	mode = 'create model';
} else if (parameters.has('test')) {
	mode = 'test';
} else if (parameters.has('search')) {
	mode = 'search';
} else if (parameters.has('old-test')) {
	mode = 'old test';
} else if (parameters.has('old-answer-questions')) {
	mode = 'old answer questions';
} else {
	mode = 'answer questions'; // until new version working well
}
const model_name = (mode === 'create model' || mode === 'search') ? "27-10-2019a" : "26-10-2019b";
const model_options = {
    seed: (number) => Math.round((number+Math.random())*1000000),
    model_name: model_name,
    score_threshold: 0.5,
    hidden_layer_sizes: [2048,128,16],
    batch_size: 256,
    dropout_rate: .5,
    batch_normalization: false,
    shuffle: true,
    epochs: 5000,
    optimizer: (i) => tf.train.rmsprop(2e-4), // tf.train.adamax(1e-5), tf.train.adadelta(),
    regularizer: (i) => tf.regularizers.l2({l2: 1e-3}),
    layer_initializer: (index) => tf.initializers.varianceScaling({}),
    // for reporting results
    regularizer_name: 'l2(1e-3)',
    optimizer_name: 'rmsprop(2e-4)',
    layer_initializer_name: 'varianceScaling', 
    testing_fraction: 0,
    validation_fraction: .3,
    stop_if_no_progress_for_n_epochs: 100,
    number_of_training_repeats: 2,
    split_data_on_each_experiment: true,
    search: {type: 'randomSearch', // or 'gridSearch' but it triggers an exception
             number_of_experiments: 100,
             space: {
//              	     epochs: [1000, 2000],
//          dropout_rate: [0.25, .5,],
//          batch_normalization: [true, false],
                     validation_fraction: [.3, .4, .5], 
//                      batch_size: [128, 256],
//                      optimizer: [(i) => tf.train.rmsprop(2e-4),
// 								 (i) => tf.train.adamax(1e-5),
// 								 (i) => tf.train.adamax(1e-4),
// 								 (i) => tf.train.adamax(3e-5),
// 								 (i) => tf.train.adadelta()
// 								 ],
//                      regularizer: [(i) => tf.regularizers.l2({l2: 1e-3}),
// 								   (i) => tf.regularizers.l2({l2: 1e-4}),
// 								   (i) => tf.regularizers.l2({l2: 1e-2}),
// 								   (i) => null],
//                      hidden_layer_sizes: [[512, 256, 128, 64], [512, 128, 16], [2048, 128], [1024, 512, 256, 128], ]
                     }}
            };
</script>
<style>
p {
    width: auto;
}
</style>
</head>
<body>
<p>
<input id="question"
       type="text"
       style="width: 60em;font-size: 16px;"
       placeholder="Enter your question followed by ? or new line">
</input>
</p>
<p>
<button id="speech-recognition" class="testing-button">
</button>
<p id="answer">
Your answer will appear here.
</p>
<hr></hr>
<audio src="type.mp3" id="sound"></audio>
</body>
</html>
