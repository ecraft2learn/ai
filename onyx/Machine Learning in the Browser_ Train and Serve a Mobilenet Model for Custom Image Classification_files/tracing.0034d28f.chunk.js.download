(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"./src/util/tracing.ts":function(n,e,t){"use strict";t.r(e),t.d(e,"init",(function(){return a})),t.d(e,"extractSpan",(function(){return u})),t.d(e,"instrumentAppPerformance",(function(){return l}));var r=t("./node_modules/lightstep-tracer/browser.js"),o=t("./node_modules/opentracing/lib/index.js"),s=t("./src/store/actions/debug.ts"),i=t("./src/store/selectors/session.ts"),c=t("./src/util/performance.ts"),a=function(n){var e=n.name,t=n.host,s=n.token,i=n.appVersion,c=new r.Tracer({component_name:e,xhr_instrumentation:!1,access_token:s,collector_host:t,default_span_tags:{"component.version":i}});return Object(o.initGlobalTracer)(c),c},u=function(n,e){if(e)return n.extract(o.FORMAT_TEXT_MAP,e)},l=function(n,e,t,r,a,u,l){var f={"user.logged_in":Object(i.a)(a),"req.route_name":l?l.name:"unknown"};u.forEach((function(n){return f["req.".concat(n)]=1}));var d={loggedIn:Object(i.a)(a),route:l?l.name:"unidentified",withinSsrRecircPerfExperiment:u.includes("ssr_recirc_perf_tag")},p=function(n){return Math.round(1e3*n)},g=function(e,t,r,o){var s=r.start,i=r.end,c=n.startSpan("timing.".concat(t),{childOf:e,tags:f}).setBeginMicros(p(s)).setEndMicros(p(i));return null!=o&&o(c),c.finish(),c};c.d.observe((function(i){r.reportRender(d,i);var c=n.startSpan("timing.navigation",{references:[Object(o.followsFrom)(e)],tags:f}).setBeginMicros(p(i.load.start)).setEndMicros(p(i.load.end));g(c,"beforeDomainLookup",i.beforeDomainLookup),g(c,"domainLookup",i.domainLookup),g(c,"connect",i.connect),g(c,"request",i.request),g(c,"response",i.response),g(c,"processing",i.processing);var a=i.overallFCP,u=i.client,l=i.render,m=i.overallLCP;null!=a&&g(c,"firstContentfulPaint",a),null!=u&&g(c,"client",u,(function(n){null!=l&&g(n,"render",l)})),null!=m&&g(c,"largestContentfulPaint",m),c.finish(),t(Object(s.c)(c.generateTraceURL()))})),c.b.observe((function(t){r.reportInput(d,t),n.startSpan("timing.input.first.delay",{references:[Object(o.followsFrom)(e)],tags:f}).setBeginMicros(p(t.first.start)).setEndMicros(p(t.first.end)).finish()}))}}}]);
//# sourceMappingURL=tracing.0034d28f.chunk.js.map